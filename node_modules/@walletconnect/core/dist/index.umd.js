(function(W,Xe){typeof exports=="object"&&typeof module<"u"?Xe(exports):typeof define=="function"&&define.amd?define(["exports"],Xe):(W=typeof globalThis<"u"?globalThis:W||self,Xe(W["@walletconnect/core"]={}))})(this,function(W){"use strict";var Xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ct(t){var e=t.default;if(typeof e=="function"){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var ut={exports:{}},Ht=typeof Reflect=="object"?Reflect:null,li=Ht&&typeof Ht.apply=="function"?Ht.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Dr;Ht&&typeof Ht.ownKeys=="function"?Dr=Ht.ownKeys:Object.getOwnPropertySymbols?Dr=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Dr=function(e){return Object.getOwnPropertyNames(e)};function Na(t){console&&console.warn&&console.warn(t)}var hi=Number.isNaN||function(e){return e!==e};function Oe(){Oe.init.call(this)}ut.exports=Oe,ut.exports.once=ja,Oe.EventEmitter=Oe,Oe.prototype._events=void 0,Oe.prototype._eventsCount=0,Oe.prototype._maxListeners=void 0;var di=10;function Sr(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Oe,"defaultMaxListeners",{enumerable:!0,get:function(){return di},set:function(t){if(typeof t!="number"||t<0||hi(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");di=t}}),Oe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Oe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||hi(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function gi(t){return t._maxListeners===void 0?Oe.defaultMaxListeners:t._maxListeners}Oe.prototype.getMaxListeners=function(){return gi(this)},Oe.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var c;if(r.length>0&&(c=r[0]),c instanceof Error)throw c;var u=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw u.context=c,u}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")li(l,this,r);else for(var f=l.length,_=vi(l,f),n=0;n<f;++n)li(_[n],this,r);return!0};function _i(t,e,r,n){var i,s,c;if(Sr(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),c=s[e]),c===void 0)c=s[e]=r,++t._eventsCount;else if(typeof c=="function"?c=s[e]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),i=gi(t),i>0&&c.length>i&&!c.warned){c.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=c.length,Na(u)}return t}Oe.prototype.addListener=function(e,r){return _i(this,e,r,!1)},Oe.prototype.on=Oe.prototype.addListener,Oe.prototype.prependListener=function(e,r){return _i(this,e,r,!0)};function Ua(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function yi(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=Ua.bind(n);return i.listener=r,n.wrapFn=i,i}Oe.prototype.once=function(e,r){return Sr(r),this.on(e,yi(this,e,r)),this},Oe.prototype.prependOnceListener=function(e,r){return Sr(r),this.prependListener(e,yi(this,e,r)),this},Oe.prototype.removeListener=function(e,r){var n,i,s,c,u;if(Sr(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,c=n.length-1;c>=0;c--)if(n[c]===r||n[c].listener===r){u=n[c].listener,s=c;break}if(s<0)return this;s===0?n.shift():Ma(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,u||r)}return this},Oe.prototype.off=Oe.prototype.removeListener,Oe.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),c;for(i=0;i<s.length;++i)c=s[i],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function pi(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?$a(i):vi(i,i.length)}Oe.prototype.listeners=function(e){return pi(this,e,!0)},Oe.prototype.rawListeners=function(e){return pi(this,e,!1)},Oe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):bi.call(t,e)},Oe.prototype.listenerCount=bi;function bi(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Oe.prototype.eventNames=function(){return this._eventsCount>0?Dr(this._events):[]};function vi(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Ma(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function $a(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function ja(t,e){return new Promise(function(r,n){function i(c){t.removeListener(e,s),n(c)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Ei(t,e,s,{once:!0}),e!=="error"&&Fa(t,i,{once:!0})})}function Fa(t,e,r){typeof t.on=="function"&&Ei(t,"error",e,r)}function Ei(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Or={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var tn=function(t,e){return tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},tn(t,e)};function Ba(t,e){tn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var rn=function(){return rn=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},rn.apply(this,arguments)};function za(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Ha(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(c=t[u])&&(s=(i<3?c(s):i>3?c(e,r,s):c(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Ka(t,e){return function(r,n){e(r,n,t)}}function Ga(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Va(t,e,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function u(_){try{f(n.next(_))}catch(O){c(O)}}function l(_){try{f(n.throw(_))}catch(O){c(O)}}function f(_){_.done?s(_.value):i(_.value).then(u,l)}f((n=n.apply(t,e||[])).next())})}function qa(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(f){return function(_){return l([f,_])}}function l(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){r.label=f[1];break}if(f[0]===6&&r.label<s[1]){r.label=s[1],s=f;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(f);break}s[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(_){f=[6,_],i=0}finally{n=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Wa(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Ya(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function nn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wi(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(u){c={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function ka(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(wi(arguments[e]));return t}function Xa(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,u=s.length;c<u;c++,i++)n[i]=s[c];return n}function Jt(t){return this instanceof Jt?(this.v=t,this):new Jt(t)}function Ja(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(p){n[p]&&(i[p]=function(v){return new Promise(function(A,C){s.push([p,v,A,C])>1||u(p,v)})})}function u(p,v){try{l(n[p](v))}catch(A){O(s[0][3],A)}}function l(p){p.value instanceof Jt?Promise.resolve(p.value.v).then(f,_):O(s[0][2],p)}function f(p){u("next",p)}function _(p){u("throw",p)}function O(p,v){p(v),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Qa(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(c){return(r=!r)?{value:Jt(t[i](c)),done:i==="return"}:s?s(c):c}:s}}function Za(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof nn=="function"?nn(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(u,l){c=t[s](c),i(u,l,c.done,c.value)})}}function i(s,c,u,l){Promise.resolve(l).then(function(f){s({value:f,done:u})},c)}}function ec(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function tc(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function rc(t){return t&&t.__esModule?t:{default:t}}function nc(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function ic(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var sc=Object.freeze({__proto__:null,__extends:Ba,get __assign(){return rn},__rest:za,__decorate:Ha,__param:Ka,__metadata:Ga,__awaiter:Va,__generator:qa,__createBinding:Wa,__exportStar:Ya,__values:nn,__read:wi,__spread:ka,__spreadArrays:Xa,__await:Jt,__asyncGenerator:Ja,__asyncDelegator:Qa,__asyncValues:Za,__makeTemplateObject:ec,__importStar:tc,__importDefault:rc,__classPrivateFieldGet:nc,__classPrivateFieldSet:ic}),mi=Ct(sc),Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});function oc(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}Qt.safeJsonParse=oc;function ac(t){return typeof t=="string"?t:JSON.stringify(t,(e,r)=>typeof r>"u"?null:r)}Qt.safeJsonStringify=ac;var Zt={exports:{}},Di;function cc(){return Di||(Di=1,function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Xe<"u"&&Xe.localStorage?Zt.exports=Xe.localStorage:typeof window<"u"&&window.localStorage?Zt.exports=window.localStorage:Zt.exports=new e}()),Zt.exports}var sn={},er={},Si;function uc(){if(Si)return er;Si=1,Object.defineProperty(er,"__esModule",{value:!0}),er.IKeyValueStorage=void 0;class t{}return er.IKeyValueStorage=t,er}var tr={},Oi;function fc(){if(Oi)return tr;Oi=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.parseEntry=void 0;const t=Qt;function e(r){var n;return[r[0],t.safeJsonParse((n=r[1])!==null&&n!==void 0?n:"")]}return tr.parseEntry=e,tr}var Ti;function lc(){return Ti||(Ti=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=mi;e.__exportStar(uc(),t),e.__exportStar(fc(),t)}(sn)),sn}Object.defineProperty(Or,"__esModule",{value:!0}),Or.KeyValueStorage=void 0;const Kt=mi,xi=Qt,hc=Kt.__importDefault(cc()),dc=lc();class Ii{constructor(){this.localStorage=hc.default}getKeys(){return Kt.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Kt.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(dc.parseEntry)})}getItem(e){return Kt.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return xi.safeJsonParse(r)})}setItem(e,r){return Kt.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,xi.safeJsonStringify(r))})}removeItem(e){return Kt.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}Or.KeyValueStorage=Ii;var gc=Or.default=Ii,Gt={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var on=function(t,e){return on=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},on(t,e)};function _c(t,e){on(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var an=function(){return an=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},an.apply(this,arguments)};function yc(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function pc(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(c=t[u])&&(s=(i<3?c(s):i>3?c(e,r,s):c(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function bc(t,e){return function(r,n){e(r,n,t)}}function vc(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Ec(t,e,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function u(_){try{f(n.next(_))}catch(O){c(O)}}function l(_){try{f(n.throw(_))}catch(O){c(O)}}function f(_){_.done?s(_.value):i(_.value).then(u,l)}f((n=n.apply(t,e||[])).next())})}function wc(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(f){return function(_){return l([f,_])}}function l(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){r.label=f[1];break}if(f[0]===6&&r.label<s[1]){r.label=s[1],s=f;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(f);break}s[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(_){f=[6,_],i=0}finally{n=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function mc(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Dc(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function cn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ri(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(u){c={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function Sc(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ri(arguments[e]));return t}function Oc(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,u=s.length;c<u;c++,i++)n[i]=s[c];return n}function rr(t){return this instanceof rr?(this.v=t,this):new rr(t)}function Tc(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(p){n[p]&&(i[p]=function(v){return new Promise(function(A,C){s.push([p,v,A,C])>1||u(p,v)})})}function u(p,v){try{l(n[p](v))}catch(A){O(s[0][3],A)}}function l(p){p.value instanceof rr?Promise.resolve(p.value.v).then(f,_):O(s[0][2],p)}function f(p){u("next",p)}function _(p){u("throw",p)}function O(p,v){p(v),s.shift(),s.length&&u(s[0][0],s[0][1])}}function xc(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(c){return(r=!r)?{value:rr(t[i](c)),done:i==="return"}:s?s(c):c}:s}}function Ic(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof cn=="function"?cn(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(u,l){c=t[s](c),i(u,l,c.done,c.value)})}}function i(s,c,u,l){Promise.resolve(l).then(function(f){s({value:f,done:u})},c)}}function Rc(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Ac(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Cc(t){return t&&t.__esModule?t:{default:t}}function Pc(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Lc(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Nc=Object.freeze({__proto__:null,__extends:_c,get __assign(){return an},__rest:yc,__decorate:pc,__param:bc,__metadata:vc,__awaiter:Ec,__generator:wc,__createBinding:mc,__exportStar:Dc,__values:cn,__read:Ri,__spread:Sc,__spreadArrays:Oc,__await:rr,__asyncGenerator:Tc,__asyncDelegator:xc,__asyncValues:Ic,__makeTemplateObject:Rc,__importStar:Ac,__importDefault:Cc,__classPrivateFieldGet:Pc,__classPrivateFieldSet:Lc}),Tr=Ct(Nc),nr={},ce={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var un=function(t,e){return un=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},un(t,e)};function Uc(t,e){un(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var fn=function(){return fn=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},fn.apply(this,arguments)};function Mc(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function $c(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(c=t[u])&&(s=(i<3?c(s):i>3?c(e,r,s):c(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function jc(t,e){return function(r,n){e(r,n,t)}}function Fc(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Bc(t,e,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function u(_){try{f(n.next(_))}catch(O){c(O)}}function l(_){try{f(n.throw(_))}catch(O){c(O)}}function f(_){_.done?s(_.value):i(_.value).then(u,l)}f((n=n.apply(t,e||[])).next())})}function zc(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(f){return function(_){return l([f,_])}}function l(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){r.label=f[1];break}if(f[0]===6&&r.label<s[1]){r.label=s[1],s=f;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(f);break}s[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(_){f=[6,_],i=0}finally{n=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Hc(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Kc(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function ln(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ai(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(u){c={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function Gc(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ai(arguments[e]));return t}function Vc(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,u=s.length;c<u;c++,i++)n[i]=s[c];return n}function ir(t){return this instanceof ir?(this.v=t,this):new ir(t)}function qc(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(p){n[p]&&(i[p]=function(v){return new Promise(function(A,C){s.push([p,v,A,C])>1||u(p,v)})})}function u(p,v){try{l(n[p](v))}catch(A){O(s[0][3],A)}}function l(p){p.value instanceof ir?Promise.resolve(p.value.v).then(f,_):O(s[0][2],p)}function f(p){u("next",p)}function _(p){u("throw",p)}function O(p,v){p(v),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Wc(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(c){return(r=!r)?{value:ir(t[i](c)),done:i==="return"}:s?s(c):c}:s}}function Yc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof ln=="function"?ln(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(u,l){c=t[s](c),i(u,l,c.done,c.value)})}}function i(s,c,u,l){Promise.resolve(l).then(function(f){s({value:f,done:u})},c)}}function kc(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Xc(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Jc(t){return t&&t.__esModule?t:{default:t}}function Qc(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Zc(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var eu=Object.freeze({__proto__:null,__extends:Uc,get __assign(){return fn},__rest:Mc,__decorate:$c,__param:jc,__metadata:Fc,__awaiter:Bc,__generator:zc,__createBinding:Hc,__exportStar:Kc,__values:ln,__read:Ai,__spread:Gc,__spreadArrays:Vc,__await:ir,__asyncGenerator:qc,__asyncDelegator:Wc,__asyncValues:Yc,__makeTemplateObject:kc,__importStar:Xc,__importDefault:Jc,__classPrivateFieldGet:Qc,__classPrivateFieldSet:Zc}),xr=Ct(eu),hn={},sr={},Ci;function tu(){if(Ci)return sr;Ci=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return sr.delay=t,sr}var Pt={},dn={},Lt={},Pi;function ru(){return Pi||(Pi=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.ONE_THOUSAND=Lt.ONE_HUNDRED=void 0,Lt.ONE_HUNDRED=100,Lt.ONE_THOUSAND=1e3),Lt}var gn={},Li;function nu(){return Li||(Li=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(gn)),gn}var Ni;function Ui(){return Ni||(Ni=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=xr;e.__exportStar(ru(),t),e.__exportStar(nu(),t)}(dn)),dn}var Mi;function iu(){if(Mi)return Pt;Mi=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.fromMiliseconds=Pt.toMiliseconds=void 0;const t=Ui();function e(n){return n*t.ONE_THOUSAND}Pt.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Pt.fromMiliseconds=r,Pt}var $i;function su(){return $i||($i=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=xr;e.__exportStar(tu(),t),e.__exportStar(iu(),t)}(hn)),hn}var Vt={},ji;function ou(){if(ji)return Vt;ji=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Vt.Watch=t,Vt.default=t,Vt}var _n={},or={},Fi;function au(){if(Fi)return or;Fi=1,Object.defineProperty(or,"__esModule",{value:!0}),or.IWatch=void 0;class t{}return or.IWatch=t,or}var Bi;function cu(){return Bi||(Bi=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),xr.__exportStar(au(),t)}(_n)),_n}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=xr;e.__exportStar(su(),t),e.__exportStar(ou(),t),e.__exportStar(cu(),t),e.__exportStar(Ui(),t)})(ce);var yn={},ar={};class Nt{}var uu=Object.freeze({__proto__:null,IEvents:Nt}),fu=Ct(uu),zi;function lu(){if(zi)return ar;zi=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.IHeartBeat=void 0;const t=fu;class e extends t.IEvents{constructor(n){super()}}return ar.IHeartBeat=e,ar}var Hi;function Ki(){return Hi||(Hi=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Tr.__exportStar(lu(),t)}(yn)),yn}var pn={},Ut={},Gi;function hu(){if(Gi)return Ut;Gi=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.HEARTBEAT_EVENTS=Ut.HEARTBEAT_INTERVAL=void 0;const t=ce;return Ut.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,Ut.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Ut}var Vi;function qi(){return Vi||(Vi=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Tr.__exportStar(hu(),t)}(pn)),pn}var Wi;function du(){if(Wi)return nr;Wi=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.HeartBeat=void 0;const t=Tr,e=ut.exports,r=ce,n=Ki(),i=qi();class s extends n.IHeartBeat{constructor(u){super(u),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=u?.interval||i.HEARTBEAT_INTERVAL}static init(u){return t.__awaiter(this,void 0,void 0,function*(){const l=new s(u);return yield l.init(),l})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(u,l){this.events.on(u,l)}once(u,l){this.events.once(u,l)}off(u,l){this.events.off(u,l)}removeListener(u,l){this.events.removeListener(u,l)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return nr.HeartBeat=s,nr}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Tr;e.__exportStar(du(),t),e.__exportStar(Ki(),t),e.__exportStar(qi(),t)})(Gt);var Se={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var bn=function(t,e){return bn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},bn(t,e)};function gu(t,e){bn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var vn=function(){return vn=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},vn.apply(this,arguments)};function _u(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function yu(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(c=t[u])&&(s=(i<3?c(s):i>3?c(e,r,s):c(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function pu(t,e){return function(r,n){e(r,n,t)}}function bu(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function vu(t,e,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function u(_){try{f(n.next(_))}catch(O){c(O)}}function l(_){try{f(n.throw(_))}catch(O){c(O)}}function f(_){_.done?s(_.value):i(_.value).then(u,l)}f((n=n.apply(t,e||[])).next())})}function Eu(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(f){return function(_){return l([f,_])}}function l(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){r.label=f[1];break}if(f[0]===6&&r.label<s[1]){r.label=s[1],s=f;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(f);break}s[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(_){f=[6,_],i=0}finally{n=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function wu(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function mu(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function En(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yi(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(u){c={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function Du(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Yi(arguments[e]));return t}function Su(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,u=s.length;c<u;c++,i++)n[i]=s[c];return n}function cr(t){return this instanceof cr?(this.v=t,this):new cr(t)}function Ou(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(p){n[p]&&(i[p]=function(v){return new Promise(function(A,C){s.push([p,v,A,C])>1||u(p,v)})})}function u(p,v){try{l(n[p](v))}catch(A){O(s[0][3],A)}}function l(p){p.value instanceof cr?Promise.resolve(p.value.v).then(f,_):O(s[0][2],p)}function f(p){u("next",p)}function _(p){u("throw",p)}function O(p,v){p(v),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Tu(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(c){return(r=!r)?{value:cr(t[i](c)),done:i==="return"}:s?s(c):c}:s}}function xu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof En=="function"?En(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(u,l){c=t[s](c),i(u,l,c.done,c.value)})}}function i(s,c,u,l){Promise.resolve(l).then(function(f){s({value:f,done:u})},c)}}function Iu(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Ru(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Au(t){return t&&t.__esModule?t:{default:t}}function Cu(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Pu(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Lu=Object.freeze({__proto__:null,__extends:gu,get __assign(){return vn},__rest:_u,__decorate:yu,__param:pu,__metadata:bu,__awaiter:vu,__generator:Eu,__createBinding:wu,__exportStar:mu,__values:En,__read:Yi,__spread:Du,__spreadArrays:Su,__await:cr,__asyncGenerator:Ou,__asyncDelegator:Tu,__asyncValues:xu,__makeTemplateObject:Iu,__importStar:Ru,__importDefault:Au,__classPrivateFieldGet:Cu,__classPrivateFieldSet:Pu}),Nu=Ct(Lu),wn,ki;function Uu(){if(ki)return wn;ki=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}wn=e;function e(r,n,i){var s=i&&i.stringify||t,c=1;if(typeof r=="object"&&r!==null){var u=n.length+c;if(u===1)return r;var l=new Array(u);l[0]=s(r);for(var f=1;f<u;f++)l[f]=s(n[f]);return l.join(" ")}if(typeof r!="string")return r;var _=n.length;if(_===0)return r;for(var O="",p=1-c,v=-1,A=r&&r.length||0,C=0;C<A;){if(r.charCodeAt(C)===37&&C+1<A){switch(v=v>-1?v:0,r.charCodeAt(C+1)){case 100:case 102:if(p>=_||n[p]==null)break;v<C&&(O+=r.slice(v,C)),O+=Number(n[p]),v=C+2,C++;break;case 105:if(p>=_||n[p]==null)break;v<C&&(O+=r.slice(v,C)),O+=Math.floor(Number(n[p])),v=C+2,C++;break;case 79:case 111:case 106:if(p>=_||n[p]===void 0)break;v<C&&(O+=r.slice(v,C));var U=typeof n[p];if(U==="string"){O+="'"+n[p]+"'",v=C+2,C++;break}if(U==="function"){O+=n[p].name||"<anonymous>",v=C+2,C++;break}O+=s(n[p]),v=C+2,C++;break;case 115:if(p>=_)break;v<C&&(O+=r.slice(v,C)),O+=String(n[p]),v=C+2,C++;break;case 37:v<C&&(O+=r.slice(v,C)),O+="%",v=C+2,C++,p--;break}++p}++C}return v===-1?r:(v<A&&(O+=r.slice(v)),O)}return wn}var mn,Xi;function Mu(){if(Xi)return mn;Xi=1;const t=Uu();mn=i;const e=E().console||{},r={mapHttpRequest:A,mapHttpResponse:A,wrapRequestSerializer:C,wrapResponseSerializer:C,wrapErrorSerializer:C,req:A,res:A,err:p};function n(d,o){return Array.isArray(d)?d.filter(function(L){return L!=="!stdSerializers.err"}):d===!0?Object.keys(o):!1}function i(d){d=d||{},d.browser=d.browser||{};const o=d.browser.transmit;if(o&&typeof o.send!="function")throw Error("pino: transmit option must have a send function");const h=d.browser.write||e;d.browser.write&&(d.browser.asObject=!0);const L=d.serializers||{},P=n(d.browser.serialize,L);let H=d.browser.serialize;Array.isArray(d.browser.serialize)&&d.browser.serialize.indexOf("!stdSerializers.err")>-1&&(H=!1);const G=["error","fatal","warn","info","debug","trace"];typeof h=="function"&&(h.error=h.fatal=h.warn=h.info=h.debug=h.trace=h),d.enabled===!1&&(d.level="silent");const J=d.level||"info",D=Object.create(h);D.log||(D.log=U),Object.defineProperty(D,"levelVal",{get:V}),Object.defineProperty(D,"level",{get:F,set:M});const I={transmit:o,serialize:P,asObject:d.browser.asObject,levels:G,timestamp:v(d)};D.levels=i.levels,D.level=J,D.setMaxListeners=D.getMaxListeners=D.emit=D.addListener=D.on=D.prependListener=D.once=D.prependOnceListener=D.removeListener=D.removeAllListeners=D.listeners=D.listenerCount=D.eventNames=D.write=D.flush=U,D.serializers=L,D._serialize=P,D._stdErrSerialize=H,D.child=j,o&&(D._logEvent=O());function V(){return this.level==="silent"?1/0:this.levels.values[this.level]}function F(){return this._level}function M(N){if(N!=="silent"&&!this.levels.values[N])throw Error("unknown level "+N);this._level=N,s(I,D,"error","log"),s(I,D,"fatal","error"),s(I,D,"warn","error"),s(I,D,"info","log"),s(I,D,"debug","log"),s(I,D,"trace","log")}function j(N,B){if(!N)throw new Error("missing bindings for child Pino");B=B||{},P&&N.serializers&&(B.serializers=N.serializers);const ee=B.serializers;if(P&&ee){var z=Object.assign({},L,ee),Q=d.browser.serialize===!0?Object.keys(z):P;delete N.serializers,l([N],Q,z,this._stdErrSerialize)}function k(Z){this._childLevel=(Z._childLevel|0)+1,this.error=f(Z,N,"error"),this.fatal=f(Z,N,"fatal"),this.warn=f(Z,N,"warn"),this.info=f(Z,N,"info"),this.debug=f(Z,N,"debug"),this.trace=f(Z,N,"trace"),z&&(this.serializers=z,this._serialize=Q),o&&(this._logEvent=O([].concat(Z._logEvent.bindings,N)))}return k.prototype=this,new k(this)}return D}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:Y,epochTime:S,unixTime:R,isoTime:b});function s(d,o,h,L){const P=Object.getPrototypeOf(o);o[h]=o.levelVal>o.levels.values[h]?U:P[h]?P[h]:e[h]||e[L]||U,c(d,o,h)}function c(d,o,h){!d.transmit&&o[h]===U||(o[h]=function(L){return function(){const H=d.timestamp(),G=new Array(arguments.length),J=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var D=0;D<G.length;D++)G[D]=arguments[D];if(d.serialize&&!d.asObject&&l(G,this._serialize,this.serializers,this._stdErrSerialize),d.asObject?L.call(J,u(this,h,G,H)):L.apply(J,G),d.transmit){const I=d.transmit.level||o.level,V=i.levels.values[I],F=i.levels.values[h];if(F<V)return;_(this,{ts:H,methodLevel:h,methodValue:F,transmitLevel:I,transmitValue:i.levels.values[d.transmit.level||o.level],send:d.transmit.send,val:o.levelVal},G)}}}(o[h]))}function u(d,o,h,L){d._serialize&&l(h,d._serialize,d.serializers,d._stdErrSerialize);const P=h.slice();let H=P[0];const G={};L&&(G.time=L),G.level=i.levels.values[o];let J=(d._childLevel|0)+1;if(J<1&&(J=1),H!==null&&typeof H=="object"){for(;J--&&typeof P[0]=="object";)Object.assign(G,P.shift());H=P.length?t(P.shift(),P):void 0}else typeof H=="string"&&(H=t(P.shift(),P));return H!==void 0&&(G.msg=H),G}function l(d,o,h,L){for(const P in d)if(L&&d[P]instanceof Error)d[P]=i.stdSerializers.err(d[P]);else if(typeof d[P]=="object"&&!Array.isArray(d[P]))for(const H in d[P])o&&o.indexOf(H)>-1&&H in h&&(d[P][H]=h[H](d[P][H]))}function f(d,o,h){return function(){const L=new Array(1+arguments.length);L[0]=o;for(var P=1;P<L.length;P++)L[P]=arguments[P-1];return d[h].apply(this,L)}}function _(d,o,h){const L=o.send,P=o.ts,H=o.methodLevel,G=o.methodValue,J=o.val,D=d._logEvent.bindings;l(h,d._serialize||Object.keys(d.serializers),d.serializers,d._stdErrSerialize===void 0?!0:d._stdErrSerialize),d._logEvent.ts=P,d._logEvent.messages=h.filter(function(I){return D.indexOf(I)===-1}),d._logEvent.level.label=H,d._logEvent.level.value=G,L(H,d._logEvent,J),d._logEvent=O(D)}function O(d){return{ts:0,messages:[],bindings:d||[],level:{label:"",value:0}}}function p(d){const o={type:d.constructor.name,msg:d.message,stack:d.stack};for(const h in d)o[h]===void 0&&(o[h]=d[h]);return o}function v(d){return typeof d.timestamp=="function"?d.timestamp:d.timestamp===!1?Y:S}function A(){return{}}function C(d){return d}function U(){}function Y(){return!1}function S(){return Date.now()}function R(){return Math.round(Date.now()/1e3)}function b(){return new Date(Date.now()).toISOString()}function E(){function d(o){return typeof o<"u"&&o}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return d(self)||d(window)||d(this)||{}}}return mn}var Mt={},Ji;function Qi(){return Ji||(Ji=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.PINO_CUSTOM_CONTEXT_KEY=Mt.PINO_LOGGER_DEFAULTS=void 0,Mt.PINO_LOGGER_DEFAULTS={level:"info"},Mt.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Mt}var tt={},Zi;function $u(){if(Zi)return tt;Zi=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.generateChildLogger=tt.formatChildLoggerContext=tt.getLoggerContext=tt.setBrowserLoggerContext=tt.getBrowserLoggerContext=tt.getDefaultLoggerOptions=void 0;const t=Qi();function e(u){return Object.assign(Object.assign({},u),{level:u?.level||t.PINO_LOGGER_DEFAULTS.level})}tt.getDefaultLoggerOptions=e;function r(u,l=t.PINO_CUSTOM_CONTEXT_KEY){return u[l]||""}tt.getBrowserLoggerContext=r;function n(u,l,f=t.PINO_CUSTOM_CONTEXT_KEY){return u[f]=l,u}tt.setBrowserLoggerContext=n;function i(u,l=t.PINO_CUSTOM_CONTEXT_KEY){let f="";return typeof u.bindings>"u"?f=r(u,l):f=u.bindings().context||"",f}tt.getLoggerContext=i;function s(u,l,f=t.PINO_CUSTOM_CONTEXT_KEY){const _=i(u,f);return _.trim()?`${_}/${l}`:l}tt.formatChildLoggerContext=s;function c(u,l,f=t.PINO_CUSTOM_CONTEXT_KEY){const _=s(u,l,f),O=u.child({context:_});return n(O,_,f)}return tt.generateChildLogger=c,tt}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=Nu,r=e.__importDefault(Mu());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(Qi(),t),e.__exportStar($u(),t)})(Se);class ju extends Nt{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class Fu extends Nt{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}}class Bu{constructor(e,r){this.logger=e,this.core=r}}class zu extends Nt{constructor(e,r){super(),this.relayer=e,this.logger=r}}class Hu extends Nt{constructor(e){super()}}class Ku{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}}class Gu extends Nt{constructor(e,r){super(),this.relayer=e,this.logger=r}}class Vu extends Nt{constructor(e,r){super(),this.core=e,this.logger=r}}class qu{constructor(e,r){this.projectId=e,this.logger=r}}const Wu=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),Yu=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function es(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Yu(t)}catch{return t}}function Dn(t){return typeof t=="string"?t:Wu(t)||""}var Sn={},qt={},Ir={},Rr={};Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.BrowserRandomSource=void 0;const ts=65536;class ku{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=ts)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,ts)));return r}}Rr.BrowserRandomSource=ku;function Xu(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ar={},ot={};Object.defineProperty(ot,"__esModule",{value:!0});function Ju(t){for(var e=0;e<t.length;e++)t[e]=0;return t}ot.wipe=Ju;var Qu={},Zu=Object.freeze({__proto__:null,default:Qu}),ef=Ct(Zu);Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.NodeRandomSource=void 0;const tf=ot;class rf{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Xu<"u"){const e=ef;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,tf.wipe)(r),n}}Ar.NodeRandomSource=rf,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.SystemRandomSource=void 0;const nf=Rr,sf=Ar;class of{constructor(){if(this.isAvailable=!1,this.name="",this._source=new nf.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new sf.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Ir.SystemRandomSource=of;var re={},rs={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(u,l){var f=u>>>16&65535,_=u&65535,O=l>>>16&65535,p=l&65535;return _*p+(f*p+_*O<<16>>>0)|0}t.mul=Math.imul||e;function r(u,l){return u+l|0}t.add=r;function n(u,l){return u-l|0}t.sub=n;function i(u,l){return u<<l|u>>>32-l}t.rotl=i;function s(u,l){return u<<32-l|u>>>l}t.rotr=s;function c(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u}t.isInteger=Number.isInteger||c,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(u){return t.isInteger(u)&&u>=-t.MAX_SAFE_INTEGER&&u<=t.MAX_SAFE_INTEGER}})(rs),Object.defineProperty(re,"__esModule",{value:!0});var ns=rs;function af(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}re.readInt16BE=af;function cf(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}re.readUint16BE=cf;function uf(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}re.readInt16LE=uf;function ff(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}re.readUint16LE=ff;function is(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}re.writeUint16BE=is,re.writeInt16BE=is;function ss(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}re.writeUint16LE=ss,re.writeInt16LE=ss;function On(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}re.readInt32BE=On;function Tn(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}re.readUint32BE=Tn;function xn(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}re.readInt32LE=xn;function In(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}re.readUint32LE=In;function Cr(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}re.writeUint32BE=Cr,re.writeInt32BE=Cr;function Pr(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}re.writeUint32LE=Pr,re.writeInt32LE=Pr;function lf(t,e){e===void 0&&(e=0);var r=On(t,e),n=On(t,e+4);return r*4294967296+n-(n>>31)*4294967296}re.readInt64BE=lf;function hf(t,e){e===void 0&&(e=0);var r=Tn(t,e),n=Tn(t,e+4);return r*4294967296+n}re.readUint64BE=hf;function df(t,e){e===void 0&&(e=0);var r=xn(t,e),n=xn(t,e+4);return n*4294967296+r-(r>>31)*4294967296}re.readInt64LE=df;function gf(t,e){e===void 0&&(e=0);var r=In(t,e),n=In(t,e+4);return n*4294967296+r}re.readUint64LE=gf;function os(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Cr(t/4294967296>>>0,e,r),Cr(t>>>0,e,r+4),e}re.writeUint64BE=os,re.writeInt64BE=os;function as(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Pr(t>>>0,e,r),Pr(t/4294967296>>>0,e,r+4),e}re.writeUint64LE=as,re.writeInt64LE=as;function _f(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}re.readUintBE=_f;function yf(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}re.readUintLE=yf;function pf(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!ns.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}re.writeUintBE=pf;function bf(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!ns.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}re.writeUintLE=bf;function vf(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}re.readFloat32BE=vf;function Ef(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}re.readFloat32LE=Ef;function wf(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}re.readFloat64BE=wf;function mf(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}re.readFloat64LE=mf;function Df(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}re.writeFloat32BE=Df;function Sf(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}re.writeFloat32LE=Sf;function Of(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}re.writeFloat64BE=Of;function Tf(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}re.writeFloat64LE=Tf,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=Ir,r=re,n=ot;t.defaultRandomSource=new e.SystemRandomSource;function i(f,_=t.defaultRandomSource){return _.randomBytes(f)}t.randomBytes=i;function s(f=t.defaultRandomSource){const _=i(4,f),O=(0,r.readUint32LE)(_);return(0,n.wipe)(_),O}t.randomUint32=s;const c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(f,_=c,O=t.defaultRandomSource){if(_.length<2)throw new Error("randomString charset is too short");if(_.length>256)throw new Error("randomString charset is too long");let p="";const v=_.length,A=256-256%v;for(;f>0;){const C=i(Math.ceil(f*256/A),O);for(let U=0;U<C.length&&f>0;U++){const Y=C[U];Y<A&&(p+=_.charAt(Y%v),f--)}(0,n.wipe)(C)}return p}t.randomString=u;function l(f,_=c,O=t.defaultRandomSource){const p=Math.ceil(f/(Math.log(_.length)/Math.LN2));return u(p,_,O)}t.randomStringForEntropy=l}(qt);var cs={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=re,r=ot;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function u(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return u.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},u.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},u.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},u.prototype.update=function(l,f){if(f===void 0&&(f=l.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var _=0;if(this._bytesHashed+=f,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&f>0;)this._buffer[this._bufferLength++]=l[_++],f--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(f>=this.blockSize&&(_=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,l,_,f),f%=this.blockSize);f>0;)this._buffer[this._bufferLength++]=l[_++],f--;return this},u.prototype.finish=function(l){if(!this._finished){var f=this._bytesHashed,_=this._bufferLength,O=f/536870912|0,p=f<<3,v=f%128<112?128:256;this._buffer[_]=128;for(var A=_+1;A<v-8;A++)this._buffer[A]=0;e.writeUint32BE(O,this._buffer,v-8),e.writeUint32BE(p,this._buffer,v-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,v),this._finished=!0}for(var A=0;A<this.digestLength/8;A++)e.writeUint32BE(this._stateHi[A],l,A*8),e.writeUint32BE(this._stateLo[A],l,A*8+4);return this},u.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},u.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},u.prototype.restoreState=function(l){return this._stateHi.set(l.stateHi),this._stateLo.set(l.stateLo),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},u.prototype.cleanSavedState=function(l){r.wipe(l.stateHi),r.wipe(l.stateLo),l.buffer&&r.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},u}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(u,l,f,_,O,p,v){for(var A=f[0],C=f[1],U=f[2],Y=f[3],S=f[4],R=f[5],b=f[6],E=f[7],d=_[0],o=_[1],h=_[2],L=_[3],P=_[4],H=_[5],G=_[6],J=_[7],D,I,V,F,M,j,N,B;v>=128;){for(var ee=0;ee<16;ee++){var z=8*ee+p;u[ee]=e.readUint32BE(O,z),l[ee]=e.readUint32BE(O,z+4)}for(var ee=0;ee<80;ee++){var Q=A,k=C,Z=U,x=Y,T=S,w=R,a=b,y=E,K=d,q=o,le=h,pe=L,de=P,Ee=H,Ue=G,Ce=J;if(D=E,I=J,M=I&65535,j=I>>>16,N=D&65535,B=D>>>16,D=(S>>>14|P<<32-14)^(S>>>18|P<<32-18)^(P>>>41-32|S<<32-(41-32)),I=(P>>>14|S<<32-14)^(P>>>18|S<<32-18)^(S>>>41-32|P<<32-(41-32)),M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,D=S&R^~S&b,I=P&H^~P&G,M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,D=i[ee*2],I=i[ee*2+1],M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,D=u[ee%16],I=l[ee%16],M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,j+=M>>>16,N+=j>>>16,B+=N>>>16,V=N&65535|B<<16,F=M&65535|j<<16,D=V,I=F,M=I&65535,j=I>>>16,N=D&65535,B=D>>>16,D=(A>>>28|d<<32-28)^(d>>>34-32|A<<32-(34-32))^(d>>>39-32|A<<32-(39-32)),I=(d>>>28|A<<32-28)^(A>>>34-32|d<<32-(34-32))^(A>>>39-32|d<<32-(39-32)),M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,D=A&C^A&U^C&U,I=d&o^d&h^o&h,M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,j+=M>>>16,N+=j>>>16,B+=N>>>16,y=N&65535|B<<16,Ce=M&65535|j<<16,D=x,I=pe,M=I&65535,j=I>>>16,N=D&65535,B=D>>>16,D=V,I=F,M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,j+=M>>>16,N+=j>>>16,B+=N>>>16,x=N&65535|B<<16,pe=M&65535|j<<16,C=Q,U=k,Y=Z,S=x,R=T,b=w,E=a,A=y,o=K,h=q,L=le,P=pe,H=de,G=Ee,J=Ue,d=Ce,ee%16===15)for(var z=0;z<16;z++)D=u[z],I=l[z],M=I&65535,j=I>>>16,N=D&65535,B=D>>>16,D=u[(z+9)%16],I=l[(z+9)%16],M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,V=u[(z+1)%16],F=l[(z+1)%16],D=(V>>>1|F<<32-1)^(V>>>8|F<<32-8)^V>>>7,I=(F>>>1|V<<32-1)^(F>>>8|V<<32-8)^(F>>>7|V<<32-7),M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,V=u[(z+14)%16],F=l[(z+14)%16],D=(V>>>19|F<<32-19)^(F>>>61-32|V<<32-(61-32))^V>>>6,I=(F>>>19|V<<32-19)^(V>>>61-32|F<<32-(61-32))^(F>>>6|V<<32-6),M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,j+=M>>>16,N+=j>>>16,B+=N>>>16,u[z]=N&65535|B<<16,l[z]=M&65535|j<<16}D=A,I=d,M=I&65535,j=I>>>16,N=D&65535,B=D>>>16,D=f[0],I=_[0],M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,j+=M>>>16,N+=j>>>16,B+=N>>>16,f[0]=A=N&65535|B<<16,_[0]=d=M&65535|j<<16,D=C,I=o,M=I&65535,j=I>>>16,N=D&65535,B=D>>>16,D=f[1],I=_[1],M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,j+=M>>>16,N+=j>>>16,B+=N>>>16,f[1]=C=N&65535|B<<16,_[1]=o=M&65535|j<<16,D=U,I=h,M=I&65535,j=I>>>16,N=D&65535,B=D>>>16,D=f[2],I=_[2],M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,j+=M>>>16,N+=j>>>16,B+=N>>>16,f[2]=U=N&65535|B<<16,_[2]=h=M&65535|j<<16,D=Y,I=L,M=I&65535,j=I>>>16,N=D&65535,B=D>>>16,D=f[3],I=_[3],M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,j+=M>>>16,N+=j>>>16,B+=N>>>16,f[3]=Y=N&65535|B<<16,_[3]=L=M&65535|j<<16,D=S,I=P,M=I&65535,j=I>>>16,N=D&65535,B=D>>>16,D=f[4],I=_[4],M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,j+=M>>>16,N+=j>>>16,B+=N>>>16,f[4]=S=N&65535|B<<16,_[4]=P=M&65535|j<<16,D=R,I=H,M=I&65535,j=I>>>16,N=D&65535,B=D>>>16,D=f[5],I=_[5],M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,j+=M>>>16,N+=j>>>16,B+=N>>>16,f[5]=R=N&65535|B<<16,_[5]=H=M&65535|j<<16,D=b,I=G,M=I&65535,j=I>>>16,N=D&65535,B=D>>>16,D=f[6],I=_[6],M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,j+=M>>>16,N+=j>>>16,B+=N>>>16,f[6]=b=N&65535|B<<16,_[6]=G=M&65535|j<<16,D=E,I=J,M=I&65535,j=I>>>16,N=D&65535,B=D>>>16,D=f[7],I=_[7],M+=I&65535,j+=I>>>16,N+=D&65535,B+=D>>>16,j+=M>>>16,N+=j>>>16,B+=N>>>16,f[7]=E=N&65535|B<<16,_[7]=J=M&65535|j<<16,p+=128,v-=128}return p}function c(u){var l=new n;l.update(u);var f=l.digest();return l.clean(),f}t.hash=c})(cs),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=qt,r=cs,n=ot;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(x){const T=new Float64Array(16);if(x)for(let w=0;w<x.length;w++)T[w]=x[w];return T}const s=new Uint8Array(32);s[0]=9;const c=i(),u=i([1]),l=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),f=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),_=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),O=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function v(x,T){for(let w=0;w<16;w++)x[w]=T[w]|0}function A(x){let T=1;for(let w=0;w<16;w++){let a=x[w]+T+65535;T=Math.floor(a/65536),x[w]=a-T*65536}x[0]+=T-1+37*(T-1)}function C(x,T,w){const a=~(w-1);for(let y=0;y<16;y++){const K=a&(x[y]^T[y]);x[y]^=K,T[y]^=K}}function U(x,T){const w=i(),a=i();for(let y=0;y<16;y++)a[y]=T[y];A(a),A(a),A(a);for(let y=0;y<2;y++){w[0]=a[0]-65517;for(let q=1;q<15;q++)w[q]=a[q]-65535-(w[q-1]>>16&1),w[q-1]&=65535;w[15]=a[15]-32767-(w[14]>>16&1);const K=w[15]>>16&1;w[14]&=65535,C(a,w,1-K)}for(let y=0;y<16;y++)x[2*y]=a[y]&255,x[2*y+1]=a[y]>>8}function Y(x,T){let w=0;for(let a=0;a<32;a++)w|=x[a]^T[a];return(1&w-1>>>8)-1}function S(x,T){const w=new Uint8Array(32),a=new Uint8Array(32);return U(w,x),U(a,T),Y(w,a)}function R(x){const T=new Uint8Array(32);return U(T,x),T[0]&1}function b(x,T){for(let w=0;w<16;w++)x[w]=T[2*w]+(T[2*w+1]<<8);x[15]&=32767}function E(x,T,w){for(let a=0;a<16;a++)x[a]=T[a]+w[a]}function d(x,T,w){for(let a=0;a<16;a++)x[a]=T[a]-w[a]}function o(x,T,w){let a,y,K=0,q=0,le=0,pe=0,de=0,Ee=0,Ue=0,Ce=0,ye=0,ge=0,he=0,ue=0,ae=0,oe=0,se=0,te=0,fe=0,_e=0,ne=0,be=0,ve=0,me=0,De=0,we=0,yt=0,Et=0,xt=0,at=0,jt=0,Er=0,Yr=0,Me=w[0],Pe=w[1],$e=w[2],je=w[3],Fe=w[4],Le=w[5],He=w[6],Ke=w[7],Ge=w[8],Ve=w[9],qe=w[10],ze=w[11],Be=w[12],Re=w[13],We=w[14],Ye=w[15];a=T[0],K+=a*Me,q+=a*Pe,le+=a*$e,pe+=a*je,de+=a*Fe,Ee+=a*Le,Ue+=a*He,Ce+=a*Ke,ye+=a*Ge,ge+=a*Ve,he+=a*qe,ue+=a*ze,ae+=a*Be,oe+=a*Re,se+=a*We,te+=a*Ye,a=T[1],q+=a*Me,le+=a*Pe,pe+=a*$e,de+=a*je,Ee+=a*Fe,Ue+=a*Le,Ce+=a*He,ye+=a*Ke,ge+=a*Ge,he+=a*Ve,ue+=a*qe,ae+=a*ze,oe+=a*Be,se+=a*Re,te+=a*We,fe+=a*Ye,a=T[2],le+=a*Me,pe+=a*Pe,de+=a*$e,Ee+=a*je,Ue+=a*Fe,Ce+=a*Le,ye+=a*He,ge+=a*Ke,he+=a*Ge,ue+=a*Ve,ae+=a*qe,oe+=a*ze,se+=a*Be,te+=a*Re,fe+=a*We,_e+=a*Ye,a=T[3],pe+=a*Me,de+=a*Pe,Ee+=a*$e,Ue+=a*je,Ce+=a*Fe,ye+=a*Le,ge+=a*He,he+=a*Ke,ue+=a*Ge,ae+=a*Ve,oe+=a*qe,se+=a*ze,te+=a*Be,fe+=a*Re,_e+=a*We,ne+=a*Ye,a=T[4],de+=a*Me,Ee+=a*Pe,Ue+=a*$e,Ce+=a*je,ye+=a*Fe,ge+=a*Le,he+=a*He,ue+=a*Ke,ae+=a*Ge,oe+=a*Ve,se+=a*qe,te+=a*ze,fe+=a*Be,_e+=a*Re,ne+=a*We,be+=a*Ye,a=T[5],Ee+=a*Me,Ue+=a*Pe,Ce+=a*$e,ye+=a*je,ge+=a*Fe,he+=a*Le,ue+=a*He,ae+=a*Ke,oe+=a*Ge,se+=a*Ve,te+=a*qe,fe+=a*ze,_e+=a*Be,ne+=a*Re,be+=a*We,ve+=a*Ye,a=T[6],Ue+=a*Me,Ce+=a*Pe,ye+=a*$e,ge+=a*je,he+=a*Fe,ue+=a*Le,ae+=a*He,oe+=a*Ke,se+=a*Ge,te+=a*Ve,fe+=a*qe,_e+=a*ze,ne+=a*Be,be+=a*Re,ve+=a*We,me+=a*Ye,a=T[7],Ce+=a*Me,ye+=a*Pe,ge+=a*$e,he+=a*je,ue+=a*Fe,ae+=a*Le,oe+=a*He,se+=a*Ke,te+=a*Ge,fe+=a*Ve,_e+=a*qe,ne+=a*ze,be+=a*Be,ve+=a*Re,me+=a*We,De+=a*Ye,a=T[8],ye+=a*Me,ge+=a*Pe,he+=a*$e,ue+=a*je,ae+=a*Fe,oe+=a*Le,se+=a*He,te+=a*Ke,fe+=a*Ge,_e+=a*Ve,ne+=a*qe,be+=a*ze,ve+=a*Be,me+=a*Re,De+=a*We,we+=a*Ye,a=T[9],ge+=a*Me,he+=a*Pe,ue+=a*$e,ae+=a*je,oe+=a*Fe,se+=a*Le,te+=a*He,fe+=a*Ke,_e+=a*Ge,ne+=a*Ve,be+=a*qe,ve+=a*ze,me+=a*Be,De+=a*Re,we+=a*We,yt+=a*Ye,a=T[10],he+=a*Me,ue+=a*Pe,ae+=a*$e,oe+=a*je,se+=a*Fe,te+=a*Le,fe+=a*He,_e+=a*Ke,ne+=a*Ge,be+=a*Ve,ve+=a*qe,me+=a*ze,De+=a*Be,we+=a*Re,yt+=a*We,Et+=a*Ye,a=T[11],ue+=a*Me,ae+=a*Pe,oe+=a*$e,se+=a*je,te+=a*Fe,fe+=a*Le,_e+=a*He,ne+=a*Ke,be+=a*Ge,ve+=a*Ve,me+=a*qe,De+=a*ze,we+=a*Be,yt+=a*Re,Et+=a*We,xt+=a*Ye,a=T[12],ae+=a*Me,oe+=a*Pe,se+=a*$e,te+=a*je,fe+=a*Fe,_e+=a*Le,ne+=a*He,be+=a*Ke,ve+=a*Ge,me+=a*Ve,De+=a*qe,we+=a*ze,yt+=a*Be,Et+=a*Re,xt+=a*We,at+=a*Ye,a=T[13],oe+=a*Me,se+=a*Pe,te+=a*$e,fe+=a*je,_e+=a*Fe,ne+=a*Le,be+=a*He,ve+=a*Ke,me+=a*Ge,De+=a*Ve,we+=a*qe,yt+=a*ze,Et+=a*Be,xt+=a*Re,at+=a*We,jt+=a*Ye,a=T[14],se+=a*Me,te+=a*Pe,fe+=a*$e,_e+=a*je,ne+=a*Fe,be+=a*Le,ve+=a*He,me+=a*Ke,De+=a*Ge,we+=a*Ve,yt+=a*qe,Et+=a*ze,xt+=a*Be,at+=a*Re,jt+=a*We,Er+=a*Ye,a=T[15],te+=a*Me,fe+=a*Pe,_e+=a*$e,ne+=a*je,be+=a*Fe,ve+=a*Le,me+=a*He,De+=a*Ke,we+=a*Ge,yt+=a*Ve,Et+=a*qe,xt+=a*ze,at+=a*Be,jt+=a*Re,Er+=a*We,Yr+=a*Ye,K+=38*fe,q+=38*_e,le+=38*ne,pe+=38*be,de+=38*ve,Ee+=38*me,Ue+=38*De,Ce+=38*we,ye+=38*yt,ge+=38*Et,he+=38*xt,ue+=38*at,ae+=38*jt,oe+=38*Er,se+=38*Yr,y=1,a=K+y+65535,y=Math.floor(a/65536),K=a-y*65536,a=q+y+65535,y=Math.floor(a/65536),q=a-y*65536,a=le+y+65535,y=Math.floor(a/65536),le=a-y*65536,a=pe+y+65535,y=Math.floor(a/65536),pe=a-y*65536,a=de+y+65535,y=Math.floor(a/65536),de=a-y*65536,a=Ee+y+65535,y=Math.floor(a/65536),Ee=a-y*65536,a=Ue+y+65535,y=Math.floor(a/65536),Ue=a-y*65536,a=Ce+y+65535,y=Math.floor(a/65536),Ce=a-y*65536,a=ye+y+65535,y=Math.floor(a/65536),ye=a-y*65536,a=ge+y+65535,y=Math.floor(a/65536),ge=a-y*65536,a=he+y+65535,y=Math.floor(a/65536),he=a-y*65536,a=ue+y+65535,y=Math.floor(a/65536),ue=a-y*65536,a=ae+y+65535,y=Math.floor(a/65536),ae=a-y*65536,a=oe+y+65535,y=Math.floor(a/65536),oe=a-y*65536,a=se+y+65535,y=Math.floor(a/65536),se=a-y*65536,a=te+y+65535,y=Math.floor(a/65536),te=a-y*65536,K+=y-1+37*(y-1),y=1,a=K+y+65535,y=Math.floor(a/65536),K=a-y*65536,a=q+y+65535,y=Math.floor(a/65536),q=a-y*65536,a=le+y+65535,y=Math.floor(a/65536),le=a-y*65536,a=pe+y+65535,y=Math.floor(a/65536),pe=a-y*65536,a=de+y+65535,y=Math.floor(a/65536),de=a-y*65536,a=Ee+y+65535,y=Math.floor(a/65536),Ee=a-y*65536,a=Ue+y+65535,y=Math.floor(a/65536),Ue=a-y*65536,a=Ce+y+65535,y=Math.floor(a/65536),Ce=a-y*65536,a=ye+y+65535,y=Math.floor(a/65536),ye=a-y*65536,a=ge+y+65535,y=Math.floor(a/65536),ge=a-y*65536,a=he+y+65535,y=Math.floor(a/65536),he=a-y*65536,a=ue+y+65535,y=Math.floor(a/65536),ue=a-y*65536,a=ae+y+65535,y=Math.floor(a/65536),ae=a-y*65536,a=oe+y+65535,y=Math.floor(a/65536),oe=a-y*65536,a=se+y+65535,y=Math.floor(a/65536),se=a-y*65536,a=te+y+65535,y=Math.floor(a/65536),te=a-y*65536,K+=y-1+37*(y-1),x[0]=K,x[1]=q,x[2]=le,x[3]=pe,x[4]=de,x[5]=Ee,x[6]=Ue,x[7]=Ce,x[8]=ye,x[9]=ge,x[10]=he,x[11]=ue,x[12]=ae,x[13]=oe,x[14]=se,x[15]=te}function h(x,T){o(x,T,T)}function L(x,T){const w=i();let a;for(a=0;a<16;a++)w[a]=T[a];for(a=253;a>=0;a--)h(w,w),a!==2&&a!==4&&o(w,w,T);for(a=0;a<16;a++)x[a]=w[a]}function P(x,T){const w=i();let a;for(a=0;a<16;a++)w[a]=T[a];for(a=250;a>=0;a--)h(w,w),a!==1&&o(w,w,T);for(a=0;a<16;a++)x[a]=w[a]}function H(x,T){const w=i(),a=i(),y=i(),K=i(),q=i(),le=i(),pe=i(),de=i(),Ee=i();d(w,x[1],x[0]),d(Ee,T[1],T[0]),o(w,w,Ee),E(a,x[0],x[1]),E(Ee,T[0],T[1]),o(a,a,Ee),o(y,x[3],T[3]),o(y,y,f),o(K,x[2],T[2]),E(K,K,K),d(q,a,w),d(le,K,y),E(pe,K,y),E(de,a,w),o(x[0],q,le),o(x[1],de,pe),o(x[2],pe,le),o(x[3],q,de)}function G(x,T,w){for(let a=0;a<4;a++)C(x[a],T[a],w)}function J(x,T){const w=i(),a=i(),y=i();L(y,T[2]),o(w,T[0],y),o(a,T[1],y),U(x,a),x[31]^=R(w)<<7}function D(x,T,w){v(x[0],c),v(x[1],u),v(x[2],u),v(x[3],c);for(let a=255;a>=0;--a){const y=w[a/8|0]>>(a&7)&1;G(x,T,y),H(T,x),H(x,x),G(x,T,y)}}function I(x,T){const w=[i(),i(),i(),i()];v(w[0],_),v(w[1],O),v(w[2],u),o(w[3],_,O),D(x,w,T)}function V(x){if(x.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const T=(0,r.hash)(x);T[0]&=248,T[31]&=127,T[31]|=64;const w=new Uint8Array(32),a=[i(),i(),i(),i()];I(a,T),J(w,a);const y=new Uint8Array(64);return y.set(x),y.set(w,32),{publicKey:w,secretKey:y}}t.generateKeyPairFromSeed=V;function F(x){const T=(0,e.randomBytes)(32,x),w=V(T);return(0,n.wipe)(T),w}t.generateKeyPair=F;function M(x){if(x.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(x.subarray(32))}t.extractPublicKeyFromSecretKey=M;const j=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function N(x,T){let w,a,y,K;for(a=63;a>=32;--a){for(w=0,y=a-32,K=a-12;y<K;++y)T[y]+=w-16*T[a]*j[y-(a-32)],w=Math.floor((T[y]+128)/256),T[y]-=w*256;T[y]+=w,T[a]=0}for(w=0,y=0;y<32;y++)T[y]+=w-(T[31]>>4)*j[y],w=T[y]>>8,T[y]&=255;for(y=0;y<32;y++)T[y]-=w*j[y];for(a=0;a<32;a++)T[a+1]+=T[a]>>8,x[a]=T[a]&255}function B(x){const T=new Float64Array(64);for(let w=0;w<64;w++)T[w]=x[w];for(let w=0;w<64;w++)x[w]=0;N(x,T)}function ee(x,T){const w=new Float64Array(64),a=[i(),i(),i(),i()],y=(0,r.hash)(x.subarray(0,32));y[0]&=248,y[31]&=127,y[31]|=64;const K=new Uint8Array(64);K.set(y.subarray(32),32);const q=new r.SHA512;q.update(K.subarray(32)),q.update(T);const le=q.digest();q.clean(),B(le),I(a,le),J(K,a),q.reset(),q.update(K.subarray(0,32)),q.update(x.subarray(32)),q.update(T);const pe=q.digest();B(pe);for(let de=0;de<32;de++)w[de]=le[de];for(let de=0;de<32;de++)for(let Ee=0;Ee<32;Ee++)w[de+Ee]+=pe[de]*y[Ee];return N(K.subarray(32),w),K}t.sign=ee;function z(x,T){const w=i(),a=i(),y=i(),K=i(),q=i(),le=i(),pe=i();return v(x[2],u),b(x[1],T),h(y,x[1]),o(K,y,l),d(y,y,x[2]),E(K,x[2],K),h(q,K),h(le,q),o(pe,le,q),o(w,pe,y),o(w,w,K),P(w,w),o(w,w,y),o(w,w,K),o(w,w,K),o(x[0],w,K),h(a,x[0]),o(a,a,K),S(a,y)&&o(x[0],x[0],p),h(a,x[0]),o(a,a,K),S(a,y)?-1:(R(x[0])===T[31]>>7&&d(x[0],c,x[0]),o(x[3],x[0],x[1]),0)}function Q(x,T,w){const a=new Uint8Array(32),y=[i(),i(),i(),i()],K=[i(),i(),i(),i()];if(w.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(z(K,x))return!1;const q=new r.SHA512;q.update(w.subarray(0,32)),q.update(x),q.update(T);const le=q.digest();return B(le),D(y,K,le),I(K,w.subarray(32)),H(y,K),J(a,y),!Y(w,a)}t.verify=Q;function k(x){let T=[i(),i(),i(),i()];if(z(T,x))throw new Error("Ed25519: invalid public key");let w=i(),a=i(),y=T[1];E(w,u,y),d(a,u,y),L(a,a),o(w,w,a);let K=new Uint8Array(32);return U(K,w),K}t.convertPublicKeyToX25519=k;function Z(x){const T=(0,r.hash)(x.subarray(0,32));T[0]&=248,T[31]&=127,T[31]|=64;const w=new Uint8Array(T.subarray(0,32));return(0,n.wipe)(T),w}t.convertSecretKeyToX25519=Z}(Sn);const xf="EdDSA",If="JWT",us=".",fs="base64url",Rf="utf8",Af="utf8",Cf=":",Pf="did",Lf="key",ls="base58btc",Nf="z",Uf="K36",Mf=32;function Rn(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function hs(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Rn(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function An(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=hs(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return Rn(r)}function $f(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),c=s.charCodeAt(0);if(r[c]!==255)throw new TypeError(s+" is ambiguous");r[c]=i}var u=t.length,l=t.charAt(0),f=Math.log(u)/Math.log(256),_=Math.log(256)/Math.log(u);function O(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var C=0,U=0,Y=0,S=A.length;Y!==S&&A[Y]===0;)Y++,C++;for(var R=(S-Y)*_+1>>>0,b=new Uint8Array(R);Y!==S;){for(var E=A[Y],d=0,o=R-1;(E!==0||d<U)&&o!==-1;o--,d++)E+=256*b[o]>>>0,b[o]=E%u>>>0,E=E/u>>>0;if(E!==0)throw new Error("Non-zero carry");U=d,Y++}for(var h=R-U;h!==R&&b[h]===0;)h++;for(var L=l.repeat(C);h<R;++h)L+=t.charAt(b[h]);return L}function p(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var C=0;if(A[C]!==" "){for(var U=0,Y=0;A[C]===l;)U++,C++;for(var S=(A.length-C)*f+1>>>0,R=new Uint8Array(S);A[C];){var b=r[A.charCodeAt(C)];if(b===255)return;for(var E=0,d=S-1;(b!==0||E<Y)&&d!==-1;d--,E++)b+=u*R[d]>>>0,R[d]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");Y=E,C++}if(A[C]!==" "){for(var o=S-Y;o!==S&&R[o]===0;)o++;for(var h=new Uint8Array(U+(S-o)),L=U;o!==S;)h[L++]=R[o++];return h}}}function v(A){var C=p(A);if(C)return C;throw new Error(`Non-${e} character`)}return{encode:O,decodeUnsafe:p,decode:v}}var jf=$f,Ff=jf;const ds=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Bf=t=>new TextEncoder().encode(t),zf=t=>new TextDecoder().decode(t);class Hf{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Kf{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return gs(this,e)}}class Gf{constructor(e){this.decoders=e}or(e){return gs(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const gs=(t,e)=>new Gf({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Vf{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Hf(e,r,n),this.decoder=new Kf(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Lr=({name:t,prefix:e,encode:r,decode:n})=>new Vf(t,e,r,n),ur=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Ff(r,e);return Lr({prefix:t,name:e,encode:n,decode:s=>ds(i(s))})},qf=(t,e,r,n)=>{const i={};for(let _=0;_<e.length;++_)i[e[_]]=_;let s=t.length;for(;t[s-1]==="=";)--s;const c=new Uint8Array(s*r/8|0);let u=0,l=0,f=0;for(let _=0;_<s;++_){const O=i[t[_]];if(O===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|O,u+=r,u>=8&&(u-=8,c[f++]=255&l>>u)}if(u>=r||255&l<<8-u)throw new SyntaxError("Unexpected end of data");return c},Wf=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",c=0,u=0;for(let l=0;l<t.length;++l)for(u=u<<8|t[l],c+=8;c>r;)c-=r,s+=e[i&u>>c];if(c&&(s+=e[i&u<<r-c]),n)for(;s.length*r&7;)s+="=";return s},Je=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Lr({prefix:e,name:t,encode(i){return Wf(i,n,r)},decode(i){return qf(i,n,r,t)}}),Yf=Lr({prefix:"\0",name:"identity",encode:t=>zf(t),decode:t=>Bf(t)});var kf=Object.freeze({__proto__:null,identity:Yf});const Xf=Je({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Jf=Object.freeze({__proto__:null,base2:Xf});const Qf=Je({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Zf=Object.freeze({__proto__:null,base8:Qf});const el=ur({prefix:"9",name:"base10",alphabet:"0123456789"});var tl=Object.freeze({__proto__:null,base10:el});const rl=Je({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),nl=Je({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var il=Object.freeze({__proto__:null,base16:rl,base16upper:nl});const sl=Je({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ol=Je({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),al=Je({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),cl=Je({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ul=Je({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),fl=Je({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ll=Je({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hl=Je({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),dl=Je({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var gl=Object.freeze({__proto__:null,base32:sl,base32upper:ol,base32pad:al,base32padupper:cl,base32hex:ul,base32hexupper:fl,base32hexpad:ll,base32hexpadupper:hl,base32z:dl});const _l=ur({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yl=ur({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var pl=Object.freeze({__proto__:null,base36:_l,base36upper:yl});const bl=ur({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vl=ur({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var El=Object.freeze({__proto__:null,base58btc:bl,base58flickr:vl});const wl=Je({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ml=Je({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Dl=Je({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Sl=Je({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ol=Object.freeze({__proto__:null,base64:wl,base64pad:ml,base64url:Dl,base64urlpad:Sl});const _s=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Tl=_s.reduce((t,e,r)=>(t[r]=e,t),[]),xl=_s.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Il(t){return t.reduce((e,r)=>(e+=Tl[r],e),"")}function Rl(t){const e=[];for(const r of t){const n=xl[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Al=Lr({prefix:"\u{1F680}",name:"base256emoji",encode:Il,decode:Rl});var Cl=Object.freeze({__proto__:null,base256emoji:Al}),Pl=ps,ys=128,Ll=127,Nl=~Ll,Ul=Math.pow(2,31);function ps(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Ul;)e[r++]=t&255|ys,t/=128;for(;t&Nl;)e[r++]=t&255|ys,t>>>=7;return e[r]=t|0,ps.bytes=r-n+1,e}var Ml=Cn,$l=128,bs=127;function Cn(t,n){var r=0,n=n||0,i=0,s=n,c,u=t.length;do{if(s>=u)throw Cn.bytes=0,new RangeError("Could not decode varint");c=t[s++],r+=i<28?(c&bs)<<i:(c&bs)*Math.pow(2,i),i+=7}while(c>=$l);return Cn.bytes=s-n,r}var jl=Math.pow(2,7),Fl=Math.pow(2,14),Bl=Math.pow(2,21),zl=Math.pow(2,28),Hl=Math.pow(2,35),Kl=Math.pow(2,42),Gl=Math.pow(2,49),Vl=Math.pow(2,56),ql=Math.pow(2,63),Wl=function(t){return t<jl?1:t<Fl?2:t<Bl?3:t<zl?4:t<Hl?5:t<Kl?6:t<Gl?7:t<Vl?8:t<ql?9:10},Yl={encode:Pl,decode:Ml,encodingLength:Wl},vs=Yl;const Es=(t,e,r=0)=>(vs.encode(t,e,r),e),ws=t=>vs.encodingLength(t),Pn=(t,e)=>{const r=e.byteLength,n=ws(t),i=n+ws(r),s=new Uint8Array(i+r);return Es(t,s,0),Es(r,s,n),s.set(e,i),new kl(t,r,e,s)};class kl{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const ms=({name:t,code:e,encode:r})=>new Xl(t,e,r);class Xl{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Pn(this.code,r):r.then(n=>Pn(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Ds=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Jl=ms({name:"sha2-256",code:18,encode:Ds("SHA-256")}),Ql=ms({name:"sha2-512",code:19,encode:Ds("SHA-512")});var Zl=Object.freeze({__proto__:null,sha256:Jl,sha512:Ql});const Ss=0,eh="identity",Os=ds;var th=Object.freeze({__proto__:null,identity:{code:Ss,name:eh,encode:Os,digest:t=>Pn(Ss,Os(t))}});new TextEncoder,new TextDecoder;const Ts={...kf,...Jf,...Zf,...tl,...il,...gl,...pl,...El,...Ol,...Cl};({...Zl,...th});function xs(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Is=xs("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ln=xs("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=hs(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Rs={utf8:Is,"utf-8":Is,hex:Ts.base16,latin1:Ln,ascii:Ln,binary:Ln,...Ts};function rt(t,e="utf8"){const r=Rs[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function nt(t,e="utf8"){const r=Rs[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Rn(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function Nr(t){return rt(nt(Dn(t),Rf),fs)}function As(t){const e=nt(Uf,ls),r=Nf+rt(An([e,t]),ls);return[Pf,Lf,r].join(Cf)}function rh(t){return rt(t,fs)}function nh(t){return nt([Nr(t.header),Nr(t.payload)].join(us),Af)}function ih(t){return[Nr(t.header),Nr(t.payload),rh(t.signature)].join(us)}function Cs(t=qt.randomBytes(Mf)){return Sn.generateKeyPairFromSeed(t)}async function sh(t,e,r,n,i=ce.fromMiliseconds(Date.now())){const s={alg:xf,typ:If},c=As(n.publicKey),u=i+r,l={iss:c,sub:t,aud:e,iat:i,exp:u},f=nh({header:s,payload:l}),_=Sn.sign(n.secretKey,f);return ih({header:s,payload:l,signature:_})}var Nn={},Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});var Ze=re,Un=ot,oh=20;function ah(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,c=1797285236,u=r[3]<<24|r[2]<<16|r[1]<<8|r[0],l=r[7]<<24|r[6]<<16|r[5]<<8|r[4],f=r[11]<<24|r[10]<<16|r[9]<<8|r[8],_=r[15]<<24|r[14]<<16|r[13]<<8|r[12],O=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],v=r[27]<<24|r[26]<<16|r[25]<<8|r[24],A=r[31]<<24|r[30]<<16|r[29]<<8|r[28],C=e[3]<<24|e[2]<<16|e[1]<<8|e[0],U=e[7]<<24|e[6]<<16|e[5]<<8|e[4],Y=e[11]<<24|e[10]<<16|e[9]<<8|e[8],S=e[15]<<24|e[14]<<16|e[13]<<8|e[12],R=n,b=i,E=s,d=c,o=u,h=l,L=f,P=_,H=O,G=p,J=v,D=A,I=C,V=U,F=Y,M=S,j=0;j<oh;j+=2)R=R+o|0,I^=R,I=I>>>32-16|I<<16,H=H+I|0,o^=H,o=o>>>32-12|o<<12,b=b+h|0,V^=b,V=V>>>32-16|V<<16,G=G+V|0,h^=G,h=h>>>32-12|h<<12,E=E+L|0,F^=E,F=F>>>32-16|F<<16,J=J+F|0,L^=J,L=L>>>32-12|L<<12,d=d+P|0,M^=d,M=M>>>32-16|M<<16,D=D+M|0,P^=D,P=P>>>32-12|P<<12,E=E+L|0,F^=E,F=F>>>32-8|F<<8,J=J+F|0,L^=J,L=L>>>32-7|L<<7,d=d+P|0,M^=d,M=M>>>32-8|M<<8,D=D+M|0,P^=D,P=P>>>32-7|P<<7,b=b+h|0,V^=b,V=V>>>32-8|V<<8,G=G+V|0,h^=G,h=h>>>32-7|h<<7,R=R+o|0,I^=R,I=I>>>32-8|I<<8,H=H+I|0,o^=H,o=o>>>32-7|o<<7,R=R+h|0,M^=R,M=M>>>32-16|M<<16,J=J+M|0,h^=J,h=h>>>32-12|h<<12,b=b+L|0,I^=b,I=I>>>32-16|I<<16,D=D+I|0,L^=D,L=L>>>32-12|L<<12,E=E+P|0,V^=E,V=V>>>32-16|V<<16,H=H+V|0,P^=H,P=P>>>32-12|P<<12,d=d+o|0,F^=d,F=F>>>32-16|F<<16,G=G+F|0,o^=G,o=o>>>32-12|o<<12,E=E+P|0,V^=E,V=V>>>32-8|V<<8,H=H+V|0,P^=H,P=P>>>32-7|P<<7,d=d+o|0,F^=d,F=F>>>32-8|F<<8,G=G+F|0,o^=G,o=o>>>32-7|o<<7,b=b+L|0,I^=b,I=I>>>32-8|I<<8,D=D+I|0,L^=D,L=L>>>32-7|L<<7,R=R+h|0,M^=R,M=M>>>32-8|M<<8,J=J+M|0,h^=J,h=h>>>32-7|h<<7;Ze.writeUint32LE(R+n|0,t,0),Ze.writeUint32LE(b+i|0,t,4),Ze.writeUint32LE(E+s|0,t,8),Ze.writeUint32LE(d+c|0,t,12),Ze.writeUint32LE(o+u|0,t,16),Ze.writeUint32LE(h+l|0,t,20),Ze.writeUint32LE(L+f|0,t,24),Ze.writeUint32LE(P+_|0,t,28),Ze.writeUint32LE(H+O|0,t,32),Ze.writeUint32LE(G+p|0,t,36),Ze.writeUint32LE(J+v|0,t,40),Ze.writeUint32LE(D+A|0,t,44),Ze.writeUint32LE(I+C|0,t,48),Ze.writeUint32LE(V+U|0,t,52),Ze.writeUint32LE(F+Y|0,t,56),Ze.writeUint32LE(M+S|0,t,60)}function Ps(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,c;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),c=s.length-e.length,s.set(e,c)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,c=i}for(var u=new Uint8Array(64),l=0;l<r.length;l+=64){ah(u,s,t);for(var f=l;f<l+64&&f<r.length;f++)n[f]=r[f]^u[f-l];uh(s,0,c)}return Un.wipe(u),i===0&&Un.wipe(s),n}Ur.streamXOR=Ps;function ch(t,e,r,n){return n===void 0&&(n=0),Un.wipe(r),Ps(t,e,r,r,n)}Ur.stream=ch;function uh(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var Ls={},Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});function fh(t,e,r){return~(t-1)&e|t-1&r}Tt.select=fh;function lh(t,e){return(t|0)-(e|0)-1>>>31&1}Tt.lessOrEqual=lh;function Ns(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Tt.compare=Ns;function hh(t,e){return t.length===0||e.length===0?!1:Ns(t,e)!==0}Tt.equal=hh,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Tt,r=ot;t.DIGEST_LENGTH=16;var n=function(){function c(u){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var l=u[0]|u[1]<<8;this._r[0]=l&8191;var f=u[2]|u[3]<<8;this._r[1]=(l>>>13|f<<3)&8191;var _=u[4]|u[5]<<8;this._r[2]=(f>>>10|_<<6)&7939;var O=u[6]|u[7]<<8;this._r[3]=(_>>>7|O<<9)&8191;var p=u[8]|u[9]<<8;this._r[4]=(O>>>4|p<<12)&255,this._r[5]=p>>>1&8190;var v=u[10]|u[11]<<8;this._r[6]=(p>>>14|v<<2)&8191;var A=u[12]|u[13]<<8;this._r[7]=(v>>>11|A<<5)&8065;var C=u[14]|u[15]<<8;this._r[8]=(A>>>8|C<<8)&8191,this._r[9]=C>>>5&127,this._pad[0]=u[16]|u[17]<<8,this._pad[1]=u[18]|u[19]<<8,this._pad[2]=u[20]|u[21]<<8,this._pad[3]=u[22]|u[23]<<8,this._pad[4]=u[24]|u[25]<<8,this._pad[5]=u[26]|u[27]<<8,this._pad[6]=u[28]|u[29]<<8,this._pad[7]=u[30]|u[31]<<8}return c.prototype._blocks=function(u,l,f){for(var _=this._fin?0:2048,O=this._h[0],p=this._h[1],v=this._h[2],A=this._h[3],C=this._h[4],U=this._h[5],Y=this._h[6],S=this._h[7],R=this._h[8],b=this._h[9],E=this._r[0],d=this._r[1],o=this._r[2],h=this._r[3],L=this._r[4],P=this._r[5],H=this._r[6],G=this._r[7],J=this._r[8],D=this._r[9];f>=16;){var I=u[l+0]|u[l+1]<<8;O+=I&8191;var V=u[l+2]|u[l+3]<<8;p+=(I>>>13|V<<3)&8191;var F=u[l+4]|u[l+5]<<8;v+=(V>>>10|F<<6)&8191;var M=u[l+6]|u[l+7]<<8;A+=(F>>>7|M<<9)&8191;var j=u[l+8]|u[l+9]<<8;C+=(M>>>4|j<<12)&8191,U+=j>>>1&8191;var N=u[l+10]|u[l+11]<<8;Y+=(j>>>14|N<<2)&8191;var B=u[l+12]|u[l+13]<<8;S+=(N>>>11|B<<5)&8191;var ee=u[l+14]|u[l+15]<<8;R+=(B>>>8|ee<<8)&8191,b+=ee>>>5|_;var z=0,Q=z;Q+=O*E,Q+=p*(5*D),Q+=v*(5*J),Q+=A*(5*G),Q+=C*(5*H),z=Q>>>13,Q&=8191,Q+=U*(5*P),Q+=Y*(5*L),Q+=S*(5*h),Q+=R*(5*o),Q+=b*(5*d),z+=Q>>>13,Q&=8191;var k=z;k+=O*d,k+=p*E,k+=v*(5*D),k+=A*(5*J),k+=C*(5*G),z=k>>>13,k&=8191,k+=U*(5*H),k+=Y*(5*P),k+=S*(5*L),k+=R*(5*h),k+=b*(5*o),z+=k>>>13,k&=8191;var Z=z;Z+=O*o,Z+=p*d,Z+=v*E,Z+=A*(5*D),Z+=C*(5*J),z=Z>>>13,Z&=8191,Z+=U*(5*G),Z+=Y*(5*H),Z+=S*(5*P),Z+=R*(5*L),Z+=b*(5*h),z+=Z>>>13,Z&=8191;var x=z;x+=O*h,x+=p*o,x+=v*d,x+=A*E,x+=C*(5*D),z=x>>>13,x&=8191,x+=U*(5*J),x+=Y*(5*G),x+=S*(5*H),x+=R*(5*P),x+=b*(5*L),z+=x>>>13,x&=8191;var T=z;T+=O*L,T+=p*h,T+=v*o,T+=A*d,T+=C*E,z=T>>>13,T&=8191,T+=U*(5*D),T+=Y*(5*J),T+=S*(5*G),T+=R*(5*H),T+=b*(5*P),z+=T>>>13,T&=8191;var w=z;w+=O*P,w+=p*L,w+=v*h,w+=A*o,w+=C*d,z=w>>>13,w&=8191,w+=U*E,w+=Y*(5*D),w+=S*(5*J),w+=R*(5*G),w+=b*(5*H),z+=w>>>13,w&=8191;var a=z;a+=O*H,a+=p*P,a+=v*L,a+=A*h,a+=C*o,z=a>>>13,a&=8191,a+=U*d,a+=Y*E,a+=S*(5*D),a+=R*(5*J),a+=b*(5*G),z+=a>>>13,a&=8191;var y=z;y+=O*G,y+=p*H,y+=v*P,y+=A*L,y+=C*h,z=y>>>13,y&=8191,y+=U*o,y+=Y*d,y+=S*E,y+=R*(5*D),y+=b*(5*J),z+=y>>>13,y&=8191;var K=z;K+=O*J,K+=p*G,K+=v*H,K+=A*P,K+=C*L,z=K>>>13,K&=8191,K+=U*h,K+=Y*o,K+=S*d,K+=R*E,K+=b*(5*D),z+=K>>>13,K&=8191;var q=z;q+=O*D,q+=p*J,q+=v*G,q+=A*H,q+=C*P,z=q>>>13,q&=8191,q+=U*L,q+=Y*h,q+=S*o,q+=R*d,q+=b*E,z+=q>>>13,q&=8191,z=(z<<2)+z|0,z=z+Q|0,Q=z&8191,z=z>>>13,k+=z,O=Q,p=k,v=Z,A=x,C=T,U=w,Y=a,S=y,R=K,b=q,l+=16,f-=16}this._h[0]=O,this._h[1]=p,this._h[2]=v,this._h[3]=A,this._h[4]=C,this._h[5]=U,this._h[6]=Y,this._h[7]=S,this._h[8]=R,this._h[9]=b},c.prototype.finish=function(u,l){l===void 0&&(l=0);var f=new Uint16Array(10),_,O,p,v;if(this._leftover){for(v=this._leftover,this._buffer[v++]=1;v<16;v++)this._buffer[v]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(_=this._h[1]>>>13,this._h[1]&=8191,v=2;v<10;v++)this._h[v]+=_,_=this._h[v]>>>13,this._h[v]&=8191;for(this._h[0]+=_*5,_=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=_,_=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=_,f[0]=this._h[0]+5,_=f[0]>>>13,f[0]&=8191,v=1;v<10;v++)f[v]=this._h[v]+_,_=f[v]>>>13,f[v]&=8191;for(f[9]-=8192,O=(_^1)-1,v=0;v<10;v++)f[v]&=O;for(O=~O,v=0;v<10;v++)this._h[v]=this._h[v]&O|f[v];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,p=this._h[0]+this._pad[0],this._h[0]=p&65535,v=1;v<8;v++)p=(this._h[v]+this._pad[v]|0)+(p>>>16)|0,this._h[v]=p&65535;return u[l+0]=this._h[0]>>>0,u[l+1]=this._h[0]>>>8,u[l+2]=this._h[1]>>>0,u[l+3]=this._h[1]>>>8,u[l+4]=this._h[2]>>>0,u[l+5]=this._h[2]>>>8,u[l+6]=this._h[3]>>>0,u[l+7]=this._h[3]>>>8,u[l+8]=this._h[4]>>>0,u[l+9]=this._h[4]>>>8,u[l+10]=this._h[5]>>>0,u[l+11]=this._h[5]>>>8,u[l+12]=this._h[6]>>>0,u[l+13]=this._h[6]>>>8,u[l+14]=this._h[7]>>>0,u[l+15]=this._h[7]>>>8,this._finished=!0,this},c.prototype.update=function(u){var l=0,f=u.length,_;if(this._leftover){_=16-this._leftover,_>f&&(_=f);for(var O=0;O<_;O++)this._buffer[this._leftover+O]=u[l+O];if(f-=_,l+=_,this._leftover+=_,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(f>=16&&(_=f-f%16,this._blocks(u,l,_),l+=_,f-=_),f){for(var O=0;O<f;O++)this._buffer[this._leftover+O]=u[l+O];this._leftover+=f}return this},c.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var u=new Uint8Array(16);return this.finish(u),u},c.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},c}();t.Poly1305=n;function i(c,u){var l=new n(c);l.update(u);var f=l.digest();return l.clean(),f}t.oneTimeAuth=i;function s(c,u){return c.length!==t.DIGEST_LENGTH||u.length!==t.DIGEST_LENGTH?!1:e.equal(c,u)}t.equal=s}(Ls),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Ur,r=Ls,n=ot,i=re,s=Tt;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var c=new Uint8Array(16),u=function(){function l(f){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,f.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(f)}return l.prototype.seal=function(f,_,O,p){if(f.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var v=new Uint8Array(16);v.set(f,v.length-f.length);var A=new Uint8Array(32);e.stream(this._key,v,A,4);var C=_.length+this.tagLength,U;if(p){if(p.length!==C)throw new Error("ChaCha20Poly1305: incorrect destination length");U=p}else U=new Uint8Array(C);return e.streamXOR(this._key,v,_,U,4),this._authenticate(U.subarray(U.length-this.tagLength,U.length),A,U.subarray(0,U.length-this.tagLength),O),n.wipe(v),U},l.prototype.open=function(f,_,O,p){if(f.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(_.length<this.tagLength)return null;var v=new Uint8Array(16);v.set(f,v.length-f.length);var A=new Uint8Array(32);e.stream(this._key,v,A,4);var C=new Uint8Array(this.tagLength);if(this._authenticate(C,A,_.subarray(0,_.length-this.tagLength),O),!s.equal(C,_.subarray(_.length-this.tagLength,_.length)))return null;var U=_.length-this.tagLength,Y;if(p){if(p.length!==U)throw new Error("ChaCha20Poly1305: incorrect destination length");Y=p}else Y=new Uint8Array(U);return e.streamXOR(this._key,v,_.subarray(0,_.length-this.tagLength),Y,4),n.wipe(v),Y},l.prototype.clean=function(){return n.wipe(this._key),this},l.prototype._authenticate=function(f,_,O,p){var v=new r.Poly1305(_);p&&(v.update(p),p.length%16>0&&v.update(c.subarray(p.length%16))),v.update(O),O.length%16>0&&v.update(c.subarray(O.length%16));var A=new Uint8Array(8);p&&i.writeUint64LE(p.length,A),v.update(A),i.writeUint64LE(O.length,A),v.update(A);for(var C=v.digest(),U=0;U<C.length;U++)f[U]=C[U];v.clean(),n.wipe(C),n.wipe(A)},l}();t.ChaCha20Poly1305=u}(Nn);var Us={},fr={},Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});function dh(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}Mn.isSerializableHash=dh,Object.defineProperty(fr,"__esModule",{value:!0});var bt=Mn,gh=Tt,_h=ot,Ms=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),bt.isSerializableHash(this._inner)&&bt.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),_h.wipe(n)}return t.prototype.reset=function(){if(!bt.isSerializableHash(this._inner)||!bt.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){bt.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),bt.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!bt.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!bt.isSerializableHash(this._inner)||!bt.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!bt.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();fr.HMAC=Ms;function yh(t,e,r){var n=new Ms(t,e);n.update(r);var i=n.digest();return n.clean(),i}fr.hmac=yh,fr.equal=gh.equal,Object.defineProperty(Us,"__esModule",{value:!0});var $s=fr,js=ot,ph=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=$s.hmac(this._hash,n,r);this._hmac=new $s.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),js.wipe(this._buffer),js.wipe(this._counter),this._bufpos=0},t}(),bh=Us.HKDF=ph,Mr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=re,r=ot;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function u(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return u.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},u.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},u.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},u.prototype.update=function(l,f){if(f===void 0&&(f=l.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var _=0;if(this._bytesHashed+=f,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&f>0;)this._buffer[this._bufferLength++]=l[_++],f--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(f>=this.blockSize&&(_=s(this._temp,this._state,l,_,f),f%=this.blockSize);f>0;)this._buffer[this._bufferLength++]=l[_++],f--;return this},u.prototype.finish=function(l){if(!this._finished){var f=this._bytesHashed,_=this._bufferLength,O=f/536870912|0,p=f<<3,v=f%64<56?64:128;this._buffer[_]=128;for(var A=_+1;A<v-8;A++)this._buffer[A]=0;e.writeUint32BE(O,this._buffer,v-8),e.writeUint32BE(p,this._buffer,v-4),s(this._temp,this._state,this._buffer,0,v),this._finished=!0}for(var A=0;A<this.digestLength/4;A++)e.writeUint32BE(this._state[A],l,A*4);return this},u.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},u.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},u.prototype.restoreState=function(l){return this._state.set(l.state),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},u.prototype.cleanSavedState=function(l){r.wipe(l.state),l.buffer&&r.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},u}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(u,l,f,_,O){for(;O>=64;){for(var p=l[0],v=l[1],A=l[2],C=l[3],U=l[4],Y=l[5],S=l[6],R=l[7],b=0;b<16;b++){var E=_+b*4;u[b]=e.readUint32BE(f,E)}for(var b=16;b<64;b++){var d=u[b-2],o=(d>>>17|d<<32-17)^(d>>>19|d<<32-19)^d>>>10;d=u[b-15];var h=(d>>>7|d<<32-7)^(d>>>18|d<<32-18)^d>>>3;u[b]=(o+u[b-7]|0)+(h+u[b-16]|0)}for(var b=0;b<64;b++){var o=(((U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7))+(U&Y^~U&S)|0)+(R+(i[b]+u[b]|0)|0)|0,h=((p>>>2|p<<32-2)^(p>>>13|p<<32-13)^(p>>>22|p<<32-22))+(p&v^p&A^v&A)|0;R=S,S=Y,Y=U,U=C+o|0,C=A,A=v,v=p,p=o+h|0}l[0]+=p,l[1]+=v,l[2]+=A,l[3]+=C,l[4]+=U,l[5]+=Y,l[6]+=S,l[7]+=R,_+=64,O-=64}return _}function c(u){var l=new n;l.update(u);var f=l.digest();return l.clean(),f}t.hash=c})(Mr);var $n={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=qt,r=ot;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(b){const E=new Float64Array(16);if(b)for(let d=0;d<b.length;d++)E[d]=b[d];return E}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function c(b){let E=1;for(let d=0;d<16;d++){let o=b[d]+E+65535;E=Math.floor(o/65536),b[d]=o-E*65536}b[0]+=E-1+37*(E-1)}function u(b,E,d){const o=~(d-1);for(let h=0;h<16;h++){const L=o&(b[h]^E[h]);b[h]^=L,E[h]^=L}}function l(b,E){const d=n(),o=n();for(let h=0;h<16;h++)o[h]=E[h];c(o),c(o),c(o);for(let h=0;h<2;h++){d[0]=o[0]-65517;for(let P=1;P<15;P++)d[P]=o[P]-65535-(d[P-1]>>16&1),d[P-1]&=65535;d[15]=o[15]-32767-(d[14]>>16&1);const L=d[15]>>16&1;d[14]&=65535,u(o,d,1-L)}for(let h=0;h<16;h++)b[2*h]=o[h]&255,b[2*h+1]=o[h]>>8}function f(b,E){for(let d=0;d<16;d++)b[d]=E[2*d]+(E[2*d+1]<<8);b[15]&=32767}function _(b,E,d){for(let o=0;o<16;o++)b[o]=E[o]+d[o]}function O(b,E,d){for(let o=0;o<16;o++)b[o]=E[o]-d[o]}function p(b,E,d){let o,h,L=0,P=0,H=0,G=0,J=0,D=0,I=0,V=0,F=0,M=0,j=0,N=0,B=0,ee=0,z=0,Q=0,k=0,Z=0,x=0,T=0,w=0,a=0,y=0,K=0,q=0,le=0,pe=0,de=0,Ee=0,Ue=0,Ce=0,ye=d[0],ge=d[1],he=d[2],ue=d[3],ae=d[4],oe=d[5],se=d[6],te=d[7],fe=d[8],_e=d[9],ne=d[10],be=d[11],ve=d[12],me=d[13],De=d[14],we=d[15];o=E[0],L+=o*ye,P+=o*ge,H+=o*he,G+=o*ue,J+=o*ae,D+=o*oe,I+=o*se,V+=o*te,F+=o*fe,M+=o*_e,j+=o*ne,N+=o*be,B+=o*ve,ee+=o*me,z+=o*De,Q+=o*we,o=E[1],P+=o*ye,H+=o*ge,G+=o*he,J+=o*ue,D+=o*ae,I+=o*oe,V+=o*se,F+=o*te,M+=o*fe,j+=o*_e,N+=o*ne,B+=o*be,ee+=o*ve,z+=o*me,Q+=o*De,k+=o*we,o=E[2],H+=o*ye,G+=o*ge,J+=o*he,D+=o*ue,I+=o*ae,V+=o*oe,F+=o*se,M+=o*te,j+=o*fe,N+=o*_e,B+=o*ne,ee+=o*be,z+=o*ve,Q+=o*me,k+=o*De,Z+=o*we,o=E[3],G+=o*ye,J+=o*ge,D+=o*he,I+=o*ue,V+=o*ae,F+=o*oe,M+=o*se,j+=o*te,N+=o*fe,B+=o*_e,ee+=o*ne,z+=o*be,Q+=o*ve,k+=o*me,Z+=o*De,x+=o*we,o=E[4],J+=o*ye,D+=o*ge,I+=o*he,V+=o*ue,F+=o*ae,M+=o*oe,j+=o*se,N+=o*te,B+=o*fe,ee+=o*_e,z+=o*ne,Q+=o*be,k+=o*ve,Z+=o*me,x+=o*De,T+=o*we,o=E[5],D+=o*ye,I+=o*ge,V+=o*he,F+=o*ue,M+=o*ae,j+=o*oe,N+=o*se,B+=o*te,ee+=o*fe,z+=o*_e,Q+=o*ne,k+=o*be,Z+=o*ve,x+=o*me,T+=o*De,w+=o*we,o=E[6],I+=o*ye,V+=o*ge,F+=o*he,M+=o*ue,j+=o*ae,N+=o*oe,B+=o*se,ee+=o*te,z+=o*fe,Q+=o*_e,k+=o*ne,Z+=o*be,x+=o*ve,T+=o*me,w+=o*De,a+=o*we,o=E[7],V+=o*ye,F+=o*ge,M+=o*he,j+=o*ue,N+=o*ae,B+=o*oe,ee+=o*se,z+=o*te,Q+=o*fe,k+=o*_e,Z+=o*ne,x+=o*be,T+=o*ve,w+=o*me,a+=o*De,y+=o*we,o=E[8],F+=o*ye,M+=o*ge,j+=o*he,N+=o*ue,B+=o*ae,ee+=o*oe,z+=o*se,Q+=o*te,k+=o*fe,Z+=o*_e,x+=o*ne,T+=o*be,w+=o*ve,a+=o*me,y+=o*De,K+=o*we,o=E[9],M+=o*ye,j+=o*ge,N+=o*he,B+=o*ue,ee+=o*ae,z+=o*oe,Q+=o*se,k+=o*te,Z+=o*fe,x+=o*_e,T+=o*ne,w+=o*be,a+=o*ve,y+=o*me,K+=o*De,q+=o*we,o=E[10],j+=o*ye,N+=o*ge,B+=o*he,ee+=o*ue,z+=o*ae,Q+=o*oe,k+=o*se,Z+=o*te,x+=o*fe,T+=o*_e,w+=o*ne,a+=o*be,y+=o*ve,K+=o*me,q+=o*De,le+=o*we,o=E[11],N+=o*ye,B+=o*ge,ee+=o*he,z+=o*ue,Q+=o*ae,k+=o*oe,Z+=o*se,x+=o*te,T+=o*fe,w+=o*_e,a+=o*ne,y+=o*be,K+=o*ve,q+=o*me,le+=o*De,pe+=o*we,o=E[12],B+=o*ye,ee+=o*ge,z+=o*he,Q+=o*ue,k+=o*ae,Z+=o*oe,x+=o*se,T+=o*te,w+=o*fe,a+=o*_e,y+=o*ne,K+=o*be,q+=o*ve,le+=o*me,pe+=o*De,de+=o*we,o=E[13],ee+=o*ye,z+=o*ge,Q+=o*he,k+=o*ue,Z+=o*ae,x+=o*oe,T+=o*se,w+=o*te,a+=o*fe,y+=o*_e,K+=o*ne,q+=o*be,le+=o*ve,pe+=o*me,de+=o*De,Ee+=o*we,o=E[14],z+=o*ye,Q+=o*ge,k+=o*he,Z+=o*ue,x+=o*ae,T+=o*oe,w+=o*se,a+=o*te,y+=o*fe,K+=o*_e,q+=o*ne,le+=o*be,pe+=o*ve,de+=o*me,Ee+=o*De,Ue+=o*we,o=E[15],Q+=o*ye,k+=o*ge,Z+=o*he,x+=o*ue,T+=o*ae,w+=o*oe,a+=o*se,y+=o*te,K+=o*fe,q+=o*_e,le+=o*ne,pe+=o*be,de+=o*ve,Ee+=o*me,Ue+=o*De,Ce+=o*we,L+=38*k,P+=38*Z,H+=38*x,G+=38*T,J+=38*w,D+=38*a,I+=38*y,V+=38*K,F+=38*q,M+=38*le,j+=38*pe,N+=38*de,B+=38*Ee,ee+=38*Ue,z+=38*Ce,h=1,o=L+h+65535,h=Math.floor(o/65536),L=o-h*65536,o=P+h+65535,h=Math.floor(o/65536),P=o-h*65536,o=H+h+65535,h=Math.floor(o/65536),H=o-h*65536,o=G+h+65535,h=Math.floor(o/65536),G=o-h*65536,o=J+h+65535,h=Math.floor(o/65536),J=o-h*65536,o=D+h+65535,h=Math.floor(o/65536),D=o-h*65536,o=I+h+65535,h=Math.floor(o/65536),I=o-h*65536,o=V+h+65535,h=Math.floor(o/65536),V=o-h*65536,o=F+h+65535,h=Math.floor(o/65536),F=o-h*65536,o=M+h+65535,h=Math.floor(o/65536),M=o-h*65536,o=j+h+65535,h=Math.floor(o/65536),j=o-h*65536,o=N+h+65535,h=Math.floor(o/65536),N=o-h*65536,o=B+h+65535,h=Math.floor(o/65536),B=o-h*65536,o=ee+h+65535,h=Math.floor(o/65536),ee=o-h*65536,o=z+h+65535,h=Math.floor(o/65536),z=o-h*65536,o=Q+h+65535,h=Math.floor(o/65536),Q=o-h*65536,L+=h-1+37*(h-1),h=1,o=L+h+65535,h=Math.floor(o/65536),L=o-h*65536,o=P+h+65535,h=Math.floor(o/65536),P=o-h*65536,o=H+h+65535,h=Math.floor(o/65536),H=o-h*65536,o=G+h+65535,h=Math.floor(o/65536),G=o-h*65536,o=J+h+65535,h=Math.floor(o/65536),J=o-h*65536,o=D+h+65535,h=Math.floor(o/65536),D=o-h*65536,o=I+h+65535,h=Math.floor(o/65536),I=o-h*65536,o=V+h+65535,h=Math.floor(o/65536),V=o-h*65536,o=F+h+65535,h=Math.floor(o/65536),F=o-h*65536,o=M+h+65535,h=Math.floor(o/65536),M=o-h*65536,o=j+h+65535,h=Math.floor(o/65536),j=o-h*65536,o=N+h+65535,h=Math.floor(o/65536),N=o-h*65536,o=B+h+65535,h=Math.floor(o/65536),B=o-h*65536,o=ee+h+65535,h=Math.floor(o/65536),ee=o-h*65536,o=z+h+65535,h=Math.floor(o/65536),z=o-h*65536,o=Q+h+65535,h=Math.floor(o/65536),Q=o-h*65536,L+=h-1+37*(h-1),b[0]=L,b[1]=P,b[2]=H,b[3]=G,b[4]=J,b[5]=D,b[6]=I,b[7]=V,b[8]=F,b[9]=M,b[10]=j,b[11]=N,b[12]=B,b[13]=ee,b[14]=z,b[15]=Q}function v(b,E){p(b,E,E)}function A(b,E){const d=n();for(let o=0;o<16;o++)d[o]=E[o];for(let o=253;o>=0;o--)v(d,d),o!==2&&o!==4&&p(d,d,E);for(let o=0;o<16;o++)b[o]=d[o]}function C(b,E){const d=new Uint8Array(32),o=new Float64Array(80),h=n(),L=n(),P=n(),H=n(),G=n(),J=n();for(let F=0;F<31;F++)d[F]=b[F];d[31]=b[31]&127|64,d[0]&=248,f(o,E);for(let F=0;F<16;F++)L[F]=o[F];h[0]=H[0]=1;for(let F=254;F>=0;--F){const M=d[F>>>3]>>>(F&7)&1;u(h,L,M),u(P,H,M),_(G,h,P),O(h,h,P),_(P,L,H),O(L,L,H),v(H,G),v(J,h),p(h,P,h),p(P,L,G),_(G,h,P),O(h,h,P),v(L,h),O(P,H,J),p(h,P,s),_(h,h,H),p(P,P,h),p(h,H,J),p(H,L,o),v(L,G),u(h,L,M),u(P,H,M)}for(let F=0;F<16;F++)o[F+16]=h[F],o[F+32]=P[F],o[F+48]=L[F],o[F+64]=H[F];const D=o.subarray(32),I=o.subarray(16);A(D,D),p(I,I,D);const V=new Uint8Array(32);return l(V,I),V}t.scalarMult=C;function U(b){return C(b,i)}t.scalarMultBase=U;function Y(b){if(b.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const E=new Uint8Array(b);return{publicKey:U(E),secretKey:E}}t.generateKeyPairFromSeed=Y;function S(b){const E=(0,e.randomBytes)(32,b),d=Y(E);return(0,r.wipe)(E),d}t.generateKeyPair=S;function R(b,E,d=!1){if(b.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(E.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const o=C(b,E);if(d){let h=0;for(let L=0;L<o.length;L++)h|=o[L];if(h===0)throw new Error("X25519: invalid shared key")}return o}t.sharedKey=R})($n);var Fs=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},vh=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),Eh=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),wh=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),mh=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Dh=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Sh=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Oh=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Bs=3,Th=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Sh]],zs=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function xh(t){return t?Hs(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Dh:typeof navigator<"u"?Hs(navigator.userAgent):Ah()}function Ih(t){return t!==""&&Th.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function Hs(t){var e=Ih(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new mh;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Bs&&(i=Fs(Fs([],i,!0),Ch(Bs-i.length),!0)):i=[];var s=i.join("."),c=Rh(t),u=Oh.exec(t);return u&&u[1]?new wh(r,s,c,u[1]):new vh(r,s,c)}function Rh(t){for(var e=0,r=zs.length;e<r;e++){var n=zs[e],i=n[0],s=n[1],c=s.exec(t);if(c)return i}return null}function Ah(){var t=typeof process<"u"&&process.version;return t?new Eh(process.version.slice(1)):null}function Ch(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Te={};Object.defineProperty(Te,"__esModule",{value:!0}),Te.getLocalStorage=Te.getLocalStorageOrThrow=Te.getCrypto=Te.getCryptoOrThrow=Gs=Te.getLocation=Te.getLocationOrThrow=jn=Te.getNavigator=Te.getNavigatorOrThrow=Ks=Te.getDocument=Te.getDocumentOrThrow=Te.getFromWindowOrThrow=Te.getFromWindow=void 0;function $t(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Te.getFromWindow=$t;function Wt(t){const e=$t(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Te.getFromWindowOrThrow=Wt;function Ph(){return Wt("document")}Te.getDocumentOrThrow=Ph;function Lh(){return $t("document")}var Ks=Te.getDocument=Lh;function Nh(){return Wt("navigator")}Te.getNavigatorOrThrow=Nh;function Uh(){return $t("navigator")}var jn=Te.getNavigator=Uh;function Mh(){return Wt("location")}Te.getLocationOrThrow=Mh;function $h(){return $t("location")}var Gs=Te.getLocation=$h;function jh(){return Wt("crypto")}Te.getCryptoOrThrow=jh;function Fh(){return $t("crypto")}Te.getCrypto=Fh;function Bh(){return Wt("localStorage")}Te.getLocalStorageOrThrow=Bh;function zh(){return $t("localStorage")}Te.getLocalStorage=zh;var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.getWindowMetadata=void 0;const Vs=Te;function Hh(){let t,e;try{t=Vs.getDocumentOrThrow(),e=Vs.getLocationOrThrow()}catch{return null}function r(){const O=t.getElementsByTagName("link"),p=[];for(let v=0;v<O.length;v++){const A=O[v],C=A.getAttribute("rel");if(C&&C.toLowerCase().indexOf("icon")>-1){const U=A.getAttribute("href");if(U)if(U.toLowerCase().indexOf("https:")===-1&&U.toLowerCase().indexOf("http:")===-1&&U.indexOf("//")!==0){let Y=e.protocol+"//"+e.host;if(U.indexOf("/")===0)Y+=U;else{const S=e.pathname.split("/");S.pop();const R=S.join("/");Y+=R+"/"+U}p.push(Y)}else if(U.indexOf("//")===0){const Y=e.protocol+U;p.push(Y)}else p.push(U)}}return p}function n(...O){const p=t.getElementsByTagName("meta");for(let v=0;v<p.length;v++){const A=p[v],C=["itemprop","property","name"].map(U=>A.getAttribute(U)).filter(U=>U?O.includes(U):!1);if(C.length&&C){const U=A.getAttribute("content");if(U)return U}}return""}function i(){let O=n("name","og:site_name","og:title","twitter:title");return O||(O=t.title),O}function s(){return n("description","og:description","twitter:description","keywords")}const c=i(),u=s(),l=e.origin,f=r();return{description:u,url:l,icons:f,name:c}}Fn.getWindowMetadata=Hh;var lr={},Kh=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),qs="%[a-f0-9]{2}",Ws=new RegExp("("+qs+")|([^%]+?)","gi"),Ys=new RegExp("("+qs+")+","gi");function Bn(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],Bn(r),Bn(n))}function Gh(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(Ws)||[],r=1;r<e.length;r++)t=Bn(e,r).join(""),e=t.match(Ws)||[];return t}}function Vh(t){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=Ys.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=Gh(r[0]);n!==r[0]&&(e[r[0]]=n)}r=Ys.exec(t)}e["%C2"]="\uFFFD";for(var i=Object.keys(e),s=0;s<i.length;s++){var c=i[s];t=t.replace(new RegExp(c,"g"),e[c])}return t}var qh=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return Vh(t)}},Wh=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},Yh=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var c=n[s],u=t[c];(i?e.indexOf(c)!==-1:e(c,u,t))&&(r[c]=u)}return r};(function(t){const e=Kh,r=qh,n=Wh,i=Yh,s=S=>S==null,c=Symbol("encodeFragmentIdentifier");function u(S){switch(S.arrayFormat){case"index":return R=>(b,E)=>{const d=b.length;return E===void 0||S.skipNull&&E===null||S.skipEmptyString&&E===""?b:E===null?[...b,[_(R,S),"[",d,"]"].join("")]:[...b,[_(R,S),"[",_(d,S),"]=",_(E,S)].join("")]};case"bracket":return R=>(b,E)=>E===void 0||S.skipNull&&E===null||S.skipEmptyString&&E===""?b:E===null?[...b,[_(R,S),"[]"].join("")]:[...b,[_(R,S),"[]=",_(E,S)].join("")];case"colon-list-separator":return R=>(b,E)=>E===void 0||S.skipNull&&E===null||S.skipEmptyString&&E===""?b:E===null?[...b,[_(R,S),":list="].join("")]:[...b,[_(R,S),":list=",_(E,S)].join("")];case"comma":case"separator":case"bracket-separator":{const R=S.arrayFormat==="bracket-separator"?"[]=":"=";return b=>(E,d)=>d===void 0||S.skipNull&&d===null||S.skipEmptyString&&d===""?E:(d=d===null?"":d,E.length===0?[[_(b,S),R,_(d,S)].join("")]:[[E,_(d,S)].join(S.arrayFormatSeparator)])}default:return R=>(b,E)=>E===void 0||S.skipNull&&E===null||S.skipEmptyString&&E===""?b:E===null?[...b,_(R,S)]:[...b,[_(R,S),"=",_(E,S)].join("")]}}function l(S){let R;switch(S.arrayFormat){case"index":return(b,E,d)=>{if(R=/\[(\d*)\]$/.exec(b),b=b.replace(/\[\d*\]$/,""),!R){d[b]=E;return}d[b]===void 0&&(d[b]={}),d[b][R[1]]=E};case"bracket":return(b,E,d)=>{if(R=/(\[\])$/.exec(b),b=b.replace(/\[\]$/,""),!R){d[b]=E;return}if(d[b]===void 0){d[b]=[E];return}d[b]=[].concat(d[b],E)};case"colon-list-separator":return(b,E,d)=>{if(R=/(:list)$/.exec(b),b=b.replace(/:list$/,""),!R){d[b]=E;return}if(d[b]===void 0){d[b]=[E];return}d[b]=[].concat(d[b],E)};case"comma":case"separator":return(b,E,d)=>{const o=typeof E=="string"&&E.includes(S.arrayFormatSeparator),h=typeof E=="string"&&!o&&O(E,S).includes(S.arrayFormatSeparator);E=h?O(E,S):E;const L=o||h?E.split(S.arrayFormatSeparator).map(P=>O(P,S)):E===null?E:O(E,S);d[b]=L};case"bracket-separator":return(b,E,d)=>{const o=/(\[\])$/.test(b);if(b=b.replace(/\[\]$/,""),!o){d[b]=E&&O(E,S);return}const h=E===null?[]:E.split(S.arrayFormatSeparator).map(L=>O(L,S));if(d[b]===void 0){d[b]=h;return}d[b]=[].concat(d[b],h)};default:return(b,E,d)=>{if(d[b]===void 0){d[b]=E;return}d[b]=[].concat(d[b],E)}}}function f(S){if(typeof S!="string"||S.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function _(S,R){return R.encode?R.strict?e(S):encodeURIComponent(S):S}function O(S,R){return R.decode?r(S):S}function p(S){return Array.isArray(S)?S.sort():typeof S=="object"?p(Object.keys(S)).sort((R,b)=>Number(R)-Number(b)).map(R=>S[R]):S}function v(S){const R=S.indexOf("#");return R!==-1&&(S=S.slice(0,R)),S}function A(S){let R="";const b=S.indexOf("#");return b!==-1&&(R=S.slice(b)),R}function C(S){S=v(S);const R=S.indexOf("?");return R===-1?"":S.slice(R+1)}function U(S,R){return R.parseNumbers&&!Number.isNaN(Number(S))&&typeof S=="string"&&S.trim()!==""?S=Number(S):R.parseBooleans&&S!==null&&(S.toLowerCase()==="true"||S.toLowerCase()==="false")&&(S=S.toLowerCase()==="true"),S}function Y(S,R){R=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},R),f(R.arrayFormatSeparator);const b=l(R),E=Object.create(null);if(typeof S!="string"||(S=S.trim().replace(/^[?#&]/,""),!S))return E;for(const d of S.split("&")){if(d==="")continue;let[o,h]=n(R.decode?d.replace(/\+/g," "):d,"=");h=h===void 0?null:["comma","separator","bracket-separator"].includes(R.arrayFormat)?h:O(h,R),b(O(o,R),h,E)}for(const d of Object.keys(E)){const o=E[d];if(typeof o=="object"&&o!==null)for(const h of Object.keys(o))o[h]=U(o[h],R);else E[d]=U(o,R)}return R.sort===!1?E:(R.sort===!0?Object.keys(E).sort():Object.keys(E).sort(R.sort)).reduce((d,o)=>{const h=E[o];return h&&typeof h=="object"&&!Array.isArray(h)?d[o]=p(h):d[o]=h,d},Object.create(null))}t.extract=C,t.parse=Y,t.stringify=(S,R)=>{if(!S)return"";R=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},R),f(R.arrayFormatSeparator);const b=h=>R.skipNull&&s(S[h])||R.skipEmptyString&&S[h]==="",E=u(R),d={};for(const h of Object.keys(S))b(h)||(d[h]=S[h]);const o=Object.keys(d);return R.sort!==!1&&o.sort(R.sort),o.map(h=>{const L=S[h];return L===void 0?"":L===null?_(h,R):Array.isArray(L)?L.length===0&&R.arrayFormat==="bracket-separator"?_(h,R)+"[]":L.reduce(E(h),[]).join("&"):_(h,R)+"="+_(L,R)}).filter(h=>h.length>0).join("&")},t.parseUrl=(S,R)=>{R=Object.assign({decode:!0},R);const[b,E]=n(S,"#");return Object.assign({url:b.split("?")[0]||"",query:Y(C(S),R)},R&&R.parseFragmentIdentifier&&E?{fragmentIdentifier:O(E,R)}:{})},t.stringifyUrl=(S,R)=>{R=Object.assign({encode:!0,strict:!0,[c]:!0},R);const b=v(S.url).split("?")[0]||"",E=t.extract(S.url),d=t.parse(E,{sort:!1}),o=Object.assign(d,S.query);let h=t.stringify(o,R);h&&(h=`?${h}`);let L=A(S.url);return S.fragmentIdentifier&&(L=`#${R[c]?_(S.fragmentIdentifier,R):S.fragmentIdentifier}`),`${b}${h}${L}`},t.pick=(S,R,b)=>{b=Object.assign({parseFragmentIdentifier:!0,[c]:!1},b);const{url:E,query:d,fragmentIdentifier:o}=t.parseUrl(S,b);return t.stringifyUrl({url:E,query:i(d,R),fragmentIdentifier:o},b)},t.exclude=(S,R,b)=>{const E=Array.isArray(R)?d=>!R.includes(d):(d,o)=>!R(d,o);return t.pick(S,E,b)}})(lr);const kh={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}},ks="base10",it="base16",zn="base64pad",Hn="utf8",Xs=0,Yt=1,Xh=0,Js=1,Kn=12,Gn=32;function Jh(){const t=$n.generateKeyPair();return{privateKey:rt(t.secretKey,it),publicKey:rt(t.publicKey,it)}}function Vn(){const t=qt.randomBytes(Gn);return rt(t,it)}function Qh(t,e){const r=$n.sharedKey(nt(t,it),nt(e,it),!0),n=new bh(Mr.SHA256,r).expand(Gn);return rt(n,it)}function Zh(t){const e=Mr.hash(nt(t,it));return rt(e,it)}function qn(t){const e=Mr.hash(nt(t,Hn));return rt(e,it)}function ed(t){return nt(`${t}`,ks)}function hr(t){return Number(rt(t,ks))}function td(t){const e=ed(typeof t.type<"u"?t.type:Xs);if(hr(e)===Yt&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?nt(t.senderPublicKey,it):void 0,n=typeof t.iv<"u"?nt(t.iv,it):qt.randomBytes(Kn),i=new Nn.ChaCha20Poly1305(nt(t.symKey,it)).seal(n,nt(t.message,Hn));return nd({type:e,sealed:i,iv:n,senderPublicKey:r})}function rd(t){const e=new Nn.ChaCha20Poly1305(nt(t.symKey,it)),{sealed:r,iv:n}=$r(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return rt(i,Hn)}function nd(t){if(hr(t.type)===Yt){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return rt(An([t.type,t.senderPublicKey,t.iv,t.sealed]),zn)}return rt(An([t.type,t.iv,t.sealed]),zn)}function $r(t){const e=nt(t,zn),r=e.slice(Xh,Js),n=Js;if(hr(r)===Yt){const u=n+Gn,l=u+Kn,f=e.slice(n,u),_=e.slice(u,l),O=e.slice(l);return{type:r,sealed:O,iv:_,senderPublicKey:f}}const i=n+Kn,s=e.slice(n,i),c=e.slice(i);return{type:r,sealed:c,iv:s}}function id(t,e){const r=$r(t);return Qs({type:hr(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?rt(r.senderPublicKey,it):void 0,receiverPublicKey:e?.receiverPublicKey})}function Qs(t){const e=t?.type||Xs;if(e===Yt){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function Zs(t){return t.type===Yt&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var sd=Object.defineProperty,eo=Object.getOwnPropertySymbols,od=Object.prototype.hasOwnProperty,ad=Object.prototype.propertyIsEnumerable,to=(t,e,r)=>e in t?sd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ro=(t,e)=>{for(var r in e||(e={}))od.call(e,r)&&to(t,r,e[r]);if(eo)for(var r of eo(e))ad.call(e,r)&&to(t,r,e[r]);return t};const cd="ReactNative",gt={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},ud="js";function Wn(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function dr(){return!Ks()&&!!jn()&&navigator.product===cd}function jr(){return!Wn()&&!!jn()}function Fr(){return dr()?gt.reactNative:Wn()?gt.node:jr()?gt.browser:gt.unknown}function fd(t,e){let r=lr.parse(t);return r=ro(ro({},r),e),t=lr.stringify(r),t}function ld(){if(Fr()===gt.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=xh();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function hd(){var t;const e=Fr();return e===gt.browser?[e,((t=Gs())==null?void 0:t.host)||"unknown"].join(":"):e}function dd(t,e,r){const n=ld(),i=hd();return[[t,e].join("-"),[ud,r].join("-"),n,i].join("/")}function gd({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:c}){const u=r.split("?"),l=dd(t,e,n),f={auth:i,ua:l,projectId:s,useOnCloseEvent:c||void 0},_=fd(u[1]||"",f);return u[0]+"?"+_}function no(t){return Object.fromEntries(t.entries())}function io(t){return new Map(Object.entries(t))}function _d(t=ce.FIVE_MINUTES,e){const r=ce.toMiliseconds(t||ce.FIVE_MINUTES);let n,i,s;return{resolve:c=>{s&&n&&(clearTimeout(s),n(c))},reject:c=>{s&&i&&(clearTimeout(s),i(c))},done:()=>new Promise((c,u)=>{s=setTimeout(()=>{u(new Error(e))},r),n=c,i=u})}}function gr(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const c=await t;n(c)}catch(c){i(c)}clearTimeout(s)})}function so(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function yd(t){return so("topic",t)}function pd(t){return so("id",t)}function bd(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Br(t,e){return ce.fromMiliseconds((e||Date.now())+ce.toMiliseconds(t))}function oo(t){return Date.now()>=ce.toMiliseconds(t)}function Yn(t,e){return`${t}${e?`:${e}`:""}`}const vd="irn";function kn(t){return t?.relay||{protocol:vd}}function zr(t){const e=kh[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var Ed=Object.defineProperty,ao=Object.getOwnPropertySymbols,wd=Object.prototype.hasOwnProperty,md=Object.prototype.propertyIsEnumerable,co=(t,e,r)=>e in t?Ed(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Dd=(t,e)=>{for(var r in e||(e={}))wd.call(e,r)&&co(t,r,e[r]);if(ao)for(var r of ao(e))md.call(e,r)&&co(t,r,e[r]);return t};function Sd(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),c=t[i];r[s]=c}}),r}function Od(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",c=lr.parse(s);return{protocol:n,topic:Td(i[0]),version:parseInt(i[1],10),symKey:c.symKey,relay:Sd(c)}}function Td(t){return t.startsWith("//")?t.substring(2):t}function xd(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function Id(t){return`${t.protocol}:${t.topic}@${t.version}?`+lr.stringify(Dd({symKey:t.symKey},xd(t.relay)))}const Rd={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Ad={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function xe(t,e){const{message:r,code:n}=Ad[t];return{message:e?`${r} ${e}`:r,code:n}}function _r(t,e){const{message:r,code:n}=Rd[t];return{message:e?`${r} ${e}`:r,code:n}}function Cd(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Hr(t){return typeof t>"u"}function uo(t,e){return e&&Hr(t)?!0:typeof t=="string"&&!!t.trim().length}function Pd(t){if(uo(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function Ld(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function Nd(t){return t?.topic}function Xn(t){return typeof t<"u"&&typeof t!==null}function fo(){const t=Fr();return new Promise(e=>{switch(t){case gt.browser:e(Ud());break;case gt.reactNative:e(Md());break;case gt.node:e($d());break;default:e(!0)}})}function Ud(){return jr()&&navigator?.onLine}async function Md(){if(dr()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t?.isConnected}return!0}function $d(){return!0}function jd(t){switch(Fr()){case gt.browser:Fd(t);break;case gt.reactNative:Bd(t);break}}function Fd(t){!dr()&&jr()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Bd(t){dr()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}const Jn="wc",lo=2,Kr="core",wt=`${Jn}@2:${Kr}:`,ho={name:Kr,logger:"error"},go={database:":memory:"},_o="crypto",Qn="client_ed25519_seed",yo=ce.ONE_DAY,po="keychain",bo="0.3",vo="messages",Eo="0.3",wo=ce.SIX_HOURS,mo="publisher",Do="irn",So="error",Zn="wss://relay.walletconnect.com",ei="wss://relay.walletconnect.org",Oo="relayer",st={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},To="_subscription",vt={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},xo=ce.ONE_SECOND,zd={database:":memory:"},Io="2.10.2",Ro=1e4,Ao="0.3",Co="WALLETCONNECT_CLIENT_ID",ft={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Hd=ce.THIRTY_DAYS,Po="subscription",Lo="0.3",No=ce.FIVE_SECONDS*1e3,Uo="pairing",Mo="0.3",Kd=ce.THIRTY_DAYS,kt={wc_pairingDelete:{req:{ttl:ce.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ce.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ce.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ce.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ce.ONE_DAY,prompt:!1,tag:0},res:{ttl:ce.ONE_DAY,prompt:!1,tag:0}}},yr={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},_t={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},$o="history",jo="0.3",Fo="expirer",lt={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Bo="0.3",Gd=ce.ONE_DAY,Gr="verify-api",Vr="https://verify.walletconnect.com",ti="https://verify.walletconnect.org";class zo{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=po,this.version=bo,this.initialized=!1,this.storagePrefix=wt,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=xe("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=Se.generateChildLogger(r,this.name)}get context(){return Se.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,no(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?io(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Ho{constructor(e,r,n){this.core=e,this.logger=r,this.name=_o,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=Cs(i);return As(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=Jh();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),c=Cs(s),u=Vn();return await sh(u,i,yo,c)},this.generateSharedKey=(i,s,c)=>{this.isInitialized();const u=this.getPrivateKey(i),l=Qh(u,s);return this.setSymKey(l,c)},this.setSymKey=async(i,s)=>{this.isInitialized();const c=s||Zh(i);return await this.keychain.set(c,i),c},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,c)=>{this.isInitialized();const u=Qs(c),l=Dn(s);if(Zs(u)){const p=u.senderPublicKey,v=u.receiverPublicKey;i=await this.generateSharedKey(p,v)}const f=this.getSymKey(i),{type:_,senderPublicKey:O}=u;return td({type:_,symKey:f,message:l,senderPublicKey:O})},this.decode=async(i,s,c)=>{this.isInitialized();const u=id(s,c);if(Zs(u)){const l=u.receiverPublicKey,f=u.senderPublicKey;i=await this.generateSharedKey(l,f)}try{const l=this.getSymKey(i),f=rd({symKey:l,encoded:s});return es(f)}catch(l){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(l)}},this.getPayloadType=i=>{const s=$r(i);return hr(s.type)},this.getPayloadSenderPublicKey=i=>{const s=$r(i);return s.senderPublicKey?rt(s.senderPublicKey,it):void 0},this.core=e,this.logger=Se.generateChildLogger(r,this.name),this.keychain=n||new zo(this.core,this.logger)}get context(){return Se.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Qn)}catch{e=Vn(),await this.keychain.set(Qn,e)}return nt(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Ko extends Bu{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=vo,this.version=Eo,this.initialized=!1,this.storagePrefix=wt,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=qn(i);let c=this.messages.get(n);return typeof c>"u"&&(c={}),typeof c[s]<"u"||(c[s]=i,this.messages.set(n,c),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),c=qn(i);return typeof s[c]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Se.generateChildLogger(e,this.name),this.core=r}get context(){return Se.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,no(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?io(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}const Vd="PARSE_ERROR",qd="INVALID_REQUEST",Wd="METHOD_NOT_FOUND",Yd="INVALID_PARAMS",Go="INTERNAL_ERROR",ri="SERVER_ERROR",kd=[-32700,-32600,-32601,-32602,-32603],pr={[Vd]:{code:-32700,message:"Parse error"},[qd]:{code:-32600,message:"Invalid Request"},[Wd]:{code:-32601,message:"Method not found"},[Yd]:{code:-32602,message:"Invalid params"},[Go]:{code:-32603,message:"Internal error"},[ri]:{code:-32e3,message:"Server error"}},Vo=ri;function Xd(t){return kd.includes(t)}function qo(t){return Object.keys(pr).includes(t)?pr[t]:pr[Vo]}function Jd(t){const e=Object.values(pr).find(r=>r.code===t);return e||pr[Vo]}function Qd(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var Wo={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var ni=function(t,e){return ni=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},ni(t,e)};function Zd(t,e){ni(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ii=function(){return ii=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ii.apply(this,arguments)};function eg(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function tg(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(c=t[u])&&(s=(i<3?c(s):i>3?c(e,r,s):c(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function rg(t,e){return function(r,n){e(r,n,t)}}function ng(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ig(t,e,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function u(_){try{f(n.next(_))}catch(O){c(O)}}function l(_){try{f(n.throw(_))}catch(O){c(O)}}function f(_){_.done?s(_.value):i(_.value).then(u,l)}f((n=n.apply(t,e||[])).next())})}function sg(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(f){return function(_){return l([f,_])}}function l(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){r.label=f[1];break}if(f[0]===6&&r.label<s[1]){r.label=s[1],s=f;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(f);break}s[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(_){f=[6,_],i=0}finally{n=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function og(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function ag(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function si(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yo(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(u){c={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function cg(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Yo(arguments[e]));return t}function ug(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,u=s.length;c<u;c++,i++)n[i]=s[c];return n}function br(t){return this instanceof br?(this.v=t,this):new br(t)}function fg(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(p){n[p]&&(i[p]=function(v){return new Promise(function(A,C){s.push([p,v,A,C])>1||u(p,v)})})}function u(p,v){try{l(n[p](v))}catch(A){O(s[0][3],A)}}function l(p){p.value instanceof br?Promise.resolve(p.value.v).then(f,_):O(s[0][2],p)}function f(p){u("next",p)}function _(p){u("throw",p)}function O(p,v){p(v),s.shift(),s.length&&u(s[0][0],s[0][1])}}function lg(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(c){return(r=!r)?{value:br(t[i](c)),done:i==="return"}:s?s(c):c}:s}}function hg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof si=="function"?si(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(u,l){c=t[s](c),i(u,l,c.done,c.value)})}}function i(s,c,u,l){Promise.resolve(l).then(function(f){s({value:f,done:u})},c)}}function dg(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function gg(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function _g(t){return t&&t.__esModule?t:{default:t}}function yg(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function pg(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var bg=Object.freeze({__proto__:null,__extends:Zd,get __assign(){return ii},__rest:eg,__decorate:tg,__param:rg,__metadata:ng,__awaiter:ig,__generator:sg,__createBinding:og,__exportStar:ag,__values:si,__read:Yo,__spread:cg,__spreadArrays:ug,__await:br,__asyncGenerator:fg,__asyncDelegator:lg,__asyncValues:hg,__makeTemplateObject:dg,__importStar:gg,__importDefault:_g,__classPrivateFieldGet:yg,__classPrivateFieldSet:pg}),vg=Ct(bg),mt={},ko;function Eg(){if(ko)return mt;ko=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.isBrowserCryptoAvailable=mt.getSubtleCrypto=mt.getBrowerCrypto=void 0;function t(){return Xe?.crypto||Xe?.msCrypto||{}}mt.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}mt.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return mt.isBrowserCryptoAvailable=r,mt}var Dt={},Xo;function wg(){if(Xo)return Dt;Xo=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.isBrowser=Dt.isNode=Dt.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Dt.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Dt.isNode=e;function r(){return!t()&&!e()}return Dt.isBrowser=r,Dt}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=vg;e.__exportStar(Eg(),t),e.__exportStar(wg(),t)})(Wo);function Jo(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Qo(t=6){return BigInt(Jo(t))}function oi(t,e,r){return{id:r||Jo(),jsonrpc:"2.0",method:t,params:e}}function Zo(t,e){return{id:t,jsonrpc:"2.0",result:e}}function ea(t,e,r){return{id:t,jsonrpc:"2.0",error:mg(e,r)}}function mg(t,e){return typeof t>"u"?qo(Go):(typeof t=="string"&&(t=Object.assign(Object.assign({},qo(ri)),{message:t})),typeof e<"u"&&(t.data=e),Xd(t.code)&&(t=Jd(t.code)),t)}class Dg{}class Sg extends Dg{constructor(){super()}}class Og extends Sg{constructor(e){super()}}const Tg="^wss?:";function xg(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Ig(t,e){const r=xg(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function ta(t){return Ig(t,Tg)}function Rg(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function ra(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function na(t){return ra(t)&&"method"in t}function ai(t){return ra(t)&&(ia(t)||qr(t))}function ia(t){return"result"in t}function qr(t){return"error"in t}class Ag extends Og{constructor(e){super(e),this.events=new ut.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(oi(e.method,e.params||[],e.id||Qo().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{qr(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ai(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Cg=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Pg=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",sa=t=>t.split("?")[0],oa=10,Lg=Cg();class Ng{constructor(e){if(this.url=e,this.events=new ut.exports.EventEmitter,this.registering=!1,!ta(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Dn(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!ta(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=Wo.isReactNative()?void 0:{rejectUnauthorized:!Rg(e)},s=new Lg(e,[],i);Pg()?s.onerror=c=>{const u=c;n(this.emitError(u.error))}:s.on("error",c=>{n(this.emitError(c))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?es(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=ea(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return Qd(e,sa(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>oa&&this.events.setMaxListeners(oa)}emitError(e){const r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${sa(this.url)}`));return this.events.emit("register_error",r),r}}class Ug extends zu{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new ut.exports.EventEmitter,this.name=mo,this.queue=new Map,this.publishTimeout=ce.toMiliseconds(ce.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var c;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const u=s?.ttl||wo,l=kn(s),f=s?.prompt||!1,_=s?.tag||0,O=s?.id||Qo().toString(),p={topic:n,message:i,opts:{ttl:u,relay:l,prompt:f,tag:_,id:O}},v=setTimeout(()=>this.queue.set(O,p),this.publishTimeout);try{await await gr(this.rpcPublish(n,i,u,l,f,_,O),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(O),this.relayer.events.emit(st.publish,p)}catch(A){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(c=s?.internal)!=null&&c.throwOnFailedPublish)throw this.removeRequestFromQueue(O),A;return}finally{clearTimeout(v)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(u){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(u),u}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=Se.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Se.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,c,u){var l,f,_,O;const p={method:zr(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:c},id:u};return Hr((l=p.params)==null?void 0:l.prompt)&&((f=p.params)==null||delete f.prompt),Hr((_=p.params)==null?void 0:_.tag)&&((O=p.params)==null||delete O.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p}),this.relayer.request(p)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(Gt.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(st.connection_stalled);return}this.checkQueue()}),this.relayer.on(st.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class Mg{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var $g=Object.defineProperty,jg=Object.defineProperties,Fg=Object.getOwnPropertyDescriptors,aa=Object.getOwnPropertySymbols,Bg=Object.prototype.hasOwnProperty,zg=Object.prototype.propertyIsEnumerable,ca=(t,e,r)=>e in t?$g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vr=(t,e)=>{for(var r in e||(e={}))Bg.call(e,r)&&ca(t,r,e[r]);if(aa)for(var r of aa(e))zg.call(e,r)&&ca(t,r,e[r]);return t},ci=(t,e)=>jg(t,Fg(e));class ua extends Gu{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new Mg,this.events=new ut.exports.EventEmitter,this.name=Po,this.version=Lo,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=wt,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=kn(i),c={topic:n,relay:s};this.pending.set(n,c);const u=await this.rpcSubscribe(n,s);return this.onSubscribe(u,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),u}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{const c=new ce.Watch;c.start(this.pendingSubscriptionWatchLabel);const u=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(u),c.stop(this.pendingSubscriptionWatchLabel),i(!0)),c.elapsed(this.pendingSubscriptionWatchLabel)>=No&&(clearInterval(u),c.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Se.generateChildLogger(r,this.name),this.clientId=""}get context(){return Se.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=kn(n);await this.rpcUnsubscribe(e,r,i);const s=_r("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:zr(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await gr(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(st.connection_stalled)}return qn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:zr(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await gr(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(st.connection_stalled)}}rpcUnsubscribe(e,r,n){const i={method:zr(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,ci(vr({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,vr({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,vr({},r)),this.topicMap.set(r.topic,e),this.events.emit(ft.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(ft.deleted,ci(vr({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ft.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(ft.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);Cd(r)&&this.onBatchSubscribe(r.map((n,i)=>ci(vr({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Gt.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(st.connect,async()=>{await this.onConnect()}),this.relayer.on(st.disconnect,()=>{this.onDisconnect()}),this.events.on(ft.created,async e=>{const r=ft.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(ft.deleted,async e=>{const r=ft.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var Hg=Object.defineProperty,fa=Object.getOwnPropertySymbols,Kg=Object.prototype.hasOwnProperty,Gg=Object.prototype.propertyIsEnumerable,la=(t,e,r)=>e in t?Hg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vg=(t,e)=>{for(var r in e||(e={}))Kg.call(e,r)&&la(t,r,e[r]);if(fa)for(var r of fa(e))Gg.call(e,r)&&la(t,r,e[r]);return t};class ha extends Hu{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new ut.exports.EventEmitter,this.name=Oo,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(st.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(st.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(vt.payload,this.onPayloadHandler),this.provider.on(vt.connect,this.onConnectHandler),this.provider.on(vt.disconnect,this.onDisconnectHandler),this.provider.on(vt.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Se.generateChildLogger(e.logger,this.name):Se.pino(Se.getDefaultLoggerOptions({level:e.logger||So})),this.messages=new Ko(this.logger,e.core),this.subscriber=new ua(this,this.logger),this.publisher=new Ug(this,this.logger),this.relayUrl=e?.relayUrl||Zn,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${ei}...`),await this.restartTransport(ei)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},Ro)}get context(){return Se.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";if(i)return i;let s;const c=u=>{u.topic===e&&(this.subscriber.off(ft.created,c),s())};return await Promise.all([new Promise(u=>{s=u,this.subscriber.on(ft.created,c)}),new Promise(async u=>{i=await this.subscriber.subscribe(e,r),u()})]),i}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await gr(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(ft.resubscribed,()=>{r()})}),new Promise(async(r,n)=>{try{await gr(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){n(i);return}r()})])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.provider.events.emit(vt.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await fo())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ag(new Ng(gd({sdkVersion:Io,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),na(e)){if(!e.method.endsWith(To))return;const r=e.params,{topic:n,message:i,publishedAt:s}=r.data,c={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Vg({type:"event",event:r.id},c)),this.events.emit(r.id,c),await this.acknowledgePayload(e),await this.onMessageEvent(c)}else ai(e)&&this.events.emit(st.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(st.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Zo(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(vt.payload,this.onPayloadHandler),this.provider.off(vt.connect,this.onConnectHandler),this.provider.off(vt.disconnect,this.onDisconnectHandler),this.provider.off(vt.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(st.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await fo();jd(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(st.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},ce.toMiliseconds(xo)))}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var ui={exports:{}};(function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,c=9007199254740991,u="[object Arguments]",l="[object Array]",f="[object AsyncFunction]",_="[object Boolean]",O="[object Date]",p="[object Error]",v="[object Function]",A="[object GeneratorFunction]",C="[object Map]",U="[object Number]",Y="[object Null]",S="[object Object]",R="[object Promise]",b="[object Proxy]",E="[object RegExp]",d="[object Set]",o="[object String]",h="[object Symbol]",L="[object Undefined]",P="[object WeakMap]",H="[object ArrayBuffer]",G="[object DataView]",J="[object Float32Array]",D="[object Float64Array]",I="[object Int8Array]",V="[object Int16Array]",F="[object Int32Array]",M="[object Uint8Array]",j="[object Uint8ClampedArray]",N="[object Uint16Array]",B="[object Uint32Array]",ee=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,Q=/^(?:0|[1-9]\d*)$/,k={};k[J]=k[D]=k[I]=k[V]=k[F]=k[M]=k[j]=k[N]=k[B]=!0,k[u]=k[l]=k[H]=k[_]=k[G]=k[O]=k[p]=k[v]=k[C]=k[U]=k[S]=k[E]=k[d]=k[o]=k[P]=!1;var Z=typeof Xe=="object"&&Xe&&Xe.Object===Object&&Xe,x=typeof self=="object"&&self&&self.Object===Object&&self,T=Z||x||Function("return this")(),w=e&&!e.nodeType&&e,a=w&&!0&&t&&!t.nodeType&&t,y=a&&a.exports===w,K=y&&Z.process,q=function(){try{return K&&K.binding&&K.binding("util")}catch{}}(),le=q&&q.isTypedArray;function pe(g,m){for(var $=-1,X=g==null?0:g.length,Ie=0,ie=[];++$<X;){var Ne=g[$];m(Ne,$,g)&&(ie[Ie++]=Ne)}return ie}function de(g,m){for(var $=-1,X=m.length,Ie=g.length;++$<X;)g[Ie+$]=m[$];return g}function Ee(g,m){for(var $=-1,X=g==null?0:g.length;++$<X;)if(m(g[$],$,g))return!0;return!1}function Ue(g,m){for(var $=-1,X=Array(g);++$<g;)X[$]=m($);return X}function Ce(g){return function(m){return g(m)}}function ye(g,m){return g.has(m)}function ge(g,m){return g?.[m]}function he(g){var m=-1,$=Array(g.size);return g.forEach(function(X,Ie){$[++m]=[Ie,X]}),$}function ue(g,m){return function($){return g(m($))}}function ae(g){var m=-1,$=Array(g.size);return g.forEach(function(X){$[++m]=X}),$}var oe=Array.prototype,se=Function.prototype,te=Object.prototype,fe=T["__core-js_shared__"],_e=se.toString,ne=te.hasOwnProperty,be=function(){var g=/[^.]+$/.exec(fe&&fe.keys&&fe.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),ve=te.toString,me=RegExp("^"+_e.call(ne).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),De=y?T.Buffer:void 0,we=T.Symbol,yt=T.Uint8Array,Et=te.propertyIsEnumerable,xt=oe.splice,at=we?we.toStringTag:void 0,jt=Object.getOwnPropertySymbols,Er=De?De.isBuffer:void 0,Yr=ue(Object.keys,Object),Me=Xt(T,"DataView"),Pe=Xt(T,"Map"),$e=Xt(T,"Promise"),je=Xt(T,"Set"),Fe=Xt(T,"WeakMap"),Le=Xt(Object,"create"),He=Bt(Me),Ke=Bt(Pe),Ge=Bt($e),Ve=Bt(je),qe=Bt(Fe),ze=we?we.prototype:void 0,Be=ze?ze.valueOf:void 0;function Re(g){var m=-1,$=g==null?0:g.length;for(this.clear();++m<$;){var X=g[m];this.set(X[0],X[1])}}function We(){this.__data__=Le?Le(null):{},this.size=0}function Ye(g){var m=this.has(g)&&delete this.__data__[g];return this.size-=m?1:0,m}function e0(g){var m=this.__data__;if(Le){var $=m[g];return $===n?void 0:$}return ne.call(m,g)?m[g]:void 0}function t0(g){var m=this.__data__;return Le?m[g]!==void 0:ne.call(m,g)}function r0(g,m){var $=this.__data__;return this.size+=this.has(g)?0:1,$[g]=Le&&m===void 0?n:m,this}Re.prototype.clear=We,Re.prototype.delete=Ye,Re.prototype.get=e0,Re.prototype.has=t0,Re.prototype.set=r0;function St(g){var m=-1,$=g==null?0:g.length;for(this.clear();++m<$;){var X=g[m];this.set(X[0],X[1])}}function n0(){this.__data__=[],this.size=0}function i0(g){var m=this.__data__,$=Xr(m,g);if($<0)return!1;var X=m.length-1;return $==X?m.pop():xt.call(m,$,1),--this.size,!0}function s0(g){var m=this.__data__,$=Xr(m,g);return $<0?void 0:m[$][1]}function o0(g){return Xr(this.__data__,g)>-1}function a0(g,m){var $=this.__data__,X=Xr($,g);return X<0?(++this.size,$.push([g,m])):$[X][1]=m,this}St.prototype.clear=n0,St.prototype.delete=i0,St.prototype.get=s0,St.prototype.has=o0,St.prototype.set=a0;function Ft(g){var m=-1,$=g==null?0:g.length;for(this.clear();++m<$;){var X=g[m];this.set(X[0],X[1])}}function c0(){this.size=0,this.__data__={hash:new Re,map:new(Pe||St),string:new Re}}function u0(g){var m=Jr(this,g).delete(g);return this.size-=m?1:0,m}function f0(g){return Jr(this,g).get(g)}function l0(g){return Jr(this,g).has(g)}function h0(g,m){var $=Jr(this,g),X=$.size;return $.set(g,m),this.size+=$.size==X?0:1,this}Ft.prototype.clear=c0,Ft.prototype.delete=u0,Ft.prototype.get=f0,Ft.prototype.has=l0,Ft.prototype.set=h0;function kr(g){var m=-1,$=g==null?0:g.length;for(this.__data__=new Ft;++m<$;)this.add(g[m])}function d0(g){return this.__data__.set(g,n),this}function g0(g){return this.__data__.has(g)}kr.prototype.add=kr.prototype.push=d0,kr.prototype.has=g0;function It(g){var m=this.__data__=new St(g);this.size=m.size}function _0(){this.__data__=new St,this.size=0}function y0(g){var m=this.__data__,$=m.delete(g);return this.size=m.size,$}function p0(g){return this.__data__.get(g)}function b0(g){return this.__data__.has(g)}function v0(g,m){var $=this.__data__;if($ instanceof St){var X=$.__data__;if(!Pe||X.length<r-1)return X.push([g,m]),this.size=++$.size,this;$=this.__data__=new Ft(X)}return $.set(g,m),this.size=$.size,this}It.prototype.clear=_0,It.prototype.delete=y0,It.prototype.get=p0,It.prototype.has=b0,It.prototype.set=v0;function E0(g,m){var $=Qr(g),X=!$&&U0(g),Ie=!$&&!X&&fi(g),ie=!$&&!X&&!Ie&&Pa(g),Ne=$||X||Ie||ie,ke=Ne?Ue(g.length,String):[],Qe=ke.length;for(var Ae in g)(m||ne.call(g,Ae))&&!(Ne&&(Ae=="length"||Ie&&(Ae=="offset"||Ae=="parent")||ie&&(Ae=="buffer"||Ae=="byteLength"||Ae=="byteOffset")||A0(Ae,Qe)))&&ke.push(Ae);return ke}function Xr(g,m){for(var $=g.length;$--;)if(Ia(g[$][0],m))return $;return-1}function w0(g,m,$){var X=m(g);return Qr(g)?X:de(X,$(g))}function wr(g){return g==null?g===void 0?L:Y:at&&at in Object(g)?I0(g):N0(g)}function Sa(g){return mr(g)&&wr(g)==u}function Oa(g,m,$,X,Ie){return g===m?!0:g==null||m==null||!mr(g)&&!mr(m)?g!==g&&m!==m:m0(g,m,$,X,Oa,Ie)}function m0(g,m,$,X,Ie,ie){var Ne=Qr(g),ke=Qr(m),Qe=Ne?l:Rt(g),Ae=ke?l:Rt(m);Qe=Qe==u?S:Qe,Ae=Ae==u?S:Ae;var ct=Qe==S,pt=Ae==S,et=Qe==Ae;if(et&&fi(g)){if(!fi(m))return!1;Ne=!0,ct=!1}if(et&&!ct)return ie||(ie=new It),Ne||Pa(g)?Ta(g,m,$,X,Ie,ie):T0(g,m,Qe,$,X,Ie,ie);if(!($&i)){var ht=ct&&ne.call(g,"__wrapped__"),dt=pt&&ne.call(m,"__wrapped__");if(ht||dt){var At=ht?g.value():g,Ot=dt?m.value():m;return ie||(ie=new It),Ie(At,Ot,$,X,ie)}}return et?(ie||(ie=new It),x0(g,m,$,X,Ie,ie)):!1}function D0(g){if(!Ca(g)||P0(g))return!1;var m=Ra(g)?me:z;return m.test(Bt(g))}function S0(g){return mr(g)&&Aa(g.length)&&!!k[wr(g)]}function O0(g){if(!L0(g))return Yr(g);var m=[];for(var $ in Object(g))ne.call(g,$)&&$!="constructor"&&m.push($);return m}function Ta(g,m,$,X,Ie,ie){var Ne=$&i,ke=g.length,Qe=m.length;if(ke!=Qe&&!(Ne&&Qe>ke))return!1;var Ae=ie.get(g);if(Ae&&ie.get(m))return Ae==m;var ct=-1,pt=!0,et=$&s?new kr:void 0;for(ie.set(g,m),ie.set(m,g);++ct<ke;){var ht=g[ct],dt=m[ct];if(X)var At=Ne?X(dt,ht,ct,m,g,ie):X(ht,dt,ct,g,m,ie);if(At!==void 0){if(At)continue;pt=!1;break}if(et){if(!Ee(m,function(Ot,zt){if(!ye(et,zt)&&(ht===Ot||Ie(ht,Ot,$,X,ie)))return et.push(zt)})){pt=!1;break}}else if(!(ht===dt||Ie(ht,dt,$,X,ie))){pt=!1;break}}return ie.delete(g),ie.delete(m),pt}function T0(g,m,$,X,Ie,ie,Ne){switch($){case G:if(g.byteLength!=m.byteLength||g.byteOffset!=m.byteOffset)return!1;g=g.buffer,m=m.buffer;case H:return!(g.byteLength!=m.byteLength||!ie(new yt(g),new yt(m)));case _:case O:case U:return Ia(+g,+m);case p:return g.name==m.name&&g.message==m.message;case E:case o:return g==m+"";case C:var ke=he;case d:var Qe=X&i;if(ke||(ke=ae),g.size!=m.size&&!Qe)return!1;var Ae=Ne.get(g);if(Ae)return Ae==m;X|=s,Ne.set(g,m);var ct=Ta(ke(g),ke(m),X,Ie,ie,Ne);return Ne.delete(g),ct;case h:if(Be)return Be.call(g)==Be.call(m)}return!1}function x0(g,m,$,X,Ie,ie){var Ne=$&i,ke=xa(g),Qe=ke.length,Ae=xa(m),ct=Ae.length;if(Qe!=ct&&!Ne)return!1;for(var pt=Qe;pt--;){var et=ke[pt];if(!(Ne?et in m:ne.call(m,et)))return!1}var ht=ie.get(g);if(ht&&ie.get(m))return ht==m;var dt=!0;ie.set(g,m),ie.set(m,g);for(var At=Ne;++pt<Qe;){et=ke[pt];var Ot=g[et],zt=m[et];if(X)var La=Ne?X(zt,Ot,et,m,g,ie):X(Ot,zt,et,g,m,ie);if(!(La===void 0?Ot===zt||Ie(Ot,zt,$,X,ie):La)){dt=!1;break}At||(At=et=="constructor")}if(dt&&!At){var Zr=g.constructor,en=m.constructor;Zr!=en&&"constructor"in g&&"constructor"in m&&!(typeof Zr=="function"&&Zr instanceof Zr&&typeof en=="function"&&en instanceof en)&&(dt=!1)}return ie.delete(g),ie.delete(m),dt}function xa(g){return w0(g,j0,R0)}function Jr(g,m){var $=g.__data__;return C0(m)?$[typeof m=="string"?"string":"hash"]:$.map}function Xt(g,m){var $=ge(g,m);return D0($)?$:void 0}function I0(g){var m=ne.call(g,at),$=g[at];try{g[at]=void 0;var X=!0}catch{}var Ie=ve.call(g);return X&&(m?g[at]=$:delete g[at]),Ie}var R0=jt?function(g){return g==null?[]:(g=Object(g),pe(jt(g),function(m){return Et.call(g,m)}))}:F0,Rt=wr;(Me&&Rt(new Me(new ArrayBuffer(1)))!=G||Pe&&Rt(new Pe)!=C||$e&&Rt($e.resolve())!=R||je&&Rt(new je)!=d||Fe&&Rt(new Fe)!=P)&&(Rt=function(g){var m=wr(g),$=m==S?g.constructor:void 0,X=$?Bt($):"";if(X)switch(X){case He:return G;case Ke:return C;case Ge:return R;case Ve:return d;case qe:return P}return m});function A0(g,m){return m=m??c,!!m&&(typeof g=="number"||Q.test(g))&&g>-1&&g%1==0&&g<m}function C0(g){var m=typeof g;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?g!=="__proto__":g===null}function P0(g){return!!be&&be in g}function L0(g){var m=g&&g.constructor,$=typeof m=="function"&&m.prototype||te;return g===$}function N0(g){return ve.call(g)}function Bt(g){if(g!=null){try{return _e.call(g)}catch{}try{return g+""}catch{}}return""}function Ia(g,m){return g===m||g!==g&&m!==m}var U0=Sa(function(){return arguments}())?Sa:function(g){return mr(g)&&ne.call(g,"callee")&&!Et.call(g,"callee")},Qr=Array.isArray;function M0(g){return g!=null&&Aa(g.length)&&!Ra(g)}var fi=Er||B0;function $0(g,m){return Oa(g,m)}function Ra(g){if(!Ca(g))return!1;var m=wr(g);return m==v||m==A||m==f||m==b}function Aa(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=c}function Ca(g){var m=typeof g;return g!=null&&(m=="object"||m=="function")}function mr(g){return g!=null&&typeof g=="object"}var Pa=le?Ce(le):S0;function j0(g){return M0(g)?E0(g):O0(g)}function F0(){return[]}function B0(){return!1}t.exports=$0})(ui,ui.exports);var qg=ui.exports,Wg=Object.defineProperty,da=Object.getOwnPropertySymbols,Yg=Object.prototype.hasOwnProperty,kg=Object.prototype.propertyIsEnumerable,ga=(t,e,r)=>e in t?Wg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_a=(t,e)=>{for(var r in e||(e={}))Yg.call(e,r)&&ga(t,r,e[r]);if(da)for(var r of da(e))kg.call(e,r)&&ga(t,r,e[r]);return t};class ya extends Ku{constructor(e,r,n,i=wt,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=Ao,this.cached=[],this.initialized=!1,this.storagePrefix=wt,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{this.getKey&&c!==null&&!Hr(c)?this.map.set(this.getKey(c),c):Ld(c)?this.map.set(c.id,c):Nd(c)&&this.map.set(c.topic,c)}),this.cached=[],this.initialized=!0)},this.set=async(c,u)=>{this.isInitialized(),this.map.has(c)?await this.update(c,u):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:u}),this.map.set(c,u),await this.persist())},this.get=c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c)),this.getAll=c=>(this.isInitialized(),c?this.values.filter(u=>Object.keys(c).every(l=>qg(u[l],c[l]))):this.values),this.update=async(c,u)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:u});const l=_a(_a({},this.getData(c)),u);this.map.set(c,l),await this.persist()},this.delete=async(c,u)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:u}),this.map.delete(c),await this.persist())},this.logger=Se.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Se.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class pa{constructor(e,r){this.core=e,this.logger=r,this.name=Uo,this.version=Mo,this.events=new ut.exports,this.initialized=!1,this.storagePrefix=wt,this.ignoredPayloadTypes=[Yt],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=Vn(),i=await this.core.crypto.setSymKey(n),s=Br(ce.FIVE_MINUTES),c={protocol:Do},u={topic:i,expiry:s,relay:c,active:!1},l=Id({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:c});return await this.pairings.set(i,u),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:l}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:c}=Od(n.uri);let u;if(this.pairings.keys.includes(i)&&(u=this.pairings.get(i),u.active))throw new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);this.core.crypto.keychain.has(i)||(await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:c}));const l=Br(ce.FIVE_MINUTES),f={topic:i,relay:c,expiry:l,active:!1};return await this.pairings.set(i,f),this.core.expirer.set(i,l),n.activatePairing&&await this.activate({topic:i}),this.events.emit(yr.create,f),f},this.activate=async({topic:n})=>{this.isInitialized();const i=Br(ce.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:c,resolve:u,reject:l}=_d();this.events.once(Yn("pairing_ping",s),({error:f})=>{f?l(f):u()}),await c()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",_r("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const c=oi(i,s),u=await this.core.crypto.encode(n,c),l=kt[i].req;return this.core.history.set(n,c),this.core.relayer.publish(n,u,l),c.id},this.sendResult=async(n,i,s)=>{const c=Zo(n,s),u=await this.core.crypto.encode(i,c),l=await this.core.history.get(i,n),f=kt[l.request.method].res;await this.core.relayer.publish(i,u,f),await this.core.history.resolve(c)},this.sendError=async(n,i,s)=>{const c=ea(n,s),u=await this.core.crypto.encode(i,c),l=await this.core.history.get(i,n),f=kt[l.request.method]?kt[l.request.method].res:kt.unregistered_method.res;await this.core.relayer.publish(i,u,f),await this.core.history.resolve(c)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,_r("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>oo(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,c=(await this.core.history.get(i,s.id)).request.method;switch(c){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(c)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(yr.ping,{id:s,topic:n})}catch(c){await this.sendError(s,n,c),this.logger.error(c)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{ia(i)?this.events.emit(Yn("pairing_ping",s),{}):qr(i)&&this.events.emit(Yn("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(yr.delete,{id:s,topic:n})}catch(c){await this.sendError(s,n,c),this.logger.error(c)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:c}=i;try{if(this.registeredMethods.includes(c))return;const u=_r("WC_METHOD_UNSUPPORTED",c);await this.sendError(s,n,u),this.logger.error(u)}catch(u){await this.sendError(s,n,u),this.logger.error(u)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(_r("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!Xn(n)){const{message:i}=xe("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!Pd(n.uri)){const{message:i}=xe("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!Xn(n)){const{message:s}=xe("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!Xn(n)){const{message:s}=xe("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!uo(n,!1)){const{message:i}=xe("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(oo(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=xe("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=Se.generateChildLogger(r,this.name),this.pairings=new ya(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Se.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(st.message,async e=>{const{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);try{na(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):ai(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(lt.expired,async e=>{const{topic:r}=bd(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(yr.expire,{topic:r}))})}}class ba extends Fu{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new ut.exports.EventEmitter,this.name=$o,this.version=jo,this.cached=[],this.initialized=!1,this.storagePrefix=wt,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const c={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Br(ce.THIRTY_DAYS)};this.records.set(c.id,c),this.events.emit(_t.created,c)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=qr(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(_t.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(_t.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Se.generateChildLogger(r,this.name)}get context(){return Se.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:oi(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(_t.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(_t.created,e=>{const r=_t.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(_t.updated,e=>{const r=_t.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(_t.deleted,e=>{const r=_t.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(Gt.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ce.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class va extends Vu{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new ut.exports.EventEmitter,this.name=Fo,this.version=Bo,this.cached=[],this.initialized=!1,this.storagePrefix=wt,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),c={target:s,expiry:i};this.expirations.set(s,c),this.checkExpiry(s,c),this.events.emit(lt.created,{target:s,expiration:c})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(lt.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Se.generateChildLogger(r,this.name)}get context(){return Se.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return yd(e);if(typeof e=="number")return pd(e);const{message:r}=xe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(lt.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;ce.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(lt.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Gt.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(lt.created,e=>{const r=lt.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(lt.expired,e=>{const r=lt.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(lt.deleted,e=>{const r=lt.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Ea extends qu{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=Gr,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async()=>{if(this.verifyDisabled||dr()||!jr())return;const n=Vr;this.verifyUrl!==n&&this.removeIframe(),this.verifyUrl=n;try{await this.createIframe()}catch(i){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(i)}if(!this.initialized){this.removeIframe(),this.verifyUrl=ti;try{await this.createIframe()}catch(i){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(i),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const i=n?.verifyUrl||Vr;let s;try{s=await this.fetchAttestation(n.attestationId,i)}catch(c){this.logger.info(`failed to resolve attestation: ${n.attestationId} from url: ${i}`),this.logger.info(c),s=await this.fetchAttestation(n.attestationId,ti)}return s},this.fetchAttestation=async(n,i)=>{this.logger.info(`resolving attestation: ${n} from url: ${i}`);const s=this.startAbortTimer(ce.ONE_SECOND*2),c=await fetch(`${i}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(s),c.status===200?await c.json():void 0},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var i;try{if(!this.iframe)return;(i=this.iframe.contentWindow)==null||i.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const i=s=>{s.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",i),n())};await Promise.race([new Promise(s=>{if(document.getElementById(Gr))return s();window.addEventListener("message",i);const c=document.createElement("iframe");c.id=Gr,c.src=`${this.verifyUrl}/${this.projectId}`,c.style.display="none",document.body.append(c),this.iframe=c,n=s}),new Promise((s,c)=>setTimeout(()=>{window.removeEventListener("message",i),c("verify iframe load timeout")},ce.toMiliseconds(ce.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=Se.generateChildLogger(r,this.name),this.verifyUrl=Vr,this.abortController=new AbortController,this.isDevEnv=Wn()&&process.env.IS_VITEST}get context(){return Se.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ce.toMiliseconds(e))}}var Xg=Object.defineProperty,wa=Object.getOwnPropertySymbols,Jg=Object.prototype.hasOwnProperty,Qg=Object.prototype.propertyIsEnumerable,ma=(t,e,r)=>e in t?Xg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Da=(t,e)=>{for(var r in e||(e={}))Jg.call(e,r)&&ma(t,r,e[r]);if(wa)for(var r of wa(e))Qg.call(e,r)&&ma(t,r,e[r]);return t};class Wr extends ju{constructor(e){super(e),this.protocol=Jn,this.version=lo,this.name=Kr,this.events=new ut.exports.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Zn,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Se.pino(Se.getDefaultLoggerOptions({level:e?.logger||ho.logger}));this.logger=Se.generateChildLogger(r,this.name),this.heartbeat=new Gt.HeartBeat,this.crypto=new Ho(this,this.logger,e?.keychain),this.history=new ba(this,this.logger),this.expirer=new va(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new gc(Da(Da({},go),e?.storageOptions)),this.relayer=new ha({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new pa(this,this.logger),this.verify=new Ea(this.projectId||"",this.logger)}static async init(e){const r=new Wr(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(Co,n),r}get context(){return Se.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const Zg=Wr;W.CORE_CONTEXT=Kr,W.CORE_DEFAULT=ho,W.CORE_PROTOCOL=Jn,W.CORE_STORAGE_OPTIONS=go,W.CORE_STORAGE_PREFIX=wt,W.CORE_VERSION=lo,W.CRYPTO_CLIENT_SEED=Qn,W.CRYPTO_CONTEXT=_o,W.CRYPTO_JWT_TTL=yo,W.Core=Zg,W.Crypto=Ho,W.EXPIRER_CONTEXT=Fo,W.EXPIRER_DEFAULT_TTL=Gd,W.EXPIRER_EVENTS=lt,W.EXPIRER_STORAGE_VERSION=Bo,W.Expirer=va,W.HISTORY_CONTEXT=$o,W.HISTORY_EVENTS=_t,W.HISTORY_STORAGE_VERSION=jo,W.JsonRpcHistory=ba,W.KEYCHAIN_CONTEXT=po,W.KEYCHAIN_STORAGE_VERSION=bo,W.KeyChain=zo,W.MESSAGES_CONTEXT=vo,W.MESSAGES_STORAGE_VERSION=Eo,W.MessageTracker=Ko,W.PAIRING_CONTEXT=Uo,W.PAIRING_DEFAULT_TTL=Kd,W.PAIRING_EVENTS=yr,W.PAIRING_RPC_OPTS=kt,W.PAIRING_STORAGE_VERSION=Mo,W.PENDING_SUB_RESOLUTION_TIMEOUT=No,W.PUBLISHER_CONTEXT=mo,W.PUBLISHER_DEFAULT_TTL=wo,W.Pairing=pa,W.RELAYER_CONTEXT=Oo,W.RELAYER_DEFAULT_LOGGER=So,W.RELAYER_DEFAULT_PROTOCOL=Do,W.RELAYER_DEFAULT_RELAY_URL=Zn,W.RELAYER_EVENTS=st,W.RELAYER_FAILOVER_RELAY_URL=ei,W.RELAYER_PROVIDER_EVENTS=vt,W.RELAYER_RECONNECT_TIMEOUT=xo,W.RELAYER_SDK_VERSION=Io,W.RELAYER_STORAGE_OPTIONS=zd,W.RELAYER_SUBSCRIBER_SUFFIX=To,W.RELAYER_TRANSPORT_CUTOFF=Ro,W.Relayer=ha,W.STORE_STORAGE_VERSION=Ao,W.SUBSCRIBER_CONTEXT=Po,W.SUBSCRIBER_DEFAULT_TTL=Hd,W.SUBSCRIBER_EVENTS=ft,W.SUBSCRIBER_STORAGE_VERSION=Lo,W.Store=ya,W.Subscriber=ua,W.VERIFY_CONTEXT=Gr,W.VERIFY_FALLBACK_SERVER=ti,W.VERIFY_SERVER=Vr,W.Verify=Ea,W.WALLETCONNECT_CLIENT_ID=Co,W.default=Wr,Object.defineProperty(W,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
