{"version":3,"file":"index.cjs.js","sources":["../src/constants/values.ts","../src/constants/rpc.ts","../src/EthereumProvider.ts","../src/index.ts"],"sourcesContent":["export const PROTOCOL = \"wc\";\nexport const WC_VERSION = 2;\nexport const CONTEXT = \"ethereum_provider\";\nexport const STORAGE_KEY = `${PROTOCOL}@${WC_VERSION}:${CONTEXT}:`;\nexport const RPC_URL = \"https://rpc.walletconnect.com/v1/\";\n","export const REQUIRED_METHODS = [\"eth_sendTransaction\", \"personal_sign\"];\nexport const OPTIONAL_METHODS = [\n  \"eth_accounts\",\n  \"eth_requestAccounts\",\n  \"eth_sendRawTransaction\",\n  \"eth_sign\",\n  \"eth_signTransaction\",\n  \"eth_signTypedData\",\n  \"eth_signTypedData_v3\",\n  \"eth_signTypedData_v4\",\n  \"eth_sendTransaction\",\n  \"personal_sign\",\n  \"wallet_switchEthereumChain\",\n  \"wallet_addEthereumChain\",\n  \"wallet_getPermissions\",\n  \"wallet_requestPermissions\",\n  \"wallet_registerOnboarding\",\n  \"wallet_watchAsset\",\n  \"wallet_scanQRCode\",\n];\nexport const REQUIRED_EVENTS = [\"chainChanged\", \"accountsChanged\"];\nexport const OPTIONAL_EVENTS = [\n  \"chainChanged\",\n  \"accountsChanged\",\n  \"message\",\n  \"disconnect\",\n  \"connect\",\n];\n","import { EventEmitter } from \"events\";\nimport { getAccountsFromNamespaces, getSdkError, isValidArray } from \"@walletconnect/utils\";\nimport { KeyValueStorageOptions } from \"@walletconnect/keyvaluestorage\";\nimport {\n  IEthereumProvider as IProvider,\n  IEthereumProviderEvents,\n  ProviderAccounts,\n  RequestArguments,\n} from \"./types\";\nimport { Metadata, Namespace, UniversalProvider } from \"@walletconnect/universal-provider\";\nimport type { WalletConnectModalConfig, WalletConnectModal } from \"@walletconnect/modal\";\nimport { SessionTypes, SignClientTypes } from \"@walletconnect/types\";\nimport {\n  STORAGE_KEY,\n  REQUIRED_METHODS,\n  REQUIRED_EVENTS,\n  RPC_URL,\n  OPTIONAL_METHODS,\n  OPTIONAL_EVENTS,\n} from \"./constants\";\n\nexport type QrModalOptions = Pick<\n  WalletConnectModalConfig,\n  | \"themeMode\"\n  | \"themeVariables\"\n  | \"desktopWallets\"\n  | \"enableExplorer\"\n  | \"explorerRecommendedWalletIds\"\n  | \"explorerExcludedWalletIds\"\n  | \"mobileWallets\"\n  | \"privacyPolicyUrl\"\n  | \"termsOfServiceUrl\"\n  | \"walletImages\"\n>;\n\nexport type RpcMethod =\n  | \"personal_sign\"\n  | \"eth_sendTransaction\"\n  | \"eth_accounts\"\n  | \"eth_requestAccounts\"\n  | \"eth_call\"\n  | \"eth_getBalance\"\n  | \"eth_sendRawTransaction\"\n  | \"eth_sign\"\n  | \"eth_signTransaction\"\n  | \"eth_signTypedData\"\n  | \"eth_signTypedData_v3\"\n  | \"eth_signTypedData_v4\"\n  | \"wallet_switchEthereumChain\"\n  | \"wallet_addEthereumChain\"\n  | \"wallet_getPermissions\"\n  | \"wallet_requestPermissions\"\n  | \"wallet_registerOnboarding\"\n  | \"wallet_watchAsset\"\n  | \"wallet_scanQRCode\";\n\nexport type RpcEvent = \"accountsChanged\" | \"chainChanged\" | \"message\" | \"disconnect\" | \"connect\";\n\nexport interface EthereumRpcMap {\n  [chainId: string]: string;\n}\n\nexport interface SessionEvent {\n  event: { name: string; data: any };\n  chainId: string;\n}\n\nexport interface EthereumRpcConfig {\n  chains: string[];\n  optionalChains: string[];\n  methods: string[];\n  optionalMethods?: string[];\n  /**\n   * @description Events that the wallet MUST support or the connection will be rejected\n   */\n  events: string[];\n  optionalEvents?: string[];\n  rpcMap: EthereumRpcMap;\n  projectId: string;\n  metadata?: Metadata;\n  showQrModal: boolean;\n  qrModalOptions?: QrModalOptions;\n}\nexport interface ConnectOps {\n  chains?: number[];\n  optionalChains?: number[];\n  rpcMap?: EthereumRpcMap;\n  pairingTopic?: string;\n}\n\nexport interface IEthereumProvider extends IProvider {\n  connect(opts?: ConnectOps | undefined): Promise<void>;\n}\n\nexport function getRpcUrl(chainId: string, rpc: EthereumRpcConfig): string | undefined {\n  let rpcUrl: string | undefined;\n  if (rpc.rpcMap) {\n    rpcUrl = rpc.rpcMap[getEthereumChainId([chainId])];\n  }\n  return rpcUrl;\n}\n\nexport function getEthereumChainId(chains: string[]): number {\n  return Number(chains[0].split(\":\")[1]);\n}\n\nexport function toHexChainId(chainId: number): string {\n  return `0x${chainId.toString(16)}`;\n}\n\nexport type NamespacesParams = {\n  chains: EthereumRpcConfig[\"chains\"];\n  optionalChains: EthereumRpcConfig[\"optionalChains\"];\n  methods?: EthereumRpcConfig[\"methods\"];\n  optionalMethods?: EthereumRpcConfig[\"methods\"];\n  events?: EthereumRpcConfig[\"events\"];\n  rpcMap: EthereumRpcConfig[\"rpcMap\"];\n  optionalEvents?: EthereumRpcConfig[\"events\"];\n};\n\nexport function buildNamespaces(params: NamespacesParams): {\n  required?: Namespace;\n  optional?: Namespace;\n} {\n  const { chains, optionalChains, methods, optionalMethods, events, optionalEvents, rpcMap } =\n    params;\n  if (!isValidArray(chains)) {\n    throw new Error(\"Invalid chains\");\n  }\n\n  const required: Namespace = {\n    chains,\n    methods: methods || REQUIRED_METHODS,\n    events: events || REQUIRED_EVENTS,\n    rpcMap: {\n      ...(chains.length\n        ? { [getEthereumChainId(chains)]: rpcMap[getEthereumChainId(chains)] }\n        : {}),\n    },\n  };\n\n  // make a list of events and methods that require additional permissions\n  // so we know if we should to include the required chains in the optional namespace\n  const eventsRequiringPermissions = events?.filter((event) => !REQUIRED_EVENTS.includes(event));\n  const methodsRequiringPermissions = methods?.filter((event) => !REQUIRED_METHODS.includes(event));\n\n  if (\n    !optionalChains &&\n    !optionalEvents &&\n    !optionalMethods &&\n    !eventsRequiringPermissions?.length &&\n    !methodsRequiringPermissions?.length\n  ) {\n    return { required: chains.length ? required : undefined };\n  }\n\n  /*\n   * decides whether or not to include the required chains in the optional namespace\n   * use case: if there is a single chain as required but additonal methods/events as optional\n   */\n  const shouldIncludeRequiredChains =\n    (eventsRequiringPermissions?.length && methodsRequiringPermissions?.length) || !optionalChains;\n\n  const optional: Namespace = {\n    chains: [\n      ...new Set(\n        shouldIncludeRequiredChains ? required.chains.concat(optionalChains || []) : optionalChains,\n      ),\n    ],\n    methods: [\n      ...new Set(\n        required.methods.concat(optionalMethods?.length ? optionalMethods : OPTIONAL_METHODS),\n      ),\n    ],\n    events: [\n      ...new Set(required.events.concat(optionalEvents?.length ? optionalEvents : OPTIONAL_EVENTS)),\n    ],\n    rpcMap,\n  };\n\n  return {\n    required: chains.length ? required : undefined,\n    optional: optionalChains.length ? optional : undefined,\n  };\n}\n\n// helper type to force setting at least one value in an array\ntype ArrayOneOrMore<T> = {\n  0: T;\n} & Array<T>;\n\n/**\n * @param {number[]} chains - The Chains your app intents to use and the peer MUST support. If the peer does not support these chains, the connection will be rejected.\n * @param {number[]} optionalChains - The Chains your app MAY attempt to use and the peer MAY support. If the peer does not support these chains, the connection will still be established.\n * @description either chains or optionalChains must be provided\n */\nexport type ChainsProps =\n  | {\n      chains: ArrayOneOrMore<number>;\n      optionalChains?: number[];\n    }\n  | {\n      chains?: number[];\n      optionalChains: ArrayOneOrMore<number>;\n    };\n\nexport type EthereumProviderOptions = {\n  projectId: string;\n  /**\n   * @note Methods that your app intents to use and the peer MUST support. If the peer does not support these methods, the connection will be rejected.\n   * @default [\"eth_sendTransaction\", \"personal_sign\"]\n   */\n  methods?: string[];\n  /**\n   * @note Methods that your app MAY attempt to use and the peer MAY support. If the peer does not support these methods, the connection will still be established.\n   */\n  optionalMethods?: string[];\n  events?: string[];\n  optionalEvents?: string[];\n  rpcMap?: EthereumRpcMap;\n  metadata?: Metadata;\n  showQrModal: boolean;\n  qrModalOptions?: QrModalOptions;\n  disableProviderPing?: boolean;\n  relayUrl?: string;\n  storageOptions?: KeyValueStorageOptions;\n} & ChainsProps;\n\nexport class EthereumProvider implements IEthereumProvider {\n  public events = new EventEmitter();\n  public namespace = \"eip155\";\n  public accounts: string[] = [];\n  public signer: InstanceType<typeof UniversalProvider>;\n  public chainId = 1;\n  public modal?: WalletConnectModal;\n\n  protected rpc: EthereumRpcConfig;\n  protected readonly STORAGE_KEY = STORAGE_KEY;\n\n  constructor() {\n    // assigned during initialize\n    this.signer = {} as InstanceType<typeof UniversalProvider>;\n    this.rpc = {} as EthereumRpcConfig;\n  }\n\n  static async init(opts: EthereumProviderOptions): Promise<EthereumProvider> {\n    const provider = new EthereumProvider();\n    await provider.initialize(opts);\n    return provider;\n  }\n\n  public async request<T = unknown>(args: RequestArguments): Promise<T> {\n    return await this.signer.request(args, this.formatChainId(this.chainId));\n  }\n\n  public sendAsync(\n    args: RequestArguments,\n    callback: (error: Error | null, response: any) => void,\n  ): void {\n    this.signer.sendAsync(args, callback, this.formatChainId(this.chainId));\n  }\n\n  get connected(): boolean {\n    if (!this.signer.client) return false;\n    return this.signer.client.core.relayer.connected;\n  }\n\n  get connecting(): boolean {\n    if (!this.signer.client) return false;\n    return this.signer.client.core.relayer.connecting;\n  }\n\n  public async enable(): Promise<ProviderAccounts> {\n    if (!this.session) await this.connect();\n    const accounts = await this.request({ method: \"eth_requestAccounts\" });\n    return accounts as ProviderAccounts;\n  }\n\n  public async connect(opts?: ConnectOps): Promise<void> {\n    if (!this.signer.client) {\n      throw new Error(\"Provider not initialized. Call init() first\");\n    }\n\n    this.loadConnectOpts(opts);\n    const { required, optional } = buildNamespaces(this.rpc);\n    try {\n      const session = await new Promise<SessionTypes.Struct | undefined>(\n        async (resolve, reject) => {\n          if (this.rpc.showQrModal) {\n            this.modal?.subscribeModal((state) => {\n              // the modal was closed so reject the promise\n              if (!state.open && !this.signer.session) {\n                this.signer.abortPairingAttempt();\n                reject(new Error(\"Connection request reset. Please try again.\"));\n              }\n            });\n          }\n          await this.signer\n            .connect({\n              namespaces: {\n                ...(required && {\n                  [this.namespace]: required,\n                }),\n              },\n              ...(optional && {\n                optionalNamespaces: {\n                  [this.namespace]: optional,\n                },\n              }),\n              pairingTopic: opts?.pairingTopic,\n            })\n            .then((session) => {\n              resolve(session);\n            })\n            .catch((error: Error) => {\n              reject(new Error(error.message));\n            });\n        },\n      );\n      if (!session) return;\n\n      const accounts = getAccountsFromNamespaces(session.namespaces, [this.namespace]);\n      // if no required chains are set, use the approved accounts to fetch chainIds\n      this.setChainIds(this.rpc.chains.length ? this.rpc.chains : accounts);\n      this.setAccounts(accounts);\n      this.events.emit(\"connect\", { chainId: toHexChainId(this.chainId) });\n    } catch (error) {\n      this.signer.logger.error(error);\n      throw error;\n    } finally {\n      if (this.modal) this.modal.closeModal();\n    }\n  }\n\n  public async disconnect(): Promise<void> {\n    if (this.session) {\n      await this.signer.disconnect();\n    }\n    this.reset();\n  }\n\n  public on: IEthereumProviderEvents[\"on\"] = (event, listener) => {\n    this.events.on(event, listener);\n    return this;\n  };\n\n  public once: IEthereumProviderEvents[\"once\"] = (event, listener) => {\n    this.events.once(event, listener);\n    return this;\n  };\n\n  public removeListener: IEthereumProviderEvents[\"removeListener\"] = (event, listener) => {\n    this.events.removeListener(event, listener);\n    return this;\n  };\n\n  public off: IEthereumProviderEvents[\"off\"] = (event, listener) => {\n    this.events.off(event, listener);\n    return this;\n  };\n\n  get isWalletConnect() {\n    return true;\n  }\n\n  get session() {\n    return this.signer.session;\n  }\n\n  // ---------- Protected --------------------------------------------- //\n\n  protected registerEventListeners() {\n    this.signer.on(\"session_event\", (payload: SignClientTypes.EventArguments[\"session_event\"]) => {\n      const { params } = payload;\n      const { event } = params;\n      if (event.name === \"accountsChanged\") {\n        this.accounts = this.parseAccounts(event.data);\n        this.events.emit(\"accountsChanged\", this.accounts);\n      } else if (event.name === \"chainChanged\") {\n        this.setChainId(this.formatChainId(event.data));\n      } else {\n        this.events.emit(event.name as any, event.data);\n      }\n      this.events.emit(\"session_event\", payload);\n    });\n\n    this.signer.on(\"chainChanged\", (chainId: string) => {\n      const chain = parseInt(chainId);\n      this.chainId = chain;\n      this.events.emit(\"chainChanged\", toHexChainId(this.chainId));\n      this.persist();\n    });\n\n    this.signer.on(\n      \"session_update\",\n      (payload: SignClientTypes.EventArguments[\"session_update\"]) => {\n        this.events.emit(\"session_update\", payload);\n      },\n    );\n\n    this.signer.on(\n      \"session_delete\",\n      (payload: SignClientTypes.EventArguments[\"session_delete\"]) => {\n        this.reset();\n        this.events.emit(\"session_delete\", payload);\n        this.events.emit(\"disconnect\", {\n          ...getSdkError(\"USER_DISCONNECTED\"),\n          data: payload.topic,\n          name: \"USER_DISCONNECTED\",\n        });\n      },\n    );\n\n    this.signer.on(\"display_uri\", (uri: string) => {\n      if (this.rpc.showQrModal) {\n        // to refresh the QR we have to close the modal and open it again\n        // until proper API is provided by walletconnect modal\n        this.modal?.closeModal();\n        this.modal?.openModal({ uri });\n      }\n      this.events.emit(\"display_uri\", uri);\n    });\n  }\n\n  protected switchEthereumChain(chainId: number): void {\n    this.request({\n      method: \"wallet_switchEthereumChain\",\n      params: [{ chainId: chainId.toString(16) }],\n    });\n  }\n\n  protected isCompatibleChainId(chainId: string): boolean {\n    return typeof chainId === \"string\" ? chainId.startsWith(`${this.namespace}:`) : false;\n  }\n\n  protected formatChainId(chainId: number): string {\n    return `${this.namespace}:${chainId}`;\n  }\n\n  protected parseChainId(chainId: string): number {\n    return Number(chainId.split(\":\")[1]);\n  }\n\n  protected setChainIds(chains: string[]) {\n    const compatible = chains.filter((x) => this.isCompatibleChainId(x));\n    const chainIds = compatible.map((c) => this.parseChainId(c));\n    if (chainIds.length) {\n      this.chainId = chainIds[0];\n      this.events.emit(\"chainChanged\", toHexChainId(this.chainId));\n      this.persist();\n    }\n  }\n\n  protected setChainId(chain: string) {\n    if (this.isCompatibleChainId(chain)) {\n      const chainId = this.parseChainId(chain);\n      this.chainId = chainId;\n      this.switchEthereumChain(chainId);\n    }\n  }\n\n  protected parseAccountId(account: string): { chainId: string; address: string } {\n    const [namespace, reference, address] = account.split(\":\");\n    const chainId = `${namespace}:${reference}`;\n    return { chainId, address };\n  }\n\n  protected setAccounts(accounts: string[]) {\n    this.accounts = accounts\n      .filter((x) => this.parseChainId(this.parseAccountId(x).chainId) === this.chainId)\n      .map((x) => this.parseAccountId(x).address);\n    this.events.emit(\"accountsChanged\", this.accounts);\n  }\n\n  protected getRpcConfig(opts: EthereumProviderOptions): EthereumRpcConfig {\n    const requiredChains = opts?.chains ?? [];\n    const optionalChains = opts?.optionalChains ?? [];\n    const allChains = requiredChains.concat(optionalChains);\n    if (!allChains.length)\n      throw new Error(\"No chains specified in either `chains` or `optionalChains`\");\n    const requiredMethods = requiredChains.length ? opts?.methods || REQUIRED_METHODS : [];\n    const requiredEvents = requiredChains.length ? opts?.events || REQUIRED_EVENTS : [];\n    const optionalMethods = opts?.optionalMethods || [];\n    const optionalEvents = opts?.optionalEvents || [];\n    const rpcMap = opts?.rpcMap || this.buildRpcMap(allChains, opts.projectId);\n    const qrModalOptions = opts?.qrModalOptions || undefined;\n    return {\n      chains: requiredChains?.map((chain) => this.formatChainId(chain)),\n      optionalChains: optionalChains.map((chain) => this.formatChainId(chain)),\n      methods: requiredMethods,\n      events: requiredEvents,\n      optionalMethods,\n      optionalEvents,\n      rpcMap,\n      showQrModal: Boolean(opts?.showQrModal),\n      qrModalOptions,\n      projectId: opts.projectId,\n      metadata: opts.metadata,\n    };\n  }\n\n  protected buildRpcMap(chains: number[], projectId: string): EthereumRpcMap {\n    const map: EthereumRpcMap = {};\n    chains.forEach((chain) => {\n      map[chain] = this.getRpcUrl(chain, projectId);\n    });\n    return map;\n  }\n\n  protected async initialize(opts: EthereumProviderOptions) {\n    this.rpc = this.getRpcConfig(opts);\n    this.chainId = this.rpc.chains.length\n      ? getEthereumChainId(this.rpc.chains)\n      : getEthereumChainId(this.rpc.optionalChains);\n    this.signer = await UniversalProvider.init({\n      projectId: this.rpc.projectId,\n      metadata: this.rpc.metadata,\n      disableProviderPing: opts.disableProviderPing,\n      relayUrl: opts.relayUrl,\n      storageOptions: opts.storageOptions,\n    });\n    this.registerEventListeners();\n    await this.loadPersistedSession();\n    if (this.rpc.showQrModal) {\n      let WalletConnectModalClass;\n      try {\n        const { WalletConnectModal } = await import(\"@walletconnect/modal\");\n        WalletConnectModalClass = WalletConnectModal;\n      } catch {\n        throw new Error(\"To use QR modal, please install @walletconnect/modal package\");\n      }\n      if (WalletConnectModalClass) {\n        try {\n          this.modal = new WalletConnectModalClass({\n            walletConnectVersion: 2,\n            projectId: this.rpc.projectId,\n            standaloneChains: this.rpc.chains,\n            ...this.rpc.qrModalOptions,\n          });\n        } catch (e) {\n          this.signer.logger.error(e);\n          throw new Error(\"Could not generate WalletConnectModal Instance\");\n        }\n      }\n    }\n  }\n\n  protected loadConnectOpts(opts?: ConnectOps) {\n    if (!opts) return;\n    const { chains, optionalChains, rpcMap } = opts;\n    if (chains && isValidArray(chains)) {\n      this.rpc.chains = chains.map((chain) => this.formatChainId(chain));\n      chains.forEach((chain) => {\n        this.rpc.rpcMap[chain] = rpcMap?.[chain] || this.getRpcUrl(chain);\n      });\n    }\n    if (optionalChains && isValidArray(optionalChains)) {\n      this.rpc.optionalChains = [];\n      this.rpc.optionalChains = optionalChains?.map((chain) => this.formatChainId(chain));\n      optionalChains.forEach((chain) => {\n        this.rpc.rpcMap[chain] = rpcMap?.[chain] || this.getRpcUrl(chain);\n      });\n    }\n  }\n\n  protected getRpcUrl(chainId: number, projectId?: string): string {\n    const providedRpc = this.rpc.rpcMap?.[chainId];\n    return (\n      providedRpc ||\n      `${RPC_URL}?chainId=eip155:${chainId}&projectId=${projectId || this.rpc.projectId}`\n    );\n  }\n\n  protected async loadPersistedSession() {\n    if (!this.session) return;\n    const chainId = await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`);\n\n    // cater to both inline & nested namespace formats\n    const namespace = this.session.namespaces[`${this.namespace}:${chainId}`]\n      ? this.session.namespaces[`${this.namespace}:${chainId}`]\n      : this.session.namespaces[this.namespace];\n\n    this.setChainIds(chainId ? [this.formatChainId(chainId)] : namespace?.accounts);\n    this.setAccounts(namespace?.accounts);\n  }\n\n  protected reset() {\n    this.chainId = 1;\n    this.accounts = [];\n  }\n\n  protected persist() {\n    if (!this.session) return;\n    this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`, this.chainId);\n  }\n\n  protected parseAccounts(payload: string | string[]): string[] {\n    if (typeof payload === \"string\" || payload instanceof String) {\n      return [this.parseAccount(payload)];\n    }\n    return payload.map((account: string) => this.parseAccount(account));\n  }\n\n  protected parseAccount = (payload: any): string => {\n    return this.isCompatibleChainId(payload) ? this.parseAccountId(payload).address : payload;\n  };\n}\n\nexport default EthereumProvider;\n","import { EthereumProvider as Provider } from \"./EthereumProvider\";\nexport const EthereumProvider = Provider;\nexport type { EthereumProviderOptions, RpcEvent, RpcMethod } from \"./EthereumProvider\";\nexport * from \"./constants/rpc\";\nexport default Provider;\n"],"names":["chains","chainId","params","optionalChains","methods","optionalMethods","events","optionalEvents","rpcMap","isValidArray","required","REQUIRED_METHODS","REQUIRED_EVENTS","__spreadValues","eventsRequiringPermissions","event","methodsRequiringPermissions","shouldIncludeRequiredChains","optional","OPTIONAL_METHODS","OPTIONAL_EVENTS","EthereumProvider","EventEmitter","STORAGE_KEY","listener","payload","opts","provider","args","callback","session","resolve","reject","_a","state","__spreadProps","error","accounts","getAccountsFromNamespaces","chain","getSdkError","uri","_b","chainIds","x","c","account","namespace","reference","address","requiredChains","allChains","requiredMethods","requiredEvents","qrModalOptions","projectId","map","UniversalProvider","WalletConnectModalClass","WalletConnectModal","e","RPC_URL","Provider"],"mappings":"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"}