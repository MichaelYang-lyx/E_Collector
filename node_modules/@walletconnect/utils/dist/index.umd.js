(function(E,Oe){typeof exports=="object"&&typeof module<"u"?Oe(exports):typeof define=="function"&&define.amd?define(["exports"],Oe):(E=typeof globalThis<"u"?globalThis:E||self,Oe(E["@walletconnect/utils"]={}))})(this,function(E){"use strict";const Oe=":";function nr(e){const[t,r]=e.split(Oe);return{namespace:t,reference:r}}function ir(e){const{namespace:t,reference:r}=e;return[t,r].join(Oe)}function vt(e){const[t,r,i]=e.split(Oe);return{namespace:t,reference:r,address:i}}function ar(e){const{namespace:t,reference:r,address:i}=e;return[t,r,i].join(Oe)}function gt(e,t){const r=[];return e.forEach(i=>{const a=t(i);r.includes(a)||r.push(a)}),r}function or(e){const{address:t}=vt(e);return t}function sr(e){const{namespace:t,reference:r}=vt(e);return ir({namespace:t,reference:r})}function ii(e,t){const{namespace:r,reference:i}=nr(t);return ar({namespace:r,reference:i,address:e})}function ai(e){return gt(e,or)}function ur(e){return gt(e,sr)}function oi(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const a=e[i];r.push(...a.accounts)}),r}function si(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const a=e[i];r.push(...ur(a.accounts))}),r}function ui(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const a=e[i];r.push(...Ze(i,a))}),r}function Ze(e,t){return e.includes(":")?[e]:t.chains||[]}const et=e=>e?.split(":"),cr=e=>{const t=e&&et(e);if(t)return t[3]},ci=e=>{const t=e&&et(e);if(t)return t[2]+":"+t[3]},fr=e=>{const t=e&&et(e);if(t)return t.pop()},fi=(e,t)=>{const r=`${e.domain} wants you to sign in with your Ethereum account:`,i=fr(t),a=e.statement,s=`URI: ${e.aud}`,b=`Version: ${e.version}`,u=`Chain ID: ${cr(t)}`,d=`Nonce: ${e.nonce}`,h=`Issued At: ${e.iat}`,_=e.resources&&e.resources.length>0?`Resources:
${e.resources.map(g=>`- ${g}`).join(`
`)}`:void 0;return[r,i,"",a,"",s,b,u,d,h,_].filter(g=>g!=null).join(`
`)};function lr(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}),r}var yt={},tt={},F={},hr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(u,d){var h=u>>>16&65535,_=u&65535,g=d>>>16&65535,w=d&65535;return _*w+(h*w+_*g<<16>>>0)|0}e.mul=Math.imul||t;function r(u,d){return u+d|0}e.add=r;function i(u,d){return u-d|0}e.sub=i;function a(u,d){return u<<d|u>>>32-d}e.rotl=a;function s(u,d){return u<<32-d|u>>>d}e.rotr=s;function b(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u}e.isInteger=Number.isInteger||b,e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(u){return e.isInteger(u)&&u>=-e.MAX_SAFE_INTEGER&&u<=e.MAX_SAFE_INTEGER}})(hr),Object.defineProperty(F,"__esModule",{value:!0});var dr=hr;function li(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16}F.readInt16BE=li;function hi(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])>>>0}F.readUint16BE=hi;function di(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])<<16>>16}F.readInt16LE=di;function _i(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])>>>0}F.readUint16LE=_i;function _r(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}F.writeUint16BE=_r,F.writeInt16BE=_r;function Dr(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}F.writeUint16LE=Dr,F.writeInt16LE=Dr;function wt(e,t){return t===void 0&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}F.readInt32BE=wt;function mt(e,t){return t===void 0&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}F.readUint32BE=mt;function pt(e,t){return t===void 0&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}F.readInt32LE=pt;function St(e,t){return t===void 0&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}F.readUint32LE=St;function rt(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}F.writeUint32BE=rt,F.writeInt32BE=rt;function nt(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}F.writeUint32LE=nt,F.writeInt32LE=nt;function Di(e,t){t===void 0&&(t=0);var r=wt(e,t),i=wt(e,t+4);return r*4294967296+i-(i>>31)*4294967296}F.readInt64BE=Di;function bi(e,t){t===void 0&&(t=0);var r=mt(e,t),i=mt(e,t+4);return r*4294967296+i}F.readUint64BE=bi;function Ei(e,t){t===void 0&&(t=0);var r=pt(e,t),i=pt(e,t+4);return i*4294967296+r-(r>>31)*4294967296}F.readInt64LE=Ei;function vi(e,t){t===void 0&&(t=0);var r=St(e,t),i=St(e,t+4);return i*4294967296+r}F.readUint64LE=vi;function br(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),rt(e/4294967296>>>0,t,r),rt(e>>>0,t,r+4),t}F.writeUint64BE=br,F.writeInt64BE=br;function Er(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),nt(e>>>0,t,r),nt(e/4294967296>>>0,t,r+4),t}F.writeUint64LE=Er,F.writeInt64LE=Er;function gi(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,a=1,s=e/8+r-1;s>=r;s--)i+=t[s]*a,a*=256;return i}F.readUintBE=gi;function yi(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,a=1,s=r;s<r+e/8;s++)i+=t[s]*a,a*=256;return i}F.readUintLE=yi;function wi(e,t,r,i){if(r===void 0&&(r=new Uint8Array(e/8)),i===void 0&&(i=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!dr.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var a=1,s=e/8+i-1;s>=i;s--)r[s]=t/a&255,a*=256;return r}F.writeUintBE=wi;function mi(e,t,r,i){if(r===void 0&&(r=new Uint8Array(e/8)),i===void 0&&(i=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!dr.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var a=1,s=i;s<i+e/8;s++)r[s]=t/a&255,a*=256;return r}F.writeUintLE=mi;function pi(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t)}F.readFloat32BE=pi;function Si(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t,!0)}F.readFloat32LE=Si;function Oi(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t)}F.readFloat64BE=Oi;function Ni(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t,!0)}F.readFloat64LE=Ni;function Ci(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,e),t}F.writeFloat32BE=Ci;function Ai(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,e,!0),t}F.writeFloat32LE=Ai;function Ui(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,e),t}F.writeFloat64BE=Ui;function Ti(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,e,!0),t}F.writeFloat64LE=Ti;var ye={};Object.defineProperty(ye,"__esModule",{value:!0});function Ii(e){for(var t=0;t<e.length;t++)e[t]=0;return e}ye.wipe=Ii,Object.defineProperty(tt,"__esModule",{value:!0});var ee=F,Ot=ye,Ri=20;function Pi(e,t,r){for(var i=1634760805,a=857760878,s=2036477234,b=1797285236,u=r[3]<<24|r[2]<<16|r[1]<<8|r[0],d=r[7]<<24|r[6]<<16|r[5]<<8|r[4],h=r[11]<<24|r[10]<<16|r[9]<<8|r[8],_=r[15]<<24|r[14]<<16|r[13]<<8|r[12],g=r[19]<<24|r[18]<<16|r[17]<<8|r[16],w=r[23]<<24|r[22]<<16|r[21]<<8|r[20],y=r[27]<<24|r[26]<<16|r[25]<<8|r[24],m=r[31]<<24|r[30]<<16|r[29]<<8|r[28],S=t[3]<<24|t[2]<<16|t[1]<<8|t[0],p=t[7]<<24|t[6]<<16|t[5]<<8|t[4],U=t[11]<<24|t[10]<<16|t[9]<<8|t[8],D=t[15]<<24|t[14]<<16|t[13]<<8|t[12],v=i,c=a,f=s,l=b,n=u,o=d,O=h,C=_,T=g,M=w,L=y,j=m,R=S,P=p,N=U,I=D,G=0;G<Ri;G+=2)v=v+n|0,R^=v,R=R>>>32-16|R<<16,T=T+R|0,n^=T,n=n>>>32-12|n<<12,c=c+o|0,P^=c,P=P>>>32-16|P<<16,M=M+P|0,o^=M,o=o>>>32-12|o<<12,f=f+O|0,N^=f,N=N>>>32-16|N<<16,L=L+N|0,O^=L,O=O>>>32-12|O<<12,l=l+C|0,I^=l,I=I>>>32-16|I<<16,j=j+I|0,C^=j,C=C>>>32-12|C<<12,f=f+O|0,N^=f,N=N>>>32-8|N<<8,L=L+N|0,O^=L,O=O>>>32-7|O<<7,l=l+C|0,I^=l,I=I>>>32-8|I<<8,j=j+I|0,C^=j,C=C>>>32-7|C<<7,c=c+o|0,P^=c,P=P>>>32-8|P<<8,M=M+P|0,o^=M,o=o>>>32-7|o<<7,v=v+n|0,R^=v,R=R>>>32-8|R<<8,T=T+R|0,n^=T,n=n>>>32-7|n<<7,v=v+o|0,I^=v,I=I>>>32-16|I<<16,L=L+I|0,o^=L,o=o>>>32-12|o<<12,c=c+O|0,R^=c,R=R>>>32-16|R<<16,j=j+R|0,O^=j,O=O>>>32-12|O<<12,f=f+C|0,P^=f,P=P>>>32-16|P<<16,T=T+P|0,C^=T,C=C>>>32-12|C<<12,l=l+n|0,N^=l,N=N>>>32-16|N<<16,M=M+N|0,n^=M,n=n>>>32-12|n<<12,f=f+C|0,P^=f,P=P>>>32-8|P<<8,T=T+P|0,C^=T,C=C>>>32-7|C<<7,l=l+n|0,N^=l,N=N>>>32-8|N<<8,M=M+N|0,n^=M,n=n>>>32-7|n<<7,c=c+O|0,R^=c,R=R>>>32-8|R<<8,j=j+R|0,O^=j,O=O>>>32-7|O<<7,v=v+o|0,I^=v,I=I>>>32-8|I<<8,L=L+I|0,o^=L,o=o>>>32-7|o<<7;ee.writeUint32LE(v+i|0,e,0),ee.writeUint32LE(c+a|0,e,4),ee.writeUint32LE(f+s|0,e,8),ee.writeUint32LE(l+b|0,e,12),ee.writeUint32LE(n+u|0,e,16),ee.writeUint32LE(o+d|0,e,20),ee.writeUint32LE(O+h|0,e,24),ee.writeUint32LE(C+_|0,e,28),ee.writeUint32LE(T+g|0,e,32),ee.writeUint32LE(M+w|0,e,36),ee.writeUint32LE(L+y|0,e,40),ee.writeUint32LE(j+m|0,e,44),ee.writeUint32LE(R+S|0,e,48),ee.writeUint32LE(P+p|0,e,52),ee.writeUint32LE(N+U|0,e,56),ee.writeUint32LE(I+D|0,e,60)}function vr(e,t,r,i,a){if(a===void 0&&(a=0),e.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,b;if(a===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),b=s.length-t.length,s.set(t,b)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=t,b=a}for(var u=new Uint8Array(64),d=0;d<r.length;d+=64){Pi(u,s,e);for(var h=d;h<d+64&&h<r.length;h++)i[h]=r[h]^u[h-d];Mi(s,0,b)}return Ot.wipe(u),a===0&&Ot.wipe(s),i}tt.streamXOR=vr;function Fi(e,t,r,i){return i===void 0&&(i=0),Ot.wipe(r),vr(e,t,r,r,i)}tt.stream=Fi;function Mi(e,t,r){for(var i=1;r--;)i=i+(e[t]&255)|0,e[t]=i&255,i>>>=8,t++;if(i>0)throw new Error("ChaCha: counter overflow")}var gr={},Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});function ji(e,t,r){return~(e-1)&t|e-1&r}Ne.select=ji;function Li(e,t){return(e|0)-(t|0)-1>>>31&1}Ne.lessOrEqual=Li;function yr(e,t){if(e.length!==t.length)return 0;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return 1&r-1>>>8}Ne.compare=yr;function Bi(e,t){return e.length===0||t.length===0?!1:yr(e,t)!==0}Ne.equal=Bi,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Ne,r=ye;e.DIGEST_LENGTH=16;var i=function(){function b(u){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var d=u[0]|u[1]<<8;this._r[0]=d&8191;var h=u[2]|u[3]<<8;this._r[1]=(d>>>13|h<<3)&8191;var _=u[4]|u[5]<<8;this._r[2]=(h>>>10|_<<6)&7939;var g=u[6]|u[7]<<8;this._r[3]=(_>>>7|g<<9)&8191;var w=u[8]|u[9]<<8;this._r[4]=(g>>>4|w<<12)&255,this._r[5]=w>>>1&8190;var y=u[10]|u[11]<<8;this._r[6]=(w>>>14|y<<2)&8191;var m=u[12]|u[13]<<8;this._r[7]=(y>>>11|m<<5)&8065;var S=u[14]|u[15]<<8;this._r[8]=(m>>>8|S<<8)&8191,this._r[9]=S>>>5&127,this._pad[0]=u[16]|u[17]<<8,this._pad[1]=u[18]|u[19]<<8,this._pad[2]=u[20]|u[21]<<8,this._pad[3]=u[22]|u[23]<<8,this._pad[4]=u[24]|u[25]<<8,this._pad[5]=u[26]|u[27]<<8,this._pad[6]=u[28]|u[29]<<8,this._pad[7]=u[30]|u[31]<<8}return b.prototype._blocks=function(u,d,h){for(var _=this._fin?0:2048,g=this._h[0],w=this._h[1],y=this._h[2],m=this._h[3],S=this._h[4],p=this._h[5],U=this._h[6],D=this._h[7],v=this._h[8],c=this._h[9],f=this._r[0],l=this._r[1],n=this._r[2],o=this._r[3],O=this._r[4],C=this._r[5],T=this._r[6],M=this._r[7],L=this._r[8],j=this._r[9];h>=16;){var R=u[d+0]|u[d+1]<<8;g+=R&8191;var P=u[d+2]|u[d+3]<<8;w+=(R>>>13|P<<3)&8191;var N=u[d+4]|u[d+5]<<8;y+=(P>>>10|N<<6)&8191;var I=u[d+6]|u[d+7]<<8;m+=(N>>>7|I<<9)&8191;var G=u[d+8]|u[d+9]<<8;S+=(I>>>4|G<<12)&8191,p+=G>>>1&8191;var Q=u[d+10]|u[d+11]<<8;U+=(G>>>14|Q<<2)&8191;var J=u[d+12]|u[d+13]<<8;D+=(Q>>>11|J<<5)&8191;var X=u[d+14]|u[d+15]<<8;v+=(J>>>8|X<<8)&8191,c+=X>>>5|_;var A=0,B=A;B+=g*f,B+=w*(5*j),B+=y*(5*L),B+=m*(5*M),B+=S*(5*T),A=B>>>13,B&=8191,B+=p*(5*C),B+=U*(5*O),B+=D*(5*o),B+=v*(5*n),B+=c*(5*l),A+=B>>>13,B&=8191;var $=A;$+=g*l,$+=w*f,$+=y*(5*j),$+=m*(5*L),$+=S*(5*M),A=$>>>13,$&=8191,$+=p*(5*T),$+=U*(5*C),$+=D*(5*O),$+=v*(5*o),$+=c*(5*n),A+=$>>>13,$&=8191;var V=A;V+=g*n,V+=w*l,V+=y*f,V+=m*(5*j),V+=S*(5*L),A=V>>>13,V&=8191,V+=p*(5*M),V+=U*(5*T),V+=D*(5*C),V+=v*(5*O),V+=c*(5*o),A+=V>>>13,V&=8191;var H=A;H+=g*o,H+=w*n,H+=y*l,H+=m*f,H+=S*(5*j),A=H>>>13,H&=8191,H+=p*(5*L),H+=U*(5*M),H+=D*(5*T),H+=v*(5*C),H+=c*(5*O),A+=H>>>13,H&=8191;var K=A;K+=g*O,K+=w*o,K+=y*n,K+=m*l,K+=S*f,A=K>>>13,K&=8191,K+=p*(5*j),K+=U*(5*L),K+=D*(5*M),K+=v*(5*T),K+=c*(5*C),A+=K>>>13,K&=8191;var W=A;W+=g*C,W+=w*O,W+=y*o,W+=m*n,W+=S*l,A=W>>>13,W&=8191,W+=p*f,W+=U*(5*j),W+=D*(5*L),W+=v*(5*M),W+=c*(5*T),A+=W>>>13,W&=8191;var q=A;q+=g*T,q+=w*C,q+=y*O,q+=m*o,q+=S*n,A=q>>>13,q&=8191,q+=p*l,q+=U*f,q+=D*(5*j),q+=v*(5*L),q+=c*(5*M),A+=q>>>13,q&=8191;var Y=A;Y+=g*M,Y+=w*T,Y+=y*C,Y+=m*O,Y+=S*o,A=Y>>>13,Y&=8191,Y+=p*n,Y+=U*l,Y+=D*f,Y+=v*(5*j),Y+=c*(5*L),A+=Y>>>13,Y&=8191;var k=A;k+=g*L,k+=w*M,k+=y*T,k+=m*C,k+=S*O,A=k>>>13,k&=8191,k+=p*o,k+=U*n,k+=D*l,k+=v*f,k+=c*(5*j),A+=k>>>13,k&=8191;var x=A;x+=g*j,x+=w*L,x+=y*M,x+=m*T,x+=S*C,A=x>>>13,x&=8191,x+=p*O,x+=U*o,x+=D*n,x+=v*l,x+=c*f,A+=x>>>13,x&=8191,A=(A<<2)+A|0,A=A+B|0,B=A&8191,A=A>>>13,$+=A,g=B,w=$,y=V,m=H,S=K,p=W,U=q,D=Y,v=k,c=x,d+=16,h-=16}this._h[0]=g,this._h[1]=w,this._h[2]=y,this._h[3]=m,this._h[4]=S,this._h[5]=p,this._h[6]=U,this._h[7]=D,this._h[8]=v,this._h[9]=c},b.prototype.finish=function(u,d){d===void 0&&(d=0);var h=new Uint16Array(10),_,g,w,y;if(this._leftover){for(y=this._leftover,this._buffer[y++]=1;y<16;y++)this._buffer[y]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(_=this._h[1]>>>13,this._h[1]&=8191,y=2;y<10;y++)this._h[y]+=_,_=this._h[y]>>>13,this._h[y]&=8191;for(this._h[0]+=_*5,_=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=_,_=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=_,h[0]=this._h[0]+5,_=h[0]>>>13,h[0]&=8191,y=1;y<10;y++)h[y]=this._h[y]+_,_=h[y]>>>13,h[y]&=8191;for(h[9]-=8192,g=(_^1)-1,y=0;y<10;y++)h[y]&=g;for(g=~g,y=0;y<10;y++)this._h[y]=this._h[y]&g|h[y];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,w=this._h[0]+this._pad[0],this._h[0]=w&65535,y=1;y<8;y++)w=(this._h[y]+this._pad[y]|0)+(w>>>16)|0,this._h[y]=w&65535;return u[d+0]=this._h[0]>>>0,u[d+1]=this._h[0]>>>8,u[d+2]=this._h[1]>>>0,u[d+3]=this._h[1]>>>8,u[d+4]=this._h[2]>>>0,u[d+5]=this._h[2]>>>8,u[d+6]=this._h[3]>>>0,u[d+7]=this._h[3]>>>8,u[d+8]=this._h[4]>>>0,u[d+9]=this._h[4]>>>8,u[d+10]=this._h[5]>>>0,u[d+11]=this._h[5]>>>8,u[d+12]=this._h[6]>>>0,u[d+13]=this._h[6]>>>8,u[d+14]=this._h[7]>>>0,u[d+15]=this._h[7]>>>8,this._finished=!0,this},b.prototype.update=function(u){var d=0,h=u.length,_;if(this._leftover){_=16-this._leftover,_>h&&(_=h);for(var g=0;g<_;g++)this._buffer[this._leftover+g]=u[d+g];if(h-=_,d+=_,this._leftover+=_,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(h>=16&&(_=h-h%16,this._blocks(u,d,_),d+=_,h-=_),h){for(var g=0;g<h;g++)this._buffer[this._leftover+g]=u[d+g];this._leftover+=h}return this},b.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var u=new Uint8Array(16);return this.finish(u),u},b.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},b}();e.Poly1305=i;function a(b,u){var d=new i(b);d.update(u);var h=d.digest();return d.clean(),h}e.oneTimeAuth=a;function s(b,u){return b.length!==e.DIGEST_LENGTH||u.length!==e.DIGEST_LENGTH?!1:t.equal(b,u)}e.equal=s}(gr),function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=tt,r=gr,i=ye,a=F,s=Ne;e.KEY_LENGTH=32,e.NONCE_LENGTH=12,e.TAG_LENGTH=16;var b=new Uint8Array(16),u=function(){function d(h){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,h.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(h)}return d.prototype.seal=function(h,_,g,w){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var y=new Uint8Array(16);y.set(h,y.length-h.length);var m=new Uint8Array(32);t.stream(this._key,y,m,4);var S=_.length+this.tagLength,p;if(w){if(w.length!==S)throw new Error("ChaCha20Poly1305: incorrect destination length");p=w}else p=new Uint8Array(S);return t.streamXOR(this._key,y,_,p,4),this._authenticate(p.subarray(p.length-this.tagLength,p.length),m,p.subarray(0,p.length-this.tagLength),g),i.wipe(y),p},d.prototype.open=function(h,_,g,w){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(_.length<this.tagLength)return null;var y=new Uint8Array(16);y.set(h,y.length-h.length);var m=new Uint8Array(32);t.stream(this._key,y,m,4);var S=new Uint8Array(this.tagLength);if(this._authenticate(S,m,_.subarray(0,_.length-this.tagLength),g),!s.equal(S,_.subarray(_.length-this.tagLength,_.length)))return null;var p=_.length-this.tagLength,U;if(w){if(w.length!==p)throw new Error("ChaCha20Poly1305: incorrect destination length");U=w}else U=new Uint8Array(p);return t.streamXOR(this._key,y,_.subarray(0,_.length-this.tagLength),U,4),i.wipe(y),U},d.prototype.clean=function(){return i.wipe(this._key),this},d.prototype._authenticate=function(h,_,g,w){var y=new r.Poly1305(_);w&&(y.update(w),w.length%16>0&&y.update(b.subarray(w.length%16))),y.update(g),g.length%16>0&&y.update(b.subarray(g.length%16));var m=new Uint8Array(8);w&&a.writeUint64LE(w.length,m),y.update(m),a.writeUint64LE(g.length,m),y.update(m);for(var S=y.digest(),p=0;p<S.length;p++)h[p]=S[p];y.clean(),i.wipe(S),i.wipe(m)},d}();e.ChaCha20Poly1305=u}(yt);var wr={},Ke={},Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});function $i(e){return typeof e.saveState<"u"&&typeof e.restoreState<"u"&&typeof e.cleanSavedState<"u"}Nt.isSerializableHash=$i,Object.defineProperty(Ke,"__esModule",{value:!0});var pe=Nt,Vi=Ne,Hi=ye,mr=function(){function e(t,r){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(i).clean():i.set(r);for(var a=0;a<i.length;a++)i[a]^=54;this._inner.update(i);for(var a=0;a<i.length;a++)i[a]^=106;this._outer.update(i),pe.isSerializableHash(this._inner)&&pe.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Hi.wipe(i)}return e.prototype.reset=function(){if(!pe.isSerializableHash(this._inner)||!pe.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){pe.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),pe.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(t){return this._inner.update(t),this},e.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},e.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},e.prototype.saveState=function(){if(!pe.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(t){if(!pe.isSerializableHash(this._inner)||!pe.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(t){if(!pe.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},e}();Ke.HMAC=mr;function Ki(e,t,r){var i=new mr(e,t);i.update(r);var a=i.digest();return i.clean(),a}Ke.hmac=Ki,Ke.equal=Vi.equal,Object.defineProperty(wr,"__esModule",{value:!0});var pr=Ke,Sr=ye,Wi=function(){function e(t,r,i,a){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=a;var s=pr.hmac(this._hash,i,r);this._hmac=new pr.HMAC(t,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(t){for(var r=new Uint8Array(t),i=0;i<r.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[i]=this._buffer[this._bufpos++];return r},e.prototype.clean=function(){this._hmac.clean(),Sr.wipe(this._buffer),Sr.wipe(this._counter),this._bufpos=0},e}(),qi=wr.HKDF=Wi,it={},at={},ot={};Object.defineProperty(ot,"__esModule",{value:!0}),ot.BrowserRandomSource=void 0;const Or=65536;class zi{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(t);for(let i=0;i<r.length;i+=Or)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,Or)));return r}}ot.BrowserRandomSource=zi;function Yi(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var st={},ki={},Gi=Object.freeze({__proto__:null,default:ki}),xi=lr(Gi);Object.defineProperty(st,"__esModule",{value:!0}),st.NodeRandomSource=void 0;const Xi=ye;class Ji{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Yi<"u"){const t=xi;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const i=new Uint8Array(t);for(let a=0;a<i.length;a++)i[a]=r[a];return(0,Xi.wipe)(r),i}}st.NodeRandomSource=Ji,Object.defineProperty(at,"__esModule",{value:!0}),at.SystemRandomSource=void 0;const Qi=ot,Zi=st;class ea{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Qi.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Zi.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}at.SystemRandomSource=ea,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.randomStringForEntropy=e.randomString=e.randomUint32=e.randomBytes=e.defaultRandomSource=void 0;const t=at,r=F,i=ye;e.defaultRandomSource=new t.SystemRandomSource;function a(h,_=e.defaultRandomSource){return _.randomBytes(h)}e.randomBytes=a;function s(h=e.defaultRandomSource){const _=a(4,h),g=(0,r.readUint32LE)(_);return(0,i.wipe)(_),g}e.randomUint32=s;const b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(h,_=b,g=e.defaultRandomSource){if(_.length<2)throw new Error("randomString charset is too short");if(_.length>256)throw new Error("randomString charset is too long");let w="";const y=_.length,m=256-256%y;for(;h>0;){const S=a(Math.ceil(h*256/m),g);for(let p=0;p<S.length&&h>0;p++){const U=S[p];U<m&&(w+=_.charAt(U%y),h--)}(0,i.wipe)(S)}return w}e.randomString=u;function d(h,_=b,g=e.defaultRandomSource){const w=Math.ceil(h/(Math.log(_.length)/Math.LN2));return u(w,_,g)}e.randomStringForEntropy=d}(it);var ut={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=F,r=ye;e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var i=function(){function u(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return u.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},u.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},u.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},u.prototype.update=function(d,h){if(h===void 0&&(h=d.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var _=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&h>0;)this._buffer[this._bufferLength++]=d[_++],h--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(_=s(this._temp,this._state,d,_,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=d[_++],h--;return this},u.prototype.finish=function(d){if(!this._finished){var h=this._bytesHashed,_=this._bufferLength,g=h/536870912|0,w=h<<3,y=h%64<56?64:128;this._buffer[_]=128;for(var m=_+1;m<y-8;m++)this._buffer[m]=0;t.writeUint32BE(g,this._buffer,y-8),t.writeUint32BE(w,this._buffer,y-4),s(this._temp,this._state,this._buffer,0,y),this._finished=!0}for(var m=0;m<this.digestLength/4;m++)t.writeUint32BE(this._state[m],d,m*4);return this},u.prototype.digest=function(){var d=new Uint8Array(this.digestLength);return this.finish(d),d},u.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},u.prototype.restoreState=function(d){return this._state.set(d.state),this._bufferLength=d.bufferLength,d.buffer&&this._buffer.set(d.buffer),this._bytesHashed=d.bytesHashed,this._finished=!1,this},u.prototype.cleanSavedState=function(d){r.wipe(d.state),d.buffer&&r.wipe(d.buffer),d.bufferLength=0,d.bytesHashed=0},u}();e.SHA256=i;var a=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(u,d,h,_,g){for(;g>=64;){for(var w=d[0],y=d[1],m=d[2],S=d[3],p=d[4],U=d[5],D=d[6],v=d[7],c=0;c<16;c++){var f=_+c*4;u[c]=t.readUint32BE(h,f)}for(var c=16;c<64;c++){var l=u[c-2],n=(l>>>17|l<<32-17)^(l>>>19|l<<32-19)^l>>>10;l=u[c-15];var o=(l>>>7|l<<32-7)^(l>>>18|l<<32-18)^l>>>3;u[c]=(n+u[c-7]|0)+(o+u[c-16]|0)}for(var c=0;c<64;c++){var n=(((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&U^~p&D)|0)+(v+(a[c]+u[c]|0)|0)|0,o=((w>>>2|w<<32-2)^(w>>>13|w<<32-13)^(w>>>22|w<<32-22))+(w&y^w&m^y&m)|0;v=D,D=U,U=p,p=S+n|0,S=m,m=y,y=w,w=n+o|0}d[0]+=w,d[1]+=y,d[2]+=m,d[3]+=S,d[4]+=p,d[5]+=U,d[6]+=D,d[7]+=v,_+=64,g-=64}return _}function b(u){var d=new i;d.update(u);var h=d.digest();return d.clean(),h}e.hash=b})(ut);var Ct={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sharedKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.scalarMultBase=e.scalarMult=e.SHARED_KEY_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=void 0;const t=it,r=ye;e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=32,e.SHARED_KEY_LENGTH=32;function i(c){const f=new Float64Array(16);if(c)for(let l=0;l<c.length;l++)f[l]=c[l];return f}const a=new Uint8Array(32);a[0]=9;const s=i([56129,1]);function b(c){let f=1;for(let l=0;l<16;l++){let n=c[l]+f+65535;f=Math.floor(n/65536),c[l]=n-f*65536}c[0]+=f-1+37*(f-1)}function u(c,f,l){const n=~(l-1);for(let o=0;o<16;o++){const O=n&(c[o]^f[o]);c[o]^=O,f[o]^=O}}function d(c,f){const l=i(),n=i();for(let o=0;o<16;o++)n[o]=f[o];b(n),b(n),b(n);for(let o=0;o<2;o++){l[0]=n[0]-65517;for(let C=1;C<15;C++)l[C]=n[C]-65535-(l[C-1]>>16&1),l[C-1]&=65535;l[15]=n[15]-32767-(l[14]>>16&1);const O=l[15]>>16&1;l[14]&=65535,u(n,l,1-O)}for(let o=0;o<16;o++)c[2*o]=n[o]&255,c[2*o+1]=n[o]>>8}function h(c,f){for(let l=0;l<16;l++)c[l]=f[2*l]+(f[2*l+1]<<8);c[15]&=32767}function _(c,f,l){for(let n=0;n<16;n++)c[n]=f[n]+l[n]}function g(c,f,l){for(let n=0;n<16;n++)c[n]=f[n]-l[n]}function w(c,f,l){let n,o,O=0,C=0,T=0,M=0,L=0,j=0,R=0,P=0,N=0,I=0,G=0,Q=0,J=0,X=0,A=0,B=0,$=0,V=0,H=0,K=0,W=0,q=0,Y=0,k=0,x=0,Le=0,He=0,Qe=0,Et=0,rr=0,ni=0,te=l[0],re=l[1],ne=l[2],ie=l[3],ae=l[4],oe=l[5],se=l[6],ue=l[7],ce=l[8],fe=l[9],le=l[10],he=l[11],de=l[12],_e=l[13],De=l[14],be=l[15];n=f[0],O+=n*te,C+=n*re,T+=n*ne,M+=n*ie,L+=n*ae,j+=n*oe,R+=n*se,P+=n*ue,N+=n*ce,I+=n*fe,G+=n*le,Q+=n*he,J+=n*de,X+=n*_e,A+=n*De,B+=n*be,n=f[1],C+=n*te,T+=n*re,M+=n*ne,L+=n*ie,j+=n*ae,R+=n*oe,P+=n*se,N+=n*ue,I+=n*ce,G+=n*fe,Q+=n*le,J+=n*he,X+=n*de,A+=n*_e,B+=n*De,$+=n*be,n=f[2],T+=n*te,M+=n*re,L+=n*ne,j+=n*ie,R+=n*ae,P+=n*oe,N+=n*se,I+=n*ue,G+=n*ce,Q+=n*fe,J+=n*le,X+=n*he,A+=n*de,B+=n*_e,$+=n*De,V+=n*be,n=f[3],M+=n*te,L+=n*re,j+=n*ne,R+=n*ie,P+=n*ae,N+=n*oe,I+=n*se,G+=n*ue,Q+=n*ce,J+=n*fe,X+=n*le,A+=n*he,B+=n*de,$+=n*_e,V+=n*De,H+=n*be,n=f[4],L+=n*te,j+=n*re,R+=n*ne,P+=n*ie,N+=n*ae,I+=n*oe,G+=n*se,Q+=n*ue,J+=n*ce,X+=n*fe,A+=n*le,B+=n*he,$+=n*de,V+=n*_e,H+=n*De,K+=n*be,n=f[5],j+=n*te,R+=n*re,P+=n*ne,N+=n*ie,I+=n*ae,G+=n*oe,Q+=n*se,J+=n*ue,X+=n*ce,A+=n*fe,B+=n*le,$+=n*he,V+=n*de,H+=n*_e,K+=n*De,W+=n*be,n=f[6],R+=n*te,P+=n*re,N+=n*ne,I+=n*ie,G+=n*ae,Q+=n*oe,J+=n*se,X+=n*ue,A+=n*ce,B+=n*fe,$+=n*le,V+=n*he,H+=n*de,K+=n*_e,W+=n*De,q+=n*be,n=f[7],P+=n*te,N+=n*re,I+=n*ne,G+=n*ie,Q+=n*ae,J+=n*oe,X+=n*se,A+=n*ue,B+=n*ce,$+=n*fe,V+=n*le,H+=n*he,K+=n*de,W+=n*_e,q+=n*De,Y+=n*be,n=f[8],N+=n*te,I+=n*re,G+=n*ne,Q+=n*ie,J+=n*ae,X+=n*oe,A+=n*se,B+=n*ue,$+=n*ce,V+=n*fe,H+=n*le,K+=n*he,W+=n*de,q+=n*_e,Y+=n*De,k+=n*be,n=f[9],I+=n*te,G+=n*re,Q+=n*ne,J+=n*ie,X+=n*ae,A+=n*oe,B+=n*se,$+=n*ue,V+=n*ce,H+=n*fe,K+=n*le,W+=n*he,q+=n*de,Y+=n*_e,k+=n*De,x+=n*be,n=f[10],G+=n*te,Q+=n*re,J+=n*ne,X+=n*ie,A+=n*ae,B+=n*oe,$+=n*se,V+=n*ue,H+=n*ce,K+=n*fe,W+=n*le,q+=n*he,Y+=n*de,k+=n*_e,x+=n*De,Le+=n*be,n=f[11],Q+=n*te,J+=n*re,X+=n*ne,A+=n*ie,B+=n*ae,$+=n*oe,V+=n*se,H+=n*ue,K+=n*ce,W+=n*fe,q+=n*le,Y+=n*he,k+=n*de,x+=n*_e,Le+=n*De,He+=n*be,n=f[12],J+=n*te,X+=n*re,A+=n*ne,B+=n*ie,$+=n*ae,V+=n*oe,H+=n*se,K+=n*ue,W+=n*ce,q+=n*fe,Y+=n*le,k+=n*he,x+=n*de,Le+=n*_e,He+=n*De,Qe+=n*be,n=f[13],X+=n*te,A+=n*re,B+=n*ne,$+=n*ie,V+=n*ae,H+=n*oe,K+=n*se,W+=n*ue,q+=n*ce,Y+=n*fe,k+=n*le,x+=n*he,Le+=n*de,He+=n*_e,Qe+=n*De,Et+=n*be,n=f[14],A+=n*te,B+=n*re,$+=n*ne,V+=n*ie,H+=n*ae,K+=n*oe,W+=n*se,q+=n*ue,Y+=n*ce,k+=n*fe,x+=n*le,Le+=n*he,He+=n*de,Qe+=n*_e,Et+=n*De,rr+=n*be,n=f[15],B+=n*te,$+=n*re,V+=n*ne,H+=n*ie,K+=n*ae,W+=n*oe,q+=n*se,Y+=n*ue,k+=n*ce,x+=n*fe,Le+=n*le,He+=n*he,Qe+=n*de,Et+=n*_e,rr+=n*De,ni+=n*be,O+=38*$,C+=38*V,T+=38*H,M+=38*K,L+=38*W,j+=38*q,R+=38*Y,P+=38*k,N+=38*x,I+=38*Le,G+=38*He,Q+=38*Qe,J+=38*Et,X+=38*rr,A+=38*ni,o=1,n=O+o+65535,o=Math.floor(n/65536),O=n-o*65536,n=C+o+65535,o=Math.floor(n/65536),C=n-o*65536,n=T+o+65535,o=Math.floor(n/65536),T=n-o*65536,n=M+o+65535,o=Math.floor(n/65536),M=n-o*65536,n=L+o+65535,o=Math.floor(n/65536),L=n-o*65536,n=j+o+65535,o=Math.floor(n/65536),j=n-o*65536,n=R+o+65535,o=Math.floor(n/65536),R=n-o*65536,n=P+o+65535,o=Math.floor(n/65536),P=n-o*65536,n=N+o+65535,o=Math.floor(n/65536),N=n-o*65536,n=I+o+65535,o=Math.floor(n/65536),I=n-o*65536,n=G+o+65535,o=Math.floor(n/65536),G=n-o*65536,n=Q+o+65535,o=Math.floor(n/65536),Q=n-o*65536,n=J+o+65535,o=Math.floor(n/65536),J=n-o*65536,n=X+o+65535,o=Math.floor(n/65536),X=n-o*65536,n=A+o+65535,o=Math.floor(n/65536),A=n-o*65536,n=B+o+65535,o=Math.floor(n/65536),B=n-o*65536,O+=o-1+37*(o-1),o=1,n=O+o+65535,o=Math.floor(n/65536),O=n-o*65536,n=C+o+65535,o=Math.floor(n/65536),C=n-o*65536,n=T+o+65535,o=Math.floor(n/65536),T=n-o*65536,n=M+o+65535,o=Math.floor(n/65536),M=n-o*65536,n=L+o+65535,o=Math.floor(n/65536),L=n-o*65536,n=j+o+65535,o=Math.floor(n/65536),j=n-o*65536,n=R+o+65535,o=Math.floor(n/65536),R=n-o*65536,n=P+o+65535,o=Math.floor(n/65536),P=n-o*65536,n=N+o+65535,o=Math.floor(n/65536),N=n-o*65536,n=I+o+65535,o=Math.floor(n/65536),I=n-o*65536,n=G+o+65535,o=Math.floor(n/65536),G=n-o*65536,n=Q+o+65535,o=Math.floor(n/65536),Q=n-o*65536,n=J+o+65535,o=Math.floor(n/65536),J=n-o*65536,n=X+o+65535,o=Math.floor(n/65536),X=n-o*65536,n=A+o+65535,o=Math.floor(n/65536),A=n-o*65536,n=B+o+65535,o=Math.floor(n/65536),B=n-o*65536,O+=o-1+37*(o-1),c[0]=O,c[1]=C,c[2]=T,c[3]=M,c[4]=L,c[5]=j,c[6]=R,c[7]=P,c[8]=N,c[9]=I,c[10]=G,c[11]=Q,c[12]=J,c[13]=X,c[14]=A,c[15]=B}function y(c,f){w(c,f,f)}function m(c,f){const l=i();for(let n=0;n<16;n++)l[n]=f[n];for(let n=253;n>=0;n--)y(l,l),n!==2&&n!==4&&w(l,l,f);for(let n=0;n<16;n++)c[n]=l[n]}function S(c,f){const l=new Uint8Array(32),n=new Float64Array(80),o=i(),O=i(),C=i(),T=i(),M=i(),L=i();for(let N=0;N<31;N++)l[N]=c[N];l[31]=c[31]&127|64,l[0]&=248,h(n,f);for(let N=0;N<16;N++)O[N]=n[N];o[0]=T[0]=1;for(let N=254;N>=0;--N){const I=l[N>>>3]>>>(N&7)&1;u(o,O,I),u(C,T,I),_(M,o,C),g(o,o,C),_(C,O,T),g(O,O,T),y(T,M),y(L,o),w(o,C,o),w(C,O,M),_(M,o,C),g(o,o,C),y(O,o),g(C,T,L),w(o,C,s),_(o,o,T),w(C,C,o),w(o,T,L),w(T,O,n),y(O,M),u(o,O,I),u(C,T,I)}for(let N=0;N<16;N++)n[N+16]=o[N],n[N+32]=C[N],n[N+48]=O[N],n[N+64]=T[N];const j=n.subarray(32),R=n.subarray(16);m(j,j),w(R,R,j);const P=new Uint8Array(32);return d(P,R),P}e.scalarMult=S;function p(c){return S(c,a)}e.scalarMultBase=p;function U(c){if(c.length!==e.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${e.SECRET_KEY_LENGTH} bytes`);const f=new Uint8Array(c);return{publicKey:p(f),secretKey:f}}e.generateKeyPairFromSeed=U;function D(c){const f=(0,t.randomBytes)(32,c),l=U(f);return(0,r.wipe)(f),l}e.generateKeyPair=D;function v(c,f,l=!1){if(c.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(f.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const n=S(c,f);if(l){let o=0;for(let O=0;O<n.length;O++)o|=n[O];if(o===0)throw new Error("X25519: invalid shared key")}return n}e.sharedKey=v})(Ct);function At(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Nr(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?At(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Cr(e,t){t||(t=e.reduce((a,s)=>a+s.length,0));const r=Nr(t);let i=0;for(const a of e)r.set(a,i),i+=a.length;return At(r)}function ta(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var a=0;a<e.length;a++){var s=e.charAt(a),b=s.charCodeAt(0);if(r[b]!==255)throw new TypeError(s+" is ambiguous");r[b]=a}var u=e.length,d=e.charAt(0),h=Math.log(u)/Math.log(256),_=Math.log(256)/Math.log(u);function g(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var S=0,p=0,U=0,D=m.length;U!==D&&m[U]===0;)U++,S++;for(var v=(D-U)*_+1>>>0,c=new Uint8Array(v);U!==D;){for(var f=m[U],l=0,n=v-1;(f!==0||l<p)&&n!==-1;n--,l++)f+=256*c[n]>>>0,c[n]=f%u>>>0,f=f/u>>>0;if(f!==0)throw new Error("Non-zero carry");p=l,U++}for(var o=v-p;o!==v&&c[o]===0;)o++;for(var O=d.repeat(S);o<v;++o)O+=e.charAt(c[o]);return O}function w(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var S=0;if(m[S]!==" "){for(var p=0,U=0;m[S]===d;)p++,S++;for(var D=(m.length-S)*h+1>>>0,v=new Uint8Array(D);m[S];){var c=r[m.charCodeAt(S)];if(c===255)return;for(var f=0,l=D-1;(c!==0||f<U)&&l!==-1;l--,f++)c+=u*v[l]>>>0,v[l]=c%256>>>0,c=c/256>>>0;if(c!==0)throw new Error("Non-zero carry");U=f,S++}if(m[S]!==" "){for(var n=D-U;n!==D&&v[n]===0;)n++;for(var o=new Uint8Array(p+(D-n)),O=p;n!==D;)o[O++]=v[n++];return o}}}function y(m){var S=w(m);if(S)return S;throw new Error(`Non-${t} character`)}return{encode:g,decodeUnsafe:w,decode:y}}var ra=ta,na=ra;const Ar=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},ia=e=>new TextEncoder().encode(e),aa=e=>new TextDecoder().decode(e);class oa{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class sa{constructor(t,r,i){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Ur(this,t)}}class ua{constructor(t){this.decoders=t}or(t){return Ur(this,t)}decode(t){const r=t[0],i=this.decoders[r];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ur=(e,t)=>new ua({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class ca{constructor(t,r,i,a){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=a,this.encoder=new oa(t,r,i),this.decoder=new sa(t,r,a)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const ct=({name:e,prefix:t,encode:r,decode:i})=>new ca(e,t,r,i),We=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:a}=na(r,t);return ct({prefix:e,name:t,encode:i,decode:s=>Ar(a(s))})},fa=(e,t,r,i)=>{const a={};for(let _=0;_<t.length;++_)a[t[_]]=_;let s=e.length;for(;e[s-1]==="=";)--s;const b=new Uint8Array(s*r/8|0);let u=0,d=0,h=0;for(let _=0;_<s;++_){const g=a[e[_]];if(g===void 0)throw new SyntaxError(`Non-${i} character`);d=d<<r|g,u+=r,u>=8&&(u-=8,b[h++]=255&d>>u)}if(u>=r||255&d<<8-u)throw new SyntaxError("Unexpected end of data");return b},la=(e,t,r)=>{const i=t[t.length-1]==="=",a=(1<<r)-1;let s="",b=0,u=0;for(let d=0;d<e.length;++d)for(u=u<<8|e[d],b+=8;b>r;)b-=r,s+=t[a&u>>b];if(b&&(s+=t[a&u<<r-b]),i)for(;s.length*r&7;)s+="=";return s},Z=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>ct({prefix:t,name:e,encode(a){return la(a,i,r)},decode(a){return fa(a,i,r,e)}}),ha=ct({prefix:"\0",name:"identity",encode:e=>aa(e),decode:e=>ia(e)});var da=Object.freeze({__proto__:null,identity:ha});const _a=Z({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Da=Object.freeze({__proto__:null,base2:_a});const ba=Z({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ea=Object.freeze({__proto__:null,base8:ba});const va=We({prefix:"9",name:"base10",alphabet:"0123456789"});var ga=Object.freeze({__proto__:null,base10:va});const ya=Z({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),wa=Z({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ma=Object.freeze({__proto__:null,base16:ya,base16upper:wa});const pa=Z({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Sa=Z({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Oa=Z({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Na=Z({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ca=Z({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Aa=Z({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ua=Z({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ta=Z({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ia=Z({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ra=Object.freeze({__proto__:null,base32:pa,base32upper:Sa,base32pad:Oa,base32padupper:Na,base32hex:Ca,base32hexupper:Aa,base32hexpad:Ua,base32hexpadupper:Ta,base32z:Ia});const Pa=We({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Fa=We({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ma=Object.freeze({__proto__:null,base36:Pa,base36upper:Fa});const ja=We({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),La=We({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ba=Object.freeze({__proto__:null,base58btc:ja,base58flickr:La});const $a=Z({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Va=Z({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ha=Z({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ka=Z({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Wa=Object.freeze({__proto__:null,base64:$a,base64pad:Va,base64url:Ha,base64urlpad:Ka});const Tr=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),qa=Tr.reduce((e,t,r)=>(e[r]=t,e),[]),za=Tr.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function Ya(e){return e.reduce((t,r)=>(t+=qa[r],t),"")}function ka(e){const t=[];for(const r of e){const i=za[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}const Ga=ct({prefix:"\u{1F680}",name:"base256emoji",encode:Ya,decode:ka});var xa=Object.freeze({__proto__:null,base256emoji:Ga}),Xa=Rr,Ir=128,Ja=127,Qa=~Ja,Za=Math.pow(2,31);function Rr(e,t,r){t=t||[],r=r||0;for(var i=r;e>=Za;)t[r++]=e&255|Ir,e/=128;for(;e&Qa;)t[r++]=e&255|Ir,e>>>=7;return t[r]=e|0,Rr.bytes=r-i+1,t}var eo=Ut,to=128,Pr=127;function Ut(e,i){var r=0,i=i||0,a=0,s=i,b,u=e.length;do{if(s>=u)throw Ut.bytes=0,new RangeError("Could not decode varint");b=e[s++],r+=a<28?(b&Pr)<<a:(b&Pr)*Math.pow(2,a),a+=7}while(b>=to);return Ut.bytes=s-i,r}var ro=Math.pow(2,7),no=Math.pow(2,14),io=Math.pow(2,21),ao=Math.pow(2,28),oo=Math.pow(2,35),so=Math.pow(2,42),uo=Math.pow(2,49),co=Math.pow(2,56),fo=Math.pow(2,63),lo=function(e){return e<ro?1:e<no?2:e<io?3:e<ao?4:e<oo?5:e<so?6:e<uo?7:e<co?8:e<fo?9:10},ho={encode:Xa,decode:eo,encodingLength:lo},Fr=ho;const Mr=(e,t,r=0)=>(Fr.encode(e,t,r),t),jr=e=>Fr.encodingLength(e),Tt=(e,t)=>{const r=t.byteLength,i=jr(e),a=i+jr(r),s=new Uint8Array(a+r);return Mr(e,s,0),Mr(r,s,i),s.set(t,a),new _o(e,r,t,s)};class _o{constructor(t,r,i,a){this.code=t,this.size=r,this.digest=i,this.bytes=a}}const Lr=({name:e,code:t,encode:r})=>new Do(e,t,r);class Do{constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?Tt(this.code,r):r.then(i=>Tt(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Br=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),bo=Lr({name:"sha2-256",code:18,encode:Br("SHA-256")}),Eo=Lr({name:"sha2-512",code:19,encode:Br("SHA-512")});var vo=Object.freeze({__proto__:null,sha256:bo,sha512:Eo});const $r=0,go="identity",Vr=Ar;var yo=Object.freeze({__proto__:null,identity:{code:$r,name:go,encode:Vr,digest:e=>Tt($r,Vr(e))}});new TextEncoder,new TextDecoder;const Hr={...da,...Da,...Ea,...ga,...ma,...Ra,...Ma,...Ba,...Wa,...xa};({...vo,...yo});function Kr(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const Wr=Kr("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),It=Kr("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=Nr(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),qr={utf8:Wr,"utf-8":Wr,hex:Hr.base16,latin1:It,ascii:It,binary:It,...Hr};function we(e,t="utf8"){const r=qr[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?At(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function me(e,t="utf8"){const r=qr[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}const Rt="base10",Ee="base16",ft="base64pad",lt="utf8",Pt=0,Be=1,wo=0,zr=1,Ft=12,Mt=32;function mo(){const e=Ct.generateKeyPair();return{privateKey:me(e.secretKey,Ee),publicKey:me(e.publicKey,Ee)}}function po(){const e=it.randomBytes(Mt);return me(e,Ee)}function So(e,t){const r=Ct.sharedKey(we(e,Ee),we(t,Ee),!0),i=new qi(ut.SHA256,r).expand(Mt);return me(i,Ee)}function Oo(e){const t=ut.hash(we(e,Ee));return me(t,Ee)}function No(e){const t=ut.hash(we(e,lt));return me(t,Ee)}function Yr(e){return we(`${e}`,Rt)}function qe(e){return Number(me(e,Rt))}function Co(e){const t=Yr(typeof e.type<"u"?e.type:Pt);if(qe(t)===Be&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?we(e.senderPublicKey,Ee):void 0,i=typeof e.iv<"u"?we(e.iv,Ee):it.randomBytes(Ft),a=new yt.ChaCha20Poly1305(we(e.symKey,Ee)).seal(i,we(e.message,lt));return kr({type:t,sealed:a,iv:i,senderPublicKey:r})}function Ao(e){const t=new yt.ChaCha20Poly1305(we(e.symKey,Ee)),{sealed:r,iv:i}=jt(e.encoded),a=t.open(i,r);if(a===null)throw new Error("Failed to decrypt");return me(a,lt)}function kr(e){if(qe(e.type)===Be){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return me(Cr([e.type,e.senderPublicKey,e.iv,e.sealed]),ft)}return me(Cr([e.type,e.iv,e.sealed]),ft)}function jt(e){const t=we(e,ft),r=t.slice(wo,zr),i=zr;if(qe(r)===Be){const u=i+Mt,d=u+Ft,h=t.slice(i,u),_=t.slice(u,d),g=t.slice(d);return{type:r,sealed:g,iv:_,senderPublicKey:h}}const a=i+Ft,s=t.slice(i,a),b=t.slice(a);return{type:r,sealed:b,iv:s}}function Uo(e,t){const r=jt(e);return Gr({type:qe(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?me(r.senderPublicKey,Ee):void 0,receiverPublicKey:t?.receiverPublicKey})}function Gr(e){const t=e?.type||Pt;if(t===Be){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function To(e){return e.type===Be&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}var xr=function(e,t,r){if(r||arguments.length===2)for(var i=0,a=t.length,s;i<a;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))},Io=function(){function e(t,r,i){this.name=t,this.version=r,this.os=i,this.type="browser"}return e}(),Ro=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),Po=function(){function e(t,r,i,a){this.name=t,this.version=r,this.os=i,this.bot=a,this.type="bot-device"}return e}(),Fo=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),Mo=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),jo=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Lo=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Xr=3,Bo=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",jo]],Jr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function $o(e){return e?Qr(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Mo:typeof navigator<"u"?Qr(navigator.userAgent):Ko()}function Vo(e){return e!==""&&Bo.reduce(function(t,r){var i=r[0],a=r[1];if(t)return t;var s=a.exec(e);return!!s&&[i,s]},!1)}function Qr(e){var t=Vo(e);if(!t)return null;var r=t[0],i=t[1];if(r==="searchbot")return new Fo;var a=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);a?a.length<Xr&&(a=xr(xr([],a,!0),Wo(Xr-a.length),!0)):a=[];var s=a.join("."),b=Ho(e),u=Lo.exec(e);return u&&u[1]?new Po(r,s,b,u[1]):new Io(r,s,b)}function Ho(e){for(var t=0,r=Jr.length;t<r;t++){var i=Jr[t],a=i[0],s=i[1],b=s.exec(e);if(b)return a}return null}function Ko(){var e=typeof process<"u"&&process.version;return e?new Ro(process.version.slice(1)):null}function Wo(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}var Te={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Lt=function(e,t){return Lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},Lt(e,t)};function qo(e,t){Lt(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Bt=function(){return Bt=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Bt.apply(this,arguments)};function zo(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(r[i[a]]=e[i[a]]);return r}function Yo(e,t,r,i){var a=arguments.length,s=a<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,i);else for(var u=e.length-1;u>=0;u--)(b=e[u])&&(s=(a<3?b(s):a>3?b(t,r,s):b(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s}function ko(e,t){return function(r,i){t(r,i,e)}}function Go(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function xo(e,t,r,i){function a(s){return s instanceof r?s:new r(function(b){b(s)})}return new(r||(r=Promise))(function(s,b){function u(_){try{h(i.next(_))}catch(g){b(g)}}function d(_){try{h(i.throw(_))}catch(g){b(g)}}function h(_){_.done?s(_.value):a(_.value).then(u,d)}h((i=i.apply(e,t||[])).next())})}function Xo(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,b;return b={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function u(h){return function(_){return d([h,_])}}function d(h){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,a&&(s=h[0]&2?a.return:h[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,h[1])).done)return s;switch(a=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,a=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(_){h=[6,_],a=0}finally{i=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Jo(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}function Qo(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function $t(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zr(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),a,s=[],b;try{for(;(t===void 0||t-- >0)&&!(a=i.next()).done;)s.push(a.value)}catch(u){b={error:u}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(b)throw b.error}}return s}function Zo(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Zr(arguments[t]));return e}function es(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),a=0,t=0;t<r;t++)for(var s=arguments[t],b=0,u=s.length;b<u;b++,a++)i[a]=s[b];return i}function ze(e){return this instanceof ze?(this.v=e,this):new ze(e)}function ts(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),a,s=[];return a={},b("next"),b("throw"),b("return"),a[Symbol.asyncIterator]=function(){return this},a;function b(w){i[w]&&(a[w]=function(y){return new Promise(function(m,S){s.push([w,y,m,S])>1||u(w,y)})})}function u(w,y){try{d(i[w](y))}catch(m){g(s[0][3],m)}}function d(w){w.value instanceof ze?Promise.resolve(w.value.v).then(h,_):g(s[0][2],w)}function h(w){u("next",w)}function _(w){u("throw",w)}function g(w,y){w(y),s.shift(),s.length&&u(s[0][0],s[0][1])}}function rs(e){var t,r;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,s){t[a]=e[a]?function(b){return(r=!r)?{value:ze(e[a](b)),done:a==="return"}:s?s(b):b}:s}}function ns(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof $t=="function"?$t(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=e[s]&&function(b){return new Promise(function(u,d){b=e[s](b),a(u,d,b.done,b.value)})}}function a(s,b,u,d){Promise.resolve(d).then(function(h){s({value:h,done:u})},b)}}function is(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function as(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function os(e){return e&&e.__esModule?e:{default:e}}function ss(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function us(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}var cs=Object.freeze({__proto__:null,__extends:qo,get __assign(){return Bt},__rest:zo,__decorate:Yo,__param:ko,__metadata:Go,__awaiter:xo,__generator:Xo,__createBinding:Jo,__exportStar:Qo,__values:$t,__read:Zr,__spread:Zo,__spreadArrays:es,__await:ze,__asyncGenerator:ts,__asyncDelegator:rs,__asyncValues:ns,__makeTemplateObject:is,__importStar:as,__importDefault:os,__classPrivateFieldGet:ss,__classPrivateFieldSet:us}),ht=lr(cs),Vt={},Ye={},en;function fs(){if(en)return Ye;en=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.delay=void 0;function e(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return Ye.delay=e,Ye}var Ie={},Ht={},Re={},tn;function ls(){return tn||(tn=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.ONE_THOUSAND=Re.ONE_HUNDRED=void 0,Re.ONE_HUNDRED=100,Re.ONE_THOUSAND=1e3),Re}var Kt={},rn;function hs(){return rn||(rn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(Kt)),Kt}var nn;function an(){return nn||(nn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ht;t.__exportStar(ls(),e),t.__exportStar(hs(),e)}(Ht)),Ht}var on;function ds(){if(on)return Ie;on=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.fromMiliseconds=Ie.toMiliseconds=void 0;const e=an();function t(i){return i*e.ONE_THOUSAND}Ie.toMiliseconds=t;function r(i){return Math.floor(i/e.ONE_THOUSAND)}return Ie.fromMiliseconds=r,Ie}var sn;function _s(){return sn||(sn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ht;t.__exportStar(fs(),e),t.__exportStar(ds(),e)}(Vt)),Vt}var $e={},un;function Ds(){if(un)return $e;un=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const i=this.get(r);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const a=Date.now()-i.started;this.timestamps.set(r,{started:i.started,elapsed:a})}get(r){const i=this.timestamps.get(r);if(typeof i>"u")throw new Error(`No timestamp found for label: ${r}`);return i}elapsed(r){const i=this.get(r);return i.elapsed||Date.now()-i.started}}return $e.Watch=e,$e.default=e,$e}var Wt={},ke={},cn;function bs(){if(cn)return ke;cn=1,Object.defineProperty(ke,"__esModule",{value:!0}),ke.IWatch=void 0;class e{}return ke.IWatch=e,ke}var fn;function Es(){return fn||(fn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),ht.__exportStar(bs(),e)}(Wt)),Wt}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ht;t.__exportStar(_s(),e),t.__exportStar(Ds(),e),t.__exportStar(Es(),e),t.__exportStar(an(),e)})(Te);var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.getLocalStorage=z.getLocalStorageOrThrow=z.getCrypto=z.getCryptoOrThrow=zt=z.getLocation=z.getLocationOrThrow=qt=z.getNavigator=z.getNavigatorOrThrow=ln=z.getDocument=z.getDocumentOrThrow=z.getFromWindowOrThrow=z.getFromWindow=void 0;function Pe(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}z.getFromWindow=Pe;function Ve(e){const t=Pe(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}z.getFromWindowOrThrow=Ve;function vs(){return Ve("document")}z.getDocumentOrThrow=vs;function gs(){return Pe("document")}var ln=z.getDocument=gs;function ys(){return Ve("navigator")}z.getNavigatorOrThrow=ys;function ws(){return Pe("navigator")}var qt=z.getNavigator=ws;function ms(){return Ve("location")}z.getLocationOrThrow=ms;function ps(){return Pe("location")}var zt=z.getLocation=ps;function Ss(){return Ve("crypto")}z.getCryptoOrThrow=Ss;function Os(){return Pe("crypto")}z.getCrypto=Os;function Ns(){return Ve("localStorage")}z.getLocalStorageOrThrow=Ns;function Cs(){return Pe("localStorage")}z.getLocalStorage=Cs;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});var hn=Yt.getWindowMetadata=void 0;const dn=z;function As(){let e,t;try{e=dn.getDocumentOrThrow(),t=dn.getLocationOrThrow()}catch{return null}function r(){const g=e.getElementsByTagName("link"),w=[];for(let y=0;y<g.length;y++){const m=g[y],S=m.getAttribute("rel");if(S&&S.toLowerCase().indexOf("icon")>-1){const p=m.getAttribute("href");if(p)if(p.toLowerCase().indexOf("https:")===-1&&p.toLowerCase().indexOf("http:")===-1&&p.indexOf("//")!==0){let U=t.protocol+"//"+t.host;if(p.indexOf("/")===0)U+=p;else{const D=t.pathname.split("/");D.pop();const v=D.join("/");U+=v+"/"+p}w.push(U)}else if(p.indexOf("//")===0){const U=t.protocol+p;w.push(U)}else w.push(p)}}return w}function i(...g){const w=e.getElementsByTagName("meta");for(let y=0;y<w.length;y++){const m=w[y],S=["itemprop","property","name"].map(p=>m.getAttribute(p)).filter(p=>p?g.includes(p):!1);if(S.length&&S){const p=m.getAttribute("content");if(p)return p}}return""}function a(){let g=i("name","og:site_name","og:title","twitter:title");return g||(g=e.title),g}function s(){return i("description","og:description","twitter:description","keywords")}const b=a(),u=s(),d=t.origin,h=r();return{description:u,url:d,icons:h,name:b}}hn=Yt.getWindowMetadata=As;var Ge={},Us=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),_n="%[a-f0-9]{2}",Dn=new RegExp("("+_n+")|([^%]+?)","gi"),bn=new RegExp("("+_n+")+","gi");function kt(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],kt(r),kt(i))}function Ts(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(Dn)||[],r=1;r<t.length;r++)e=kt(t,r).join(""),t=e.match(Dn)||[];return e}}function Is(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=bn.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var i=Ts(r[0]);i!==r[0]&&(t[r[0]]=i)}r=bn.exec(e)}t["%C2"]="\uFFFD";for(var a=Object.keys(t),s=0;s<a.length;s++){var b=a[s];e=e.replace(new RegExp(b,"g"),t[b])}return e}var Rs=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return Is(e)}},Ps=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]},Fs=function(e,t){for(var r={},i=Object.keys(e),a=Array.isArray(t),s=0;s<i.length;s++){var b=i[s],u=e[b];(a?t.indexOf(b)!==-1:t(b,u,e))&&(r[b]=u)}return r};(function(e){const t=Us,r=Rs,i=Ps,a=Fs,s=D=>D==null,b=Symbol("encodeFragmentIdentifier");function u(D){switch(D.arrayFormat){case"index":return v=>(c,f)=>{const l=c.length;return f===void 0||D.skipNull&&f===null||D.skipEmptyString&&f===""?c:f===null?[...c,[_(v,D),"[",l,"]"].join("")]:[...c,[_(v,D),"[",_(l,D),"]=",_(f,D)].join("")]};case"bracket":return v=>(c,f)=>f===void 0||D.skipNull&&f===null||D.skipEmptyString&&f===""?c:f===null?[...c,[_(v,D),"[]"].join("")]:[...c,[_(v,D),"[]=",_(f,D)].join("")];case"colon-list-separator":return v=>(c,f)=>f===void 0||D.skipNull&&f===null||D.skipEmptyString&&f===""?c:f===null?[...c,[_(v,D),":list="].join("")]:[...c,[_(v,D),":list=",_(f,D)].join("")];case"comma":case"separator":case"bracket-separator":{const v=D.arrayFormat==="bracket-separator"?"[]=":"=";return c=>(f,l)=>l===void 0||D.skipNull&&l===null||D.skipEmptyString&&l===""?f:(l=l===null?"":l,f.length===0?[[_(c,D),v,_(l,D)].join("")]:[[f,_(l,D)].join(D.arrayFormatSeparator)])}default:return v=>(c,f)=>f===void 0||D.skipNull&&f===null||D.skipEmptyString&&f===""?c:f===null?[...c,_(v,D)]:[...c,[_(v,D),"=",_(f,D)].join("")]}}function d(D){let v;switch(D.arrayFormat){case"index":return(c,f,l)=>{if(v=/\[(\d*)\]$/.exec(c),c=c.replace(/\[\d*\]$/,""),!v){l[c]=f;return}l[c]===void 0&&(l[c]={}),l[c][v[1]]=f};case"bracket":return(c,f,l)=>{if(v=/(\[\])$/.exec(c),c=c.replace(/\[\]$/,""),!v){l[c]=f;return}if(l[c]===void 0){l[c]=[f];return}l[c]=[].concat(l[c],f)};case"colon-list-separator":return(c,f,l)=>{if(v=/(:list)$/.exec(c),c=c.replace(/:list$/,""),!v){l[c]=f;return}if(l[c]===void 0){l[c]=[f];return}l[c]=[].concat(l[c],f)};case"comma":case"separator":return(c,f,l)=>{const n=typeof f=="string"&&f.includes(D.arrayFormatSeparator),o=typeof f=="string"&&!n&&g(f,D).includes(D.arrayFormatSeparator);f=o?g(f,D):f;const O=n||o?f.split(D.arrayFormatSeparator).map(C=>g(C,D)):f===null?f:g(f,D);l[c]=O};case"bracket-separator":return(c,f,l)=>{const n=/(\[\])$/.test(c);if(c=c.replace(/\[\]$/,""),!n){l[c]=f&&g(f,D);return}const o=f===null?[]:f.split(D.arrayFormatSeparator).map(O=>g(O,D));if(l[c]===void 0){l[c]=o;return}l[c]=[].concat(l[c],o)};default:return(c,f,l)=>{if(l[c]===void 0){l[c]=f;return}l[c]=[].concat(l[c],f)}}}function h(D){if(typeof D!="string"||D.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function _(D,v){return v.encode?v.strict?t(D):encodeURIComponent(D):D}function g(D,v){return v.decode?r(D):D}function w(D){return Array.isArray(D)?D.sort():typeof D=="object"?w(Object.keys(D)).sort((v,c)=>Number(v)-Number(c)).map(v=>D[v]):D}function y(D){const v=D.indexOf("#");return v!==-1&&(D=D.slice(0,v)),D}function m(D){let v="";const c=D.indexOf("#");return c!==-1&&(v=D.slice(c)),v}function S(D){D=y(D);const v=D.indexOf("?");return v===-1?"":D.slice(v+1)}function p(D,v){return v.parseNumbers&&!Number.isNaN(Number(D))&&typeof D=="string"&&D.trim()!==""?D=Number(D):v.parseBooleans&&D!==null&&(D.toLowerCase()==="true"||D.toLowerCase()==="false")&&(D=D.toLowerCase()==="true"),D}function U(D,v){v=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},v),h(v.arrayFormatSeparator);const c=d(v),f=Object.create(null);if(typeof D!="string"||(D=D.trim().replace(/^[?#&]/,""),!D))return f;for(const l of D.split("&")){if(l==="")continue;let[n,o]=i(v.decode?l.replace(/\+/g," "):l,"=");o=o===void 0?null:["comma","separator","bracket-separator"].includes(v.arrayFormat)?o:g(o,v),c(g(n,v),o,f)}for(const l of Object.keys(f)){const n=f[l];if(typeof n=="object"&&n!==null)for(const o of Object.keys(n))n[o]=p(n[o],v);else f[l]=p(n,v)}return v.sort===!1?f:(v.sort===!0?Object.keys(f).sort():Object.keys(f).sort(v.sort)).reduce((l,n)=>{const o=f[n];return o&&typeof o=="object"&&!Array.isArray(o)?l[n]=w(o):l[n]=o,l},Object.create(null))}e.extract=S,e.parse=U,e.stringify=(D,v)=>{if(!D)return"";v=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},v),h(v.arrayFormatSeparator);const c=o=>v.skipNull&&s(D[o])||v.skipEmptyString&&D[o]==="",f=u(v),l={};for(const o of Object.keys(D))c(o)||(l[o]=D[o]);const n=Object.keys(l);return v.sort!==!1&&n.sort(v.sort),n.map(o=>{const O=D[o];return O===void 0?"":O===null?_(o,v):Array.isArray(O)?O.length===0&&v.arrayFormat==="bracket-separator"?_(o,v)+"[]":O.reduce(f(o),[]).join("&"):_(o,v)+"="+_(O,v)}).filter(o=>o.length>0).join("&")},e.parseUrl=(D,v)=>{v=Object.assign({decode:!0},v);const[c,f]=i(D,"#");return Object.assign({url:c.split("?")[0]||"",query:U(S(D),v)},v&&v.parseFragmentIdentifier&&f?{fragmentIdentifier:g(f,v)}:{})},e.stringifyUrl=(D,v)=>{v=Object.assign({encode:!0,strict:!0,[b]:!0},v);const c=y(D.url).split("?")[0]||"",f=e.extract(D.url),l=e.parse(f,{sort:!1}),n=Object.assign(l,D.query);let o=e.stringify(n,v);o&&(o=`?${o}`);let O=m(D.url);return D.fragmentIdentifier&&(O=`#${v[b]?_(D.fragmentIdentifier,v):D.fragmentIdentifier}`),`${c}${o}${O}`},e.pick=(D,v,c)=>{c=Object.assign({parseFragmentIdentifier:!0,[b]:!1},c);const{url:f,query:l,fragmentIdentifier:n}=e.parseUrl(D,c);return e.stringifyUrl({url:f,query:a(l,v),fragmentIdentifier:n},c)},e.exclude=(D,v,c)=>{const f=Array.isArray(v)?l=>!v.includes(l):(l,n)=>!v(l,n);return e.pick(D,f,c)}})(Ge);var Ms=Object.defineProperty,En=Object.getOwnPropertySymbols,js=Object.prototype.hasOwnProperty,Ls=Object.prototype.propertyIsEnumerable,vn=(e,t,r)=>t in e?Ms(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gn=(e,t)=>{for(var r in t||(t={}))js.call(t,r)&&vn(e,r,t[r]);if(En)for(var r of En(t))Ls.call(t,r)&&vn(e,r,t[r]);return e};const yn="ReactNative",ve={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},dt=" ",Bs=":",wn="/",Gt=2,$s=1e3,mn="js";function xt(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function xe(){return!ln()&&!!qt()&&navigator.product===yn}function _t(){return!xt()&&!!qt()}function Fe(){return xe()?ve.reactNative:xt()?ve.node:_t()?ve.browser:ve.unknown}function pn(e,t){let r=Ge.parse(e);return r=gn(gn({},r),t),e=Ge.stringify(r),e}function Vs(){return hn()||{name:"",description:"",url:"",icons:[""]}}function Hs(e,t){var r;const i=Fe(),a={protocol:e,version:t,env:i};return i==="browser"&&(a.host=((r=zt())==null?void 0:r.host)||"unknown"),a}function Sn(){if(Fe()===ve.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:i}=global.Platform;return[r,i].join("-")}const e=$o();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function On(){var e;const t=Fe();return t===ve.browser?[t,((e=zt())==null?void 0:e.host)||"unknown"].join(":"):t}function Nn(e,t,r){const i=Sn(),a=On();return[[e,t].join("-"),[mn,r].join("-"),i,a].join("/")}function Ks({protocol:e,version:t,relayUrl:r,sdkVersion:i,auth:a,projectId:s,useOnCloseEvent:b}){const u=r.split("?"),d=Nn(e,t,i),h={auth:a,ua:d,projectId:s,useOnCloseEvent:b||void 0},_=pn(u[1]||"",h);return u[0]+"?"+_}function Ws(e){let t=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const r=typeof t<"u"?e.split("://")[1]:e;return t=t==="wss"?"https":"http",[t,r].join("://")}function qs(e,t,r){if(!e[t]||typeof e[t]!==r)throw new Error(`Missing or invalid "${t}" param`)}function Cn(e,t=Gt){return An(e.split(wn),t)}function zs(e){return Cn(e).join(dt)}function Ce(e,t){return e.filter(r=>t.includes(r)).length===e.length}function An(e,t=Gt){return e.slice(Math.max(e.length-t,0))}function Ys(e){return Object.fromEntries(e.entries())}function ks(e){return new Map(Object.entries(e))}function Gs(e,t){const r={};return Object.keys(e).forEach(i=>{r[i]=t(e[i])}),r}const xs=e=>e;function Un(e){return e.trim().replace(/^\w/,t=>t.toUpperCase())}function Xs(e){return e.split(dt).map(t=>Un(t)).join(dt)}function Js(e=Te.FIVE_MINUTES,t){const r=Te.toMiliseconds(e||Te.FIVE_MINUTES);let i,a,s;return{resolve:b=>{s&&i&&(clearTimeout(s),i(b))},reject:b=>{s&&a&&(clearTimeout(s),a(b))},done:()=>new Promise((b,u)=>{s=setTimeout(()=>{u(new Error(t))},r),i=b,a=u})}}function Qs(e,t,r){return new Promise(async(i,a)=>{const s=setTimeout(()=>a(new Error(r)),t);try{const b=await e;i(b)}catch(b){a(b)}clearTimeout(s)})}function Xt(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Zs(e){return Xt("topic",e)}function eu(e){return Xt("id",e)}function tu(e){const[t,r]=e.split(":"),i={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")i.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))i.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return i}function ru(e,t){return Te.fromMiliseconds((t||Date.now())+Te.toMiliseconds(e))}function nu(e){return Date.now()>=Te.toMiliseconds(e)}function iu(e,t){return`${e}${t?`:${t}`:""}`}function Ae(e=[],t=[]){return[...new Set([...e,...t])]}async function au({id:e,topic:t,wcDeepLink:r}){try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r;let a=i?.href;if(typeof a!="string")return;a.endsWith("/")&&(a=a.slice(0,-1));const s=`${a}/wc?requestId=${e}&sessionTopic=${t}`,b=Fe();b===ve.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):b===ve.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(i){console.error(i)}}const ou={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}},Tn="irn";function su(e){return e?.relay||{protocol:Tn}}function uu(e){const t=ou[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var cu=Object.defineProperty,In=Object.getOwnPropertySymbols,fu=Object.prototype.hasOwnProperty,lu=Object.prototype.propertyIsEnumerable,Rn=(e,t,r)=>t in e?cu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hu=(e,t)=>{for(var r in t||(t={}))fu.call(t,r)&&Rn(e,r,t[r]);if(In)for(var r of In(t))lu.call(t,r)&&Rn(e,r,t[r]);return e};function Pn(e,t="-"){const r={},i="relay"+t;return Object.keys(e).forEach(a=>{if(a.startsWith(i)){const s=a.replace(i,""),b=e[a];r[s]=b}}),r}function du(e){const t=e.indexOf(":"),r=e.indexOf("?")!==-1?e.indexOf("?"):void 0,i=e.substring(0,t),a=e.substring(t+1,r).split("@"),s=typeof r<"u"?e.substring(r):"",b=Ge.parse(s);return{protocol:i,topic:Fn(a[0]),version:parseInt(a[1],10),symKey:b.symKey,relay:Pn(b)}}function Fn(e){return e.startsWith("//")?e.substring(2):e}function Mn(e,t="-"){const r="relay",i={};return Object.keys(e).forEach(a=>{const s=r+t+a;e[a]&&(i[s]=e[a])}),i}function _u(e){return`${e.protocol}:${e.topic}@${e.version}?`+Ge.stringify(hu({symKey:e.symKey},Mn(e.relay)))}var Du=Object.defineProperty,bu=Object.defineProperties,Eu=Object.getOwnPropertyDescriptors,jn=Object.getOwnPropertySymbols,vu=Object.prototype.hasOwnProperty,gu=Object.prototype.propertyIsEnumerable,Ln=(e,t,r)=>t in e?Du(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yu=(e,t)=>{for(var r in t||(t={}))vu.call(t,r)&&Ln(e,r,t[r]);if(jn)for(var r of jn(t))gu.call(t,r)&&Ln(e,r,t[r]);return e},wu=(e,t)=>bu(e,Eu(t));function Me(e){const t=[];return e.forEach(r=>{const[i,a]=r.split(":");t.push(`${i}:${a}`)}),t}function Bn(e){const t=[];return Object.values(e).forEach(r=>{t.push(...Me(r.accounts))}),t}function $n(e,t){const r=[];return Object.values(e).forEach(i=>{Me(i.accounts).includes(t)&&r.push(...i.methods)}),r}function Vn(e,t){const r=[];return Object.values(e).forEach(i=>{Me(i.accounts).includes(t)&&r.push(...i.events)}),r}function mu(e,t){const r=Gn(e,t);if(r)throw new Error(r.message);const i={};for(const[a,s]of Object.entries(e))i[a]={methods:s.methods,events:s.events,chains:s.accounts.map(b=>`${b.split(":")[0]}:${b.split(":")[1]}`)};return i}function pu(e){const{proposal:{requiredNamespaces:t,optionalNamespaces:r={}},supportedNamespaces:i}=e,a=Qt(t),s=Qt(r),b={};Object.keys(i).forEach(h=>{const _=i[h].chains,g=i[h].methods,w=i[h].events,y=i[h].accounts;_.forEach(m=>{if(!y.some(S=>S.includes(m)))throw new Error(`No accounts provided for chain ${m} in namespace ${h}`)}),b[h]={chains:_,methods:g,events:w,accounts:y}});const u=Xn(t,b,"approve()");if(u)throw new Error(u.message);const d={};return!Object.keys(t).length&&!Object.keys(r).length?b:(Object.keys(a).forEach(h=>{const _=i[h].chains.filter(m=>{var S,p;return(p=(S=a[h])==null?void 0:S.chains)==null?void 0:p.includes(m)}),g=i[h].methods.filter(m=>{var S,p;return(p=(S=a[h])==null?void 0:S.methods)==null?void 0:p.includes(m)}),w=i[h].events.filter(m=>{var S,p;return(p=(S=a[h])==null?void 0:S.events)==null?void 0:p.includes(m)}),y=_.map(m=>i[h].accounts.filter(S=>S.includes(`${m}:`))).flat();d[h]={chains:_,methods:g,events:w,accounts:y}}),Object.keys(s).forEach(h=>{var _,g,w,y,m,S;if(!i[h])return;const p=(g=(_=s[h])==null?void 0:_.chains)==null?void 0:g.filter(c=>i[h].chains.includes(c)),U=i[h].methods.filter(c=>{var f,l;return(l=(f=s[h])==null?void 0:f.methods)==null?void 0:l.includes(c)}),D=i[h].events.filter(c=>{var f,l;return(l=(f=s[h])==null?void 0:f.events)==null?void 0:l.includes(c)}),v=p?.map(c=>i[h].accounts.filter(f=>f.includes(`${c}:`))).flat();d[h]={chains:Ae((w=d[h])==null?void 0:w.chains,p),methods:Ae((y=d[h])==null?void 0:y.methods,U),events:Ae((m=d[h])==null?void 0:m.events,D),accounts:Ae((S=d[h])==null?void 0:S.accounts,v)}}),d)}function Jt(e){return e.includes(":")}function Hn(e){return Jt(e)?e.split(":")[0]:e}function Qt(e){var t,r,i;const a={};if(!Dt(e))return a;for(const[s,b]of Object.entries(e)){const u=Jt(s)?[s]:b.chains,d=b.methods||[],h=b.events||[],_=Hn(s);a[_]=wu(yu({},a[_]),{chains:Ae(u,(t=a[_])==null?void 0:t.chains),methods:Ae(d,(r=a[_])==null?void 0:r.methods),events:Ae(h,(i=a[_])==null?void 0:i.events)})}return a}const Su={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Ou={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Se(e,t){const{message:r,code:i}=Ou[e];return{message:t?`${r} ${t}`:r,code:i}}function je(e,t){const{message:r,code:i}=Su[e];return{message:t?`${r} ${t}`:r,code:i}}function Xe(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function Dt(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Ue(e){return typeof e>"u"}function ge(e,t){return t&&Ue(e)?!0:typeof e=="string"&&!!e.trim().length}function bt(e,t){return t&&Ue(e)?!0:typeof e=="number"&&!isNaN(e)}function Nu(e,t){const{requiredNamespaces:r}=t,i=Object.keys(e.namespaces),a=Object.keys(r);let s=!0;return Ce(a,i)?(i.forEach(b=>{const{accounts:u,methods:d,events:h}=e.namespaces[b],_=Me(u),g=r[b];(!Ce(Ze(b,g),_)||!Ce(g.methods,d)||!Ce(g.events,h))&&(s=!1)}),s):!1}function Je(e){return ge(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function Kn(e){if(ge(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&Je(r)}}return!1}function Cu(e){if(ge(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function Au(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function Uu(e){return e?.topic}function Tu(e,t){let r=null;return ge(e?.publicKey,!1)||(r=Se("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function Zt(e){let t=!0;return Xe(e)?e.length&&(t=e.every(r=>ge(r,!1))):t=!1,t}function Wn(e,t,r){let i=null;return Xe(t)&&t.length?t.forEach(a=>{i||Je(a)||(i=je("UNSUPPORTED_CHAINS",`${r}, chain ${a} should be a string and conform to "namespace:chainId" format`))}):Je(e)||(i=je("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function qn(e,t,r){let i=null;return Object.entries(e).forEach(([a,s])=>{if(i)return;const b=Wn(a,Ze(a,s),`${t} ${r}`);b&&(i=b)}),i}function zn(e,t){let r=null;return Xe(e)?e.forEach(i=>{r||Kn(i)||(r=je("UNSUPPORTED_ACCOUNTS",`${t}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):r=je("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Yn(e,t){let r=null;return Object.values(e).forEach(i=>{if(r)return;const a=zn(i?.accounts,`${t} namespace`);a&&(r=a)}),r}function kn(e,t){let r=null;return Zt(e?.methods)?Zt(e?.events)||(r=je("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=je("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function er(e,t){let r=null;return Object.values(e).forEach(i=>{if(r)return;const a=kn(i,`${t}, namespace`);a&&(r=a)}),r}function Iu(e,t,r){let i=null;if(e&&Dt(e)){const a=er(e,t);a&&(i=a);const s=qn(e,t,r);s&&(i=s)}else i=Se("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return i}function Gn(e,t){let r=null;if(e&&Dt(e)){const i=er(e,t);i&&(r=i);const a=Yn(e,t);a&&(r=a)}else r=Se("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function xn(e){return ge(e.protocol,!0)}function Ru(e,t){let r=!1;return t&&!e?r=!0:e&&Xe(e)&&e.length&&e.forEach(i=>{r=xn(i)}),r}function Pu(e){return typeof e=="number"}function Fu(e){return typeof e<"u"&&typeof e!==null}function Mu(e){return!(!e||typeof e!="object"||!e.code||!bt(e.code,!1)||!e.message||!ge(e.message,!1))}function ju(e){return!(Ue(e)||!ge(e.method,!1))}function Lu(e){return!(Ue(e)||Ue(e.result)&&Ue(e.error)||!bt(e.id,!1)||!ge(e.jsonrpc,!1))}function Bu(e){return!(Ue(e)||!ge(e.name,!1))}function $u(e,t){return!(!Je(t)||!Bn(e).includes(t))}function Vu(e,t,r){return ge(r,!1)?$n(e,t).includes(r):!1}function Hu(e,t,r){return ge(r,!1)?Vn(e,t).includes(r):!1}function Xn(e,t,r){let i=null;const a=Ku(e),s=Wu(t),b=Object.keys(a),u=Object.keys(s),d=Jn(Object.keys(e)),h=Jn(Object.keys(t)),_=d.filter(g=>!h.includes(g));return _.length&&(i=Se("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${_.toString()}
      Received: ${Object.keys(t).toString()}`)),Ce(b,u)||(i=Se("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${b.toString()}
      Approved: ${u.toString()}`)),Object.keys(t).forEach(g=>{if(!g.includes(":")||i)return;const w=Me(t[g].accounts);w.includes(g)||(i=Se("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${g}
        Required: ${g}
        Approved: ${w.toString()}`))}),b.forEach(g=>{i||(Ce(a[g].methods,s[g].methods)?Ce(a[g].events,s[g].events)||(i=Se("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${g}`)):i=Se("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${g}`))}),i}function Ku(e){const t={};return Object.keys(e).forEach(r=>{var i;r.includes(":")?t[r]=e[r]:(i=e[r].chains)==null||i.forEach(a=>{t[a]={methods:e[r].methods,events:e[r].events}})}),t}function Jn(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function Wu(e){const t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{const i=Me(e[r].accounts);i?.forEach(a=>{t[a]={accounts:e[r].accounts.filter(s=>s.includes(`${a}:`)),methods:e[r].methods,events:e[r].events}})}}),t}function qu(e,t){return bt(e,!1)&&e<=t.max&&e>=t.min}function zu(){const e=Fe();return new Promise(t=>{switch(e){case ve.browser:t(Qn());break;case ve.reactNative:t(Zn());break;case ve.node:t(ei());break;default:t(!0)}})}function Qn(){return _t()&&navigator?.onLine}async function Zn(){if(xe()&&typeof global<"u"&&global!=null&&global.NetInfo){const e=await(global==null?void 0:global.NetInfo.fetch());return e?.isConnected}return!0}function ei(){return!0}function Yu(e){switch(Fe()){case ve.browser:ti(e);break;case ve.reactNative:ri(e);break;case ve.node:break}}function ti(e){!xe()&&_t()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function ri(e){xe()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(t=>e(t?.isConnected))}const tr={};class ku{static get(t){return tr[t]}static set(t,r){tr[t]=r}static delete(t){delete tr[t]}}E.BASE10=Rt,E.BASE16=Ee,E.BASE64=ft,E.COLON=Bs,E.DEFAULT_DEPTH=Gt,E.EMPTY_SPACE=dt,E.ENV_MAP=ve,E.MemoryStore=ku,E.ONE_THOUSAND=$s,E.REACT_NATIVE_PRODUCT=yn,E.RELAYER_DEFAULT_PROTOCOL=Tn,E.SDK_TYPE=mn,E.SLASH=wn,E.TYPE_0=Pt,E.TYPE_1=Be,E.UTF8=lt,E.appendToQueryString=pn,E.assertType=qs,E.buildApprovedNamespaces=pu,E.calcExpiry=ru,E.capitalize=Xs,E.capitalizeWord=Un,E.createDelayedPromise=Js,E.createExpiringPromise=Qs,E.decodeTypeByte=qe,E.decrypt=Ao,E.deriveSymKey=So,E.deserialize=jt,E.encodeTypeByte=Yr,E.encrypt=Co,E.engineEvent=iu,E.enumify=xs,E.formatAccountId=ar,E.formatAccountWithChain=ii,E.formatChainId=ir,E.formatExpirerTarget=Xt,E.formatIdTarget=eu,E.formatMessage=fi,E.formatMessageContext=zs,E.formatRelayParams=Mn,E.formatRelayRpcUrl=Ks,E.formatTopicTarget=Zs,E.formatUA=Nn,E.formatUri=_u,E.generateKeyPair=mo,E.generateRandomBytes32=po,E.getAccountsChains=Me,E.getAccountsFromNamespaces=oi,E.getAddressFromAccount=or,E.getAddressesFromAccounts=ai,E.getAppMetadata=Vs,E.getBrowserOnlineStatus=Qn,E.getChainFromAccount=sr,E.getChainsFromAccounts=ur,E.getChainsFromNamespace=Ze,E.getChainsFromNamespaces=si,E.getChainsFromRequiredNamespaces=ui,E.getDidAddress=fr,E.getDidAddressSegments=et,E.getDidChainId=cr,E.getEnvironment=Fe,E.getHttpUrl=Ws,E.getInternalError=Se,E.getJavascriptID=On,E.getJavascriptOS=Sn,E.getLastItems=An,E.getNamespacedDidChainId=ci,E.getNamespacesChains=Bn,E.getNamespacesEventsForChainId=Vn,E.getNamespacesMethodsForChainId=$n,E.getNodeOnlineStatus=ei,E.getReactNativeOnlineStatus=Zn,E.getRelayClientMetadata=Hs,E.getRelayProtocolApi=uu,E.getRelayProtocolName=su,E.getRequiredNamespacesFromNamespaces=mu,E.getSdkError=je,E.getUniqueValues=gt,E.handleDeeplinkRedirect=au,E.hasOverlap=Ce,E.hashKey=Oo,E.hashMessage=No,E.isBrowser=_t,E.isCaipNamespace=Jt,E.isConformingNamespaces=Xn,E.isExpired=nu,E.isNode=xt,E.isOnline=zu,E.isProposalStruct=Au,E.isReactNative=xe,E.isSessionCompatible=Nu,E.isSessionStruct=Uu,E.isTypeOneEnvelope=To,E.isUndefined=Ue,E.isValidAccountId=Kn,E.isValidAccounts=zn,E.isValidActions=kn,E.isValidArray=Xe,E.isValidChainId=Je,E.isValidChains=Wn,E.isValidController=Tu,E.isValidErrorReason=Mu,E.isValidEvent=Bu,E.isValidId=Pu,E.isValidNamespaceAccounts=Yn,E.isValidNamespaceActions=er,E.isValidNamespaceChains=qn,E.isValidNamespaceMethodsOrEvents=Zt,E.isValidNamespaces=Gn,E.isValidNamespacesChainId=$u,E.isValidNamespacesEvent=Hu,E.isValidNamespacesRequest=Vu,E.isValidNumber=bt,E.isValidObject=Dt,E.isValidParams=Fu,E.isValidRelay=xn,E.isValidRelays=Ru,E.isValidRequest=ju,E.isValidRequestExpiry=qu,E.isValidRequiredNamespaces=Iu,E.isValidResponse=Lu,E.isValidString=ge,E.isValidUrl=Cu,E.mapEntries=Gs,E.mapToObj=Ys,E.mergeArrays=Ae,E.normalizeNamespaces=Qt,E.objToMap=ks,E.parseAccountId=vt,E.parseChainId=nr,E.parseContextNames=Cn,E.parseExpirerTarget=tu,E.parseNamespaceKey=Hn,E.parseRelayParams=Pn,E.parseTopic=Fn,E.parseUri=du,E.serialize=kr,E.subscribeToBrowserNetworkChange=ti,E.subscribeToNetworkChange=Yu,E.subscribeToReactNativeNetworkChange=ri,E.validateDecoding=Uo,E.validateEncoding=Gr,Object.defineProperty(E,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
